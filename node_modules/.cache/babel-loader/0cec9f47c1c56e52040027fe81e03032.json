{"remainingRequest":"D:\\cdRule\\node_modules\\babel-loader\\lib\\index.js!D:\\cdRule\\node_modules\\babel-loader\\lib\\index.js!D:\\cdRule\\src\\components\\Table\\tools\\src\\event.js","dependencies":[{"path":"D:\\cdRule\\src\\components\\Table\\tools\\src\\event.js","mtime":1635230121386},{"path":"D:\\cdRule\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\cdRule\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\cdRule\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import XEUtils from 'xe-utils';\nimport { browse } from \"../../tools/src/dom\";\nexport var EVENT_KEYS = {\n  F2: 'F2',\n  ESCAPE: 'Escape',\n  ENTER: 'Enter',\n  TAB: 'Tab',\n  DELETE: 'Delete',\n  BACKSPACE: 'Backspace',\n  SPACEBAR: ' ',\n  CONTEXT_MENU: 'ContextMenu',\n  ARROW_UP: 'ArrowUp',\n  ARROW_DOWN: 'ArrowDown',\n  ARROW_LEFT: 'ArrowLeft',\n  ARROW_RIGHT: 'ArrowRight',\n  PAGE_UP: 'PageUp',\n  PAGE_DOWN: 'PageDown'\n};\nvar convertEventKeys = {\n  ' ': 'Spacebar',\n  Apps: EVENT_KEYS.CONTEXT_MENU,\n  Del: EVENT_KEYS.DELETE,\n  Up: EVENT_KEYS.ARROW_UP,\n  Down: EVENT_KEYS.ARROW_DOWN,\n  Left: EVENT_KEYS.ARROW_LEFT,\n  Right: EVENT_KEYS.ARROW_RIGHT // 监听全局事件\n\n};\nvar wheelName = browse.firefox ? 'DOMMouseScroll' : 'mousewheel';\nvar eventStore = [];\nexport var hasEventKey = function hasEventKey(evnt, targetKey) {\n  var key = evnt.key;\n  targetKey = targetKey.toLowerCase();\n  return key ? targetKey === key.toLowerCase() || !!(convertEventKeys[key] && convertEventKeys[key].toLowerCase() === targetKey) : false;\n};\nexport var GlobalEvent = {\n  on: function on(comp, type, cb) {\n    if (cb) {\n      eventStore.push({\n        comp: comp,\n        type: type,\n        cb: cb\n      });\n    }\n  },\n  off: function off(comp, type) {\n    XEUtils.remove(eventStore, function (item) {\n      return item.comp === comp && item.type === type;\n    });\n  },\n  trigger: function trigger(evnt) {\n    var isWheel = evnt.type === wheelName;\n    eventStore.forEach(function (_ref) {\n      var comp = _ref.comp,\n          type = _ref.type,\n          cb = _ref.cb; // 如果被取消冒泡，不再执行\n\n      if (!evnt.cancelBubble) {\n        if (type === evnt.type || isWheel && type === 'mousewheel') {\n          cb.call(comp, evnt);\n        }\n      }\n    });\n  },\n  eqKeypad: function eqKeypad(evnt, keyVal) {\n    var key = evnt.key;\n\n    if (keyVal.toLowerCase() === key.toLowerCase()) {\n      return true;\n    }\n\n    return false;\n  }\n};\n\nif (browse.isDoc) {\n  if (!browse.msie) {\n    document.addEventListener('copy', GlobalEvent.trigger, false);\n    document.addEventListener('cut', GlobalEvent.trigger, false);\n    document.addEventListener('paste', GlobalEvent.trigger, false);\n  }\n\n  document.addEventListener('keydown', GlobalEvent.trigger, false);\n  document.addEventListener('contextmenu', GlobalEvent.trigger, false);\n  window.addEventListener('mousedown', GlobalEvent.trigger, false);\n  window.addEventListener('blur', GlobalEvent.trigger, false);\n  window.addEventListener('resize', GlobalEvent.trigger, false);\n  window.addEventListener(wheelName, XEUtils.throttle(GlobalEvent.trigger, 100, {\n    leading: true,\n    trailing: false\n  }), false);\n}\n\nexport default GlobalEvent;",{"version":3,"sources":["D:\\cdRule\\src\\components\\Table\\tools\\src\\event.js"],"names":["EVENT_KEYS","F2","ESCAPE","ENTER","TAB","DELETE","BACKSPACE","SPACEBAR","CONTEXT_MENU","ARROW_UP","ARROW_DOWN","ARROW_LEFT","ARROW_RIGHT","PAGE_UP","PAGE_DOWN","convertEventKeys","Apps","Del","Up","Down","Left","Right","wheelName","browse","eventStore","hasEventKey","key","evnt","targetKey","GlobalEvent","on","comp","type","cb","off","XEUtils","item","trigger","isWheel","eqKeypad","keyVal","document","window","leading","trailing"],"mappings":"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","sourcesContent":["import XEUtils from 'xe-utils'\r\nimport { browse } from '../../tools/src/dom'\r\n\r\nexport const EVENT_KEYS = {\r\n  F2: 'F2',\r\n  ESCAPE: 'Escape',\r\n  ENTER: 'Enter',\r\n  TAB: 'Tab',\r\n  DELETE: 'Delete',\r\n  BACKSPACE: 'Backspace',\r\n  SPACEBAR: ' ',\r\n  CONTEXT_MENU: 'ContextMenu',\r\n  ARROW_UP: 'ArrowUp',\r\n  ARROW_DOWN: 'ArrowDown',\r\n  ARROW_LEFT: 'ArrowLeft',\r\n  ARROW_RIGHT: 'ArrowRight',\r\n  PAGE_UP: 'PageUp',\r\n  PAGE_DOWN: 'PageDown'\r\n}\r\n\r\nconst convertEventKeys = {\r\n  ' ': 'Spacebar',\r\n  Apps: EVENT_KEYS.CONTEXT_MENU,\r\n  Del: EVENT_KEYS.DELETE,\r\n  Up: EVENT_KEYS.ARROW_UP,\r\n  Down: EVENT_KEYS.ARROW_DOWN,\r\n  Left: EVENT_KEYS.ARROW_LEFT,\r\n  Right: EVENT_KEYS.ARROW_RIGHT\r\n}\r\n\r\n// 监听全局事件\r\nconst wheelName = browse.firefox ? 'DOMMouseScroll' : 'mousewheel'\r\nconst eventStore = []\r\n\r\nexport const hasEventKey = (evnt, targetKey) => {\r\n  const { key } = evnt\r\n  targetKey = targetKey.toLowerCase()\r\n  return key ? (targetKey === key.toLowerCase() || !!(convertEventKeys[key] && convertEventKeys[key].toLowerCase() === targetKey)) : false\r\n}\r\n\r\nexport const GlobalEvent = {\r\n  on (comp, type, cb) {\r\n    if (cb) {\r\n      eventStore.push({ comp, type, cb })\r\n    }\r\n  },\r\n  off (comp, type) {\r\n    XEUtils.remove(eventStore, item => item.comp === comp && item.type === type)\r\n  },\r\n  trigger (evnt) {\r\n    const isWheel = evnt.type === wheelName\r\n    eventStore.forEach(({ comp, type, cb }) => {\r\n      // 如果被取消冒泡，不再执行\r\n      if (!evnt.cancelBubble) {\r\n        if (type === evnt.type || (isWheel && type === 'mousewheel')) {\r\n          cb.call(comp, evnt)\r\n        }\r\n      }\r\n    })\r\n  },\r\n  eqKeypad (evnt, keyVal) {\r\n    const { key } = evnt\r\n    if (keyVal.toLowerCase() === key.toLowerCase()) {\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n}\r\n\r\nif (browse.isDoc) {\r\n  if (!browse.msie) {\r\n    document.addEventListener('copy', GlobalEvent.trigger, false)\r\n    document.addEventListener('cut', GlobalEvent.trigger, false)\r\n    document.addEventListener('paste', GlobalEvent.trigger, false)\r\n  }\r\n  document.addEventListener('keydown', GlobalEvent.trigger, false)\r\n  document.addEventListener('contextmenu', GlobalEvent.trigger, false)\r\n  window.addEventListener('mousedown', GlobalEvent.trigger, false)\r\n  window.addEventListener('blur', GlobalEvent.trigger, false)\r\n  window.addEventListener('resize', GlobalEvent.trigger, false)\r\n  window.addEventListener(wheelName, XEUtils.throttle(GlobalEvent.trigger, 100, { leading: true, trailing: false }), false)\r\n}\r\n\r\nexport default GlobalEvent\r\n"]}]}