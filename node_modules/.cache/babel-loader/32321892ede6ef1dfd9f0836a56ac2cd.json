{"remainingRequest":"D:\\cdRule\\node_modules\\babel-loader\\lib\\index.js!D:\\cdRule\\node_modules\\babel-loader\\lib\\index.js!D:\\cdRule\\src\\common\\mixin\\cache.js","dependencies":[{"path":"D:\\cdRule\\src\\common\\mixin\\cache.js","mtime":1672991648099},{"path":"D:\\cdRule\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\cdRule\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\cdRule\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport { initAlarm } from '@/common/cache/CacheAlarm.js';\nimport * as cache_team_car from '@/common/cache/CacheTeamCar.js';\nimport * as cache_china from '@/common/cache/CacheChina.js'; //在同一个域内，给插件项目使用\n\nwindow.$_cache_team_car = cache_team_car;\nwindow.$_cache_china = cache_china;\n/**\r\n * 全局数据缓存模块\r\n */\n\nvar cache = {\n  version: null,\n  title: null,\n  mainHtml: null,\n  //公司的模式\n  sessionId: null,\n  authorization: null,\n  userCfg: null,\n  //用户配置信息，公司配置+用户配置\n  sysCfg: {},\n  //系统配置信息，sys_cfg表\n  cmp: null,\n  //用户所属公司\n  user: null,\n  //用户对象\n  maps: null,\n  //地图列表，[{id:'google',name:'谷歌地图'},{id:'baidu',name:'百度地图'},...]\n  videoHost: null //视频地址，{IP}:9988\n  // checkScan:{}        //查岗,巡检,巡检日志  \n\n};\n\ncache.init = function (result) {\n  cache.version = result.version || '';\n  cache.title = result.title || '';\n  cache.mainHtml = result['main.html'] || 'main.html';\n  cache.sessionId = result.sessionId;\n  cache.userCfg = result.userCfg || {};\n  cache.sysCfg = result.sysCfg || cache.sysCfg;\n  cache.cmp = result.cmp;\n  cache.user = result.user;\n  cache.maps = result.maps;\n  cache.logoUrl = result.logoUrl; // cache.checkScan = result.checkScan;\n\n  try {\n    cache.videoHost = result.videoHost.replace('{IP}', $_domain.WEB_HOST.split(':')[0]);\n  } catch (e) {} // 设置后台登录过的授权码，以后每次请求后台，需要把该授权码带上\n  // window.$_http.authorization(cache.authorization = result.authorization);\n  // 多语言设置\n  // window.$_L.init(result.langs);\n  // 系统隐藏项设置\n  // window.$_H.init(result.sysCfg);\n  // 用户操作权限设置\n  // window.$_A.init(result.actions, result.user.userRole);\n  // 功能权限设置\n  // window.$_S.init(result.sysCfg);\n  // console.log(result.alarmNames, result.alarmCount);\n\n\n  initAlarm(result.alarmNames, result.alarmCount); // if (result.xss) {\n  //   let regs = [/<script[ 　\\/](.*?)>/gi, /<iframe[ 　\\/](.*?)>/gi, /<img[ 　\\/](.*?)>/gi, /<input[ 　\\/](.*?)>/gi, /<a[ 　\\/](.*?)>/gi, /<applet[ 　\\/](.*?)>/gi, /<audio[ 　\\/](.*?)>/gi, /<body[ 　\\/](.*?)>/gi, /<button[ 　\\/](.*?)>/gi, /<canvas[ 　\\/](.*?)>/gi, /<command[ 　\\/](.*?)>/gi, /<embed[ 　\\/](.*?)>/gi, /<frame[ 　\\/](.*?)>/gi, /<select[ 　\\/](.*?)>/gi, /<source[ 　\\/](.*?)>/gi, /<style[ 　\\/](.*?)>/gi, /<table[ 　\\/](.*?)>/gi, /<textarea[ 　\\/](.*?)>/gi, /<time[ 　\\/](.*?)>/gi, /<video[ 　\\/](.*?)>/gi, /<object[ 　\\/](.*?)>/gi, /alert\\(.*?\\)/gi, /confirm\\(.*?\\)/gi, /prompt\\(.*?\\)/gi, /open\\(.*?\\)/gi, /eval\\(.*?\\)/gi];\n  //   window.$_XSS = v => {\n  //     if (!v) return v;\n  //     let vv = v;\n  //     regs.forEach(reg => vv = vv.replace(reg,\"\"))\n  //     return vv == v ? vv : window.$_XSS(vv);\n  //   }\n  // }\n};\n\nObject.assign(cache, {\n  userIsNormal: function userIsNormal() {\n    return cache.user ? cache.user.userRole == '0' : false;\n  },\n  userIsCmpAdmin: function userIsCmpAdmin() {\n    return cache.user ? cache.user.userRole == '1' : false;\n  },\n  userIsSysAdmin: function userIsSysAdmin() {\n    return cache.user ? cache.user.userRole == '2' : false;\n  },\n  userIsSysSuper: function userIsSysSuper() {\n    return cache.user ? cache.user.userRole == '3' : false;\n  },\n  userIsSys: function userIsSys() {\n    return cache.userIsSysAdmin() || cache.userIsSysSuper();\n  }\n});\nexport default window.$_cache = cache;",{"version":3,"sources":["D:\\cdRule\\src\\common\\mixin\\cache.js"],"names":["window","cache","version","title","mainHtml","sessionId","authorization","userCfg","sysCfg","cmp","user","maps","videoHost","result","$_domain","initAlarm","Object","userIsNormal","userIsCmpAdmin","userIsSysAdmin","userIsSysSuper","userIsSys"],"mappings":"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","sourcesContent":["\r\nimport { initAlarm } from '@/common/cache/CacheAlarm.js';\r\nimport * as cache_team_car from '@/common/cache/CacheTeamCar.js';\r\nimport * as cache_china from '@/common/cache/CacheChina.js';\r\n\r\n//在同一个域内，给插件项目使用\r\nwindow.$_cache_team_car = cache_team_car;\r\nwindow.$_cache_china = cache_china;\r\n\r\n/**\r\n * 全局数据缓存模块\r\n */\r\nlet cache = {\r\n  version: null,\r\n  title: null,\r\n  mainHtml: null,      //公司的模式\r\n  sessionId: null,\r\n  authorization: null,\r\n  userCfg: null,      //用户配置信息，公司配置+用户配置\r\n  sysCfg: {},         //系统配置信息，sys_cfg表\r\n  cmp: null,          //用户所属公司\r\n  user: null,         //用户对象\r\n  maps: null,         //地图列表，[{id:'google',name:'谷歌地图'},{id:'baidu',name:'百度地图'},...]\r\n  videoHost: null,    //视频地址，{IP}:9988\r\n  // checkScan:{}        //查岗,巡检,巡检日志  \r\n};\r\n\r\ncache.init = result => {\r\n  cache.version = result.version || '';\r\n  cache.title = result.title || '';\r\n  cache.mainHtml = result['main.html'] || 'main.html';\r\n  cache.sessionId = result.sessionId;\r\n  cache.userCfg = result.userCfg || {};\r\n  cache.sysCfg = result.sysCfg || cache.sysCfg;\r\n  cache.cmp = result.cmp;\r\n  cache.user = result.user;\r\n  cache.maps = result.maps;\r\n  cache.logoUrl = result.logoUrl;\r\n  // cache.checkScan = result.checkScan;\r\n\r\n  try { cache.videoHost = result.videoHost.replace('{IP}', $_domain.WEB_HOST.split(':')[0]); } catch (e) { }\r\n\r\n  // 设置后台登录过的授权码，以后每次请求后台，需要把该授权码带上\r\n  // window.$_http.authorization(cache.authorization = result.authorization);\r\n  // 多语言设置\r\n  // window.$_L.init(result.langs);\r\n  // 系统隐藏项设置\r\n  // window.$_H.init(result.sysCfg);\r\n  // 用户操作权限设置\r\n  // window.$_A.init(result.actions, result.user.userRole);\r\n  // 功能权限设置\r\n  // window.$_S.init(result.sysCfg);\r\n  // console.log(result.alarmNames, result.alarmCount);\r\n  initAlarm(result.alarmNames, result.alarmCount);\r\n  \r\n  // if (result.xss) {\r\n  //   let regs = [/<script[ 　\\/](.*?)>/gi, /<iframe[ 　\\/](.*?)>/gi, /<img[ 　\\/](.*?)>/gi, /<input[ 　\\/](.*?)>/gi, /<a[ 　\\/](.*?)>/gi, /<applet[ 　\\/](.*?)>/gi, /<audio[ 　\\/](.*?)>/gi, /<body[ 　\\/](.*?)>/gi, /<button[ 　\\/](.*?)>/gi, /<canvas[ 　\\/](.*?)>/gi, /<command[ 　\\/](.*?)>/gi, /<embed[ 　\\/](.*?)>/gi, /<frame[ 　\\/](.*?)>/gi, /<select[ 　\\/](.*?)>/gi, /<source[ 　\\/](.*?)>/gi, /<style[ 　\\/](.*?)>/gi, /<table[ 　\\/](.*?)>/gi, /<textarea[ 　\\/](.*?)>/gi, /<time[ 　\\/](.*?)>/gi, /<video[ 　\\/](.*?)>/gi, /<object[ 　\\/](.*?)>/gi, /alert\\(.*?\\)/gi, /confirm\\(.*?\\)/gi, /prompt\\(.*?\\)/gi, /open\\(.*?\\)/gi, /eval\\(.*?\\)/gi];\r\n  //   window.$_XSS = v => {\r\n  //     if (!v) return v;\r\n  //     let vv = v;\r\n  //     regs.forEach(reg => vv = vv.replace(reg,\"\"))\r\n  //     return vv == v ? vv : window.$_XSS(vv);\r\n  //   }\r\n  // }\r\n};\r\n\r\nObject.assign(cache, {\r\n  userIsNormal:   () => cache.user ? cache.user.userRole == '0' : false,\r\n  userIsCmpAdmin: () => cache.user ? cache.user.userRole == '1' : false,\r\n  userIsSysAdmin: () => cache.user ? cache.user.userRole == '2' : false,\r\n  userIsSysSuper: () => cache.user ? cache.user.userRole == '3' : false,\r\n  userIsSys:      () => cache.userIsSysAdmin() || cache.userIsSysSuper(),\r\n});\r\n\r\nexport default window.$_cache = cache;\r\n"]}]}