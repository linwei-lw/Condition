{"remainingRequest":"D:\\cdRule\\node_modules\\babel-loader\\lib\\index.js!D:\\cdRule\\node_modules\\babel-loader\\lib\\index.js!D:\\cdRule\\src\\common\\gps\\Labels.js","dependencies":[{"path":"D:\\cdRule\\src\\common\\gps\\Labels.js","mtime":1656916069305},{"path":"D:\\cdRule\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\cdRule\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\cdRule\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.regexp.match\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.regexp.match\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es6.function.name\";\nimport _slicedToArray from \"D:\\\\cdRule\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/slicedToArray\";\nimport { getCars, State } from '@/common/cache/CacheTeamCar.js'; // import { getBaseAttrByCarId }  from '@/common/cache/CacheCarAttr.js';\n// import { getTmns }             from '@/common/cache/CacheTmn.js';\n// import { getDrivers }          from '@/common/cache/CacheDriver.js';\n// import { getSgns }             from '@/common/cache/CacheSgn.js';\n\nimport { hasFavAlarmType } from '@/common/cache/CacheAlarm.js';\nimport { getAlarmNames } from '@/common/cache/CacheAlarm.js';\nimport { getPlateColorMap } from '@/common/Vars.js';\nimport { getCarStateCnMap } from '@/common/Vars.js';\nimport { getGpsTypeMap } from '@/common/Vars.js';\nimport { secondsToHMS } from '@/common/util/Dates.js';\nimport { secondsToCnDesc } from '@/common/util/Dates.js';\nimport { apartToHMS } from '@/common/util/Dates.js';\nimport { apartDateTimeCnDesc } from '@/common/util/Dates.js';\nimport { getNowDateTime } from '@/common/util/Dates.js';\nimport { apartSeconds } from '@/common/util/Dates.js';\nimport { secondsToDHMS } from '@/common/util/Dates.js';\nimport { getExtText } from '@/components/util/Widget.js'; // import { getBbAttrByCarId }    from '@/common/cache/CacheCarAttr.js';\n\nvar Labels = {};\nexport default Labels; // private ======================================================================================================================================\n\nfunction _getCarMap() {\n  if (Labels._CARS) return Labels._CARS.map;\n\n  var _getCars = getCars(),\n      _getCars2 = _slicedToArray(_getCars, 2),\n      CARS = _getCars2[0],\n      TEAMS = _getCars2[1];\n\n  Labels._CARS = CARS;\n  Labels._TEAMS = TEAMS;\n  return Labels._CARS.map;\n}\n\nfunction _getTeamMap() {\n  !Labels._TEAMS && _getCarMap();\n  return Labels._TEAMS.map;\n}\n\nfunction _getTmnMap() {\n  if (Labels._TMNS) return Labels._TMNS.map;\n  Labels._TMNS = getTmns();\n  return Labels._TMNS.map;\n}\n\nfunction _getDriverMap() {\n  if (Labels._DRIVERS) return Labels._DRIVERS.map;\n  Labels._DRIVERS = getDrivers();\n  return Labels._DRIVERS.map;\n}\n\nfunction _getSgnMap(carId) {\n  if (Labels._SGNS) return Labels._SGNS.map[carId] || Labels._SGNS.defs;\n  Labels._SGNS = getSgns();\n  return Labels._SGNS.map[carId] || Labels._SGNS.defs;\n} // team ======================================================================================================================================\n//根据车队ID，取车队名称\n\n\nLabels.teamNameByTeamId = function (item) {\n  if (!item) return '';\n  item = item.row || item;\n  if (!item.teamId) return '';\n  item = _getTeamMap()[item.teamId]; //team\n\n  return item ? item.name : '';\n}; //根据车队ID，取车队扩展属性\n\n\nLabels.teamExtsByTeamId = function (item) {\n  if (!item) return '';\n  item = item.row || item;\n  if (!item.teamId) return '';\n  item = _getTeamMap()[item.teamId];\n\n  var parent = _parent(item);\n\n  var exts = item && item.exts || {};\n\n  if (item && item.exts && typeof item.exts == 'string') {\n    exts = JSON.parse(item.exts);\n  }\n\n  return parent ? parent : exts.sslx == '0' ? item.name : '';\n};\n\nfunction _parent(data) {\n  var temp;\n\n  if (data) {\n    var _Dataparent = function _Dataparent(item) {\n      if (item.parent) {\n        _Dataparent(item.parent);\n\n        var exts = item && item.exts || {};\n\n        if (item && item.exts && typeof item.exts == 'string') {\n          exts = JSON.parse(item.exts);\n        }\n\n        if (exts.sslx == '0') {\n          temp = item.name;\n        }\n      }\n    };\n\n    _Dataparent(data.parent);\n  }\n\n  return temp;\n} //根据车辆ID，取车队名称\n\n\nLabels.teamNameByCarId = function (item) {\n  if (!item) return '';\n  item = item.row || item;\n  if (!item.carId) return '';\n  item = _getCarMap()[item.carId]; //car\n\n  item = item ? _getTeamMap()[item.teamId] : null; //team\n\n  return item ? item.name : '';\n}; //根据车辆ID，取顶层车队名称\n\n\nLabels.rootTeamByCarId = function (item) {\n  if (!item) return '';\n  item = item.row || item;\n  if (!item.carId) return '';\n  item = _getCarMap()[item.carId]; //car\n\n  item = item ? _getTeamMap()[item.teamId] : null; //team\n\n  if (!item) return '';\n  var pteam;\n\n  while (item.pid != '0') {\n    pteam = _getTeamMap()[item.pid]; //pteam\n\n    if (!pteam || item == pteam) return item.name;\n    item = pteam;\n  }\n\n  return item.name;\n};\n\nLabels.allTeamByCarId = function (item) {\n  if (!item) return '';\n  item = item.row || item;\n  if (!item.carId) return '';\n  item = _getCarMap()[item.carId]; //car\n\n  item = item ? _getTeamMap()[item.teamId] : null; //team\n\n  if (!item) return '';\n  var names = [item.name],\n      pteam;\n\n  while (item.pid != '0') {\n    pteam = _getTeamMap()[item.pid]; //pteam\n\n    if (!pteam || item == pteam) return names.reverse().join(' > ');\n    item = pteam;\n    names.push(item.name);\n  }\n\n  return names.reverse().join(' > ');\n}; //根据驾驶员ID，取车队名称\n\n\nLabels.teamNameByDrvId = function (item, col) {\n  col = col || item.column;\n  item = item.row || item;\n  col = col ? col.field || col.property : 'id'; //field\n\n  item = _getDriverMap()[item[col]]; //driver\n\n  item = item ? _getTeamMap()[item.teamId] : null; //team\n\n  return item ? item.name : '';\n}; // car ======================================================================================================================================\n//根据车辆ID，取车辆名称\n\n\nLabels.carNameByCarId = function (item) {\n  if (!item) return '';\n  item = item.row || item;\n  if (!item.carId) return '';\n  item = _getCarMap()[item.carId]; //car\n\n  return item ? item.name : '';\n}; //根据车辆ID，取车牌号\n\n\nLabels.plateByCarId = function (item) {\n  if (!item) return '';\n  item = item.row || item;\n  if (!item.carId) return '';\n  item = _getCarMap()[item.carId]; //car\n\n  return item ? item.plate : '';\n}; //根据车辆ID，取颜色\n\n\nLabels.plateByCarColor = function (item) {\n  if (!item) return '';\n  item = item.row || item;\n  if (!item.carId) return '';\n  item = _getCarMap()[item.carId]; //car\n\n  return item ? item.plateColor : '';\n}; //根据车牌颜色，取车牌颜色名称\n\n\nLabels.plateColor = function (item) {\n  if (!item) return '';\n  item = item.row || item;\n  if (!item.plateColor) return '';\n  return getPlateColorMap()[item.plateColor] || $_L.get('未知');\n}; //根据车辆ID，取车牌颜色名称\n\n\nLabels.plateByCarColorName = function (item) {\n  item = item.row || item;\n  item = _getCarMap()[item.carId]; //car\n\n  return getPlateColorMap()[item.plateColor] || $_L.get('未知');\n}; //根据车辆ID，取车主名称\n\n\nLabels.ownerByCarId = function (item) {\n  if (!item) return '';\n  item = item.row || item;\n  if (!item.carId) return '';\n  item = _getCarMap()[item.carId]; //car\n\n  return item ? item.owner || '' : '';\n}; //根据车辆ID，取车主电话\n\n\nLabels.ownerPhoneByCarId = function (item) {\n  if (!item) return '';\n  item = item.row || item;\n  if (!item.carId) return '';\n  item = _getCarMap()[item.carId]; //car\n\n  return item ? item.ownerPhone || '' : '';\n}; //根据车辆ID，取车辆说明\n\n\nLabels.carDesByCarId = function (item) {\n  if (!item) return '';\n  item = item.row || item;\n  if (!item.carId) return '';\n  item = _getCarMap()[item.carId]; //car\n\n  return item ? item.des : '';\n}; //根据车辆ID，取车辆说明2\n\n\nLabels.carDes2ByCarId = function (item) {\n  if (!item) return '';\n  item = item.row || item;\n  if (!item.carId) return '';\n  item = _getCarMap()[item.carId]; //car\n\n  return item ? item.des2 : '';\n}; //根据车辆ID，取车辆欠费日期\n\n\nLabels.carDueDateByCarId = function (item) {\n  if (!item) return '';\n  item = item.row || item;\n  if (!item.carId) return '';\n  item = _getCarMap()[item.carId]; //car\n\n  return item ? item.dueDate : '';\n}; //根据车辆ID，取车辆创建时间\n\n\nLabels.carAtimeByCarId = function (item) {\n  if (!item) return '';\n  item = item.row || item;\n  if (!item.carId) return '';\n  item = _getCarMap()[item.carId]; //car\n\n  return item ? item.atime : '';\n}; //根据车辆ID，取车辆基础扩展值\n\n\nLabels.carBxtByCarId = function (item, col) {\n  if (!item) return '';\n  col = col || item.column;\n  item = item.row || item;\n  if (!item.carId) return '';\n  return Labels.carBxtByCar(_getCarMap()[item.carId], col);\n}; //根据车辆对象，取车辆基础扩展值\n\n\nLabels.carBxtByCar = function (car, col) {\n  return getExtText(car, 'bxts', col.field || col.property);\n}; //根据车辆ID，取车辆扩展值\n\n\nLabels.carExtByCarId = function (item, col) {\n  if (!item) return '';\n  col = col || item.column;\n  item = item.row || item;\n  if (!item.carId) return '';\n  item = _getCarMap()[item.carId]; //car\n\n  return getExtText(item, 'exts', col.field || col.property);\n}; //根据车辆ID，取车辆基础属性值\n\n\nLabels.getBaseAttrByCarId = function (item, col) {\n  if (!item) return '';\n  col = col || item.column;\n  item = item.row || item;\n  if (!item.carId) return '';\n  item = getBaseAttrByCarId(item.carId); //attr\n\n  if (!item) return '';\n  col = item[col.field || col.property]; //value\n\n  if (col == undefined || col === null) return '';\n  return col;\n}; //根据车辆ID获取企业名称\n\n\nLabels.teamExtsByCarId = function (item) {\n  if (!item) return '';\n  item = item.row || item;\n  if (!item.carId) return '';\n  item = _getCarMap()[item.carId]; //car\n\n  item = item ? _getTeamMap()[item.teamId] : null; //team\n\n  var parent = _parent(item);\n\n  var exts = item && item.exts || {};\n\n  if (item && item.exts && typeof item.exts == 'string') {\n    exts = JSON.parse(item.exts);\n  }\n\n  return parent ? parent : exts.sslx == '0' ? item.name : '';\n}; //根据车辆ID，取车辆部标属性\n\n\nLabels.BbAttrByCarId = function (item) {\n  if (!item) return '';\n  item = item.row || item;\n  if (!item.carId) return '';\n  item = getBbAttrByCarId(item.carId);\n  return item ? item : '';\n}; //根据车辆ID，取车辆部标属性中的车籍地\n\n\nLabels.BbCarNativeByCarId = function (item) {\n  if (!item) return '';\n  item = item.row || item;\n  if (!item.carId) return '';\n  item = getBbAttrByCarId(item.carId);\n  return item && item.carNative ? item.carNative.split('|')[1] : '';\n}; //根据车辆ID，取车辆部标属性中的车辆类型\n\n\nLabels.BbCarTypeByCarId = function (item) {\n  if (!item) return '';\n  item = item.row || item;\n  if (!item.carId) return '';\n  item = getBbAttrByCarId(item.carId);\n  return item && item.typeNo && item.typeNo.split('|')[1] ? item.typeNo.split('|')[1] : '';\n}; // tmn ======================================================================================================================================\n//根据终端ID，取SIM卡号\n\n\nLabels.simByTmnId = function (item) {\n  if (!item) return '';\n  item = item.row || item;\n  if (!item.tmnId) return '';\n  item = _getTmnMap()[item.tmnId]; //tmn\n\n  return item ? item.simCard : '';\n}; //根据车辆ID，取SIM卡号\n\n\nLabels.simByCarId = function (item) {\n  if (!item) return '';\n  item = item.row || item;\n  if (!item.carId) return '';\n  item = _getCarMap()[item.carId]; //car\n\n  if (!item || !item.tmnId) return '';\n  item = _getTmnMap()[item.tmnId]; //tmn\n\n  return item ? item.simCard : '';\n}; //根据车辆ID，取终端标识\n\n\nLabels.tmnKeyByCarId = function (item) {\n  if (!item) return '';\n  item = item.row || item;\n  if (!item.carId) return '';\n  item = _getCarMap()[item.carId]; //car\n\n  return item ? item.tmnKey : '';\n}; //根据车辆ID，取终端信息\n\n\nLabels.tmnByCarId = function (item) {\n  if (!item) return '';\n  item = item.row || item;\n  if (!item.carId) return '';\n  item = _getCarMap()[item.carId]; //car\n\n  if (!item || !item.tmnId) return '';\n  item = _getTmnMap()[item.tmnId]; //tmn\n\n  return item ? item : '';\n}; //根据终端ID，取终端号\n\n\nLabels.tmnNoByTmnId = function (item) {\n  if (!item) return '';\n  item = item.row || item;\n  if (!item.tmnId) return '';\n  item = _getTmnMap()[item.tmnId]; //tmn\n\n  return item ? item.tmnNo : '';\n}; //根据车辆ID，取终端号\n\n\nLabels.tmnNoByCarId = function (item) {\n  if (!item) return '';\n  item = item.row || item;\n  if (!item.carId) return '';\n  item = _getCarMap()[item.carId]; //car\n\n  if (!item || !item.tmnId) return '';\n  item = _getTmnMap()[item.tmnId]; //tmn\n\n  return item ? item.tmnNo : '';\n}; //根据车辆ID，取终端的属性\n\n\nLabels.tmnFieldByCarId = function (item, col) {\n  if (!item) return '';\n  item = item.row || item;\n  if (!item.carId) return '';\n  item = _getCarMap()[item.carId]; //car\n\n  if (!item || !item.tmnId) return '';\n  item = _getTmnMap()[item.tmnId]; //tmn\n\n  return item ? item[col.field || col.property] || '' : '';\n}; //多设备状态\n\n\nLabels.multTmnStatesFunction = function (item, col) {\n  if (!item) return '';\n  item = item.row || item;\n  if (!item.multTmnStates) return '';\n  col = [];\n  item.multTmnStates.split('|').forEach(function (str) {\n    //key1#line1(true/false)#time1|key2#line2#time2\n    if (!str) return;\n    str = str.split('#');\n    col.push(str[0] + (str[1] == 'true' ? $_L.get('上线时间') : $_L.get('离线时间')) + str[2]);\n  });\n  return col.join(';');\n}; //根据车辆ID，取终端的扩展属性\n\n\nLabels.tmnExtByCarId = function (item, col) {\n  if (!item) return '';\n  item = item.row || item;\n  if (!item.carId) return '';\n  item = _getCarMap()[item.carId]; //car\n\n  if (!item || !item.tmnId) return '';\n  item = _getTmnMap()[item.tmnId]; //tmn\n\n  return getExtText(item, 'exts', col.field || col.property);\n}; //根据终端对象，取终端扩展值\n\n\nLabels.tmnExtByTmn = function (tmn, col) {\n  return getExtText(tmn, 'exts', col.field || col.property);\n}; // driver ======================================================================================================================================\n//根据driverId，取驾驶员名称\n\n\nLabels.driverByDriverId = function (item) {\n  if (!item) return '';\n  item = item.row || item;\n  if (!item.driverId) return '';\n  var drvNameArr = [];\n  item.driverId.split(\",\").forEach(function (drvId) {\n    var driver = _getDriverMap()[drvId];\n\n    driver && driver.name && drvNameArr.push(driver.name);\n  });\n  return drvNameArr.join(\",\");\n}; //根据车辆ID，取驾驶员名称+手机号\n\n\nLabels.driverNameByCarId = function (item) {\n  var bool = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  if (!item) return '';\n  item = item.row || item;\n  if (!item.carId) return '';\n  item = _getCarMap()[item.carId];\n  if (!item || !item.driverId) return '';\n  var drvNameArr = [];\n  item.driverId.split(\",\").forEach(function (drvId) {\n    var driver = _getDriverMap()[drvId];\n\n    driver && driver.name && drvNameArr.push(driver.phone && bool ? driver.name + '(' + driver.phone.replace(/(\\d{3})(\\d{4})(\\d{4})/, '$1-$2-$3') + ')' : driver.name);\n  });\n  return drvNameArr.join(\",\");\n}; //根据车辆ID，取驾驶员手机号\n\n\nLabels.driverPhoneByCarId = function (item) {\n  if (!item) return '';\n  item = item.row || item;\n  if (!item.carId) return '';\n  item = _getCarMap()[item.carId];\n  if (!item || !item.driverId) return '';\n  var drvPhoneArr = [];\n  item.driverId.split(\",\").forEach(function (drvId) {\n    var driver = _getDriverMap()[drvId];\n\n    driver && driver.phone && drvPhoneArr.push(driver.phone);\n  });\n  return drvPhoneArr.join(\",\");\n}; //根据车辆ID，取驾驶证号\n\n\nLabels.driverLicenseByCarId = function (item) {\n  if (!item) return '';\n  item = item.row || item;\n  if (!item.carId) return '';\n  item = _getCarMap()[item.carId];\n  if (!item || !item.driverId) return '';\n  var drvLicenseArr = [];\n  item.driverId.split(\",\").forEach(function (drvId) {\n    var driver = _getDriverMap()[drvId];\n\n    driver && driver.license && drvLicenseArr.push(driver.license);\n  });\n  return drvLicenseArr.join(\",\");\n}; //根据车辆ID，取驾驶员IC卡号\n\n\nLabels.driverIcCardByCarId = function (item) {\n  if (!item) return '';\n  item = item.row || item;\n  if (!item.carId) return '';\n  item = _getCarMap()[item.carId];\n  if (!item || !item.driverId) return '';\n  var drvIcCardArr = [];\n  item.driverId.split(\",\").forEach(function (drvId) {\n    var driver = _getDriverMap()[drvId];\n\n    driver && driver.icCard && drvIcCardArr.push(driver.icCard);\n  });\n  return drvIcCardArr.join(\",\");\n}; //取登签时间和定位时间差\n\n\nLabels.signLongFunction = function (item) {\n  if (!item) return '';\n  item = item.row || item;\n  if (!item.signTime) return '';\n  var now = getNowDateTime();\n  if (item.signTime > now) return '0' + $_L.get('秒');\n  return apartDateTimeCnDesc(item.signTime, now);\n}; //取登签驾驶员的电话\n\n\nLabels.signPhoneFunction = function (item) {\n  if (!item) return '';\n  item = item.row || item;\n  if (!item.driverSign) return '';\n  item = item.driverSign.match(/\\((.+?)\\)/g); //driverSign   姓名(从业资格证)\n\n  if (!item || item.length == 0) return '';\n  item = item[item.length - 1];\n  item = item.substring(1, item.length - 1); //从业资格证\n\n  if (!item) return '';\n\n  var car = _getCarMap()[item.carId];\n\n  if (car && car.driverId) {\n    //先从绑定的驾驶员上找，命中率高些\n    var drvIds = car.driverId.split(',');\n\n    for (var i = 0; i < drvIds.length; i++) {\n      var driver = _getDriverMap()[drvIds[i]];\n\n      if (driver.license == item) return driver.phone || '';\n    }\n  }\n\n  var drvs = getDrivers().list; //只能全量查找\n\n  for (var _i = 0, len = drvs.length; _i < len; _i++) {\n    if (drvs[_i].license == item) return drvs[_i].phone || '';\n  }\n\n  return '';\n}; //根据驾驶员对象，取驾驶员扩展值\n\n\nLabels.driverExtByDriver = function (drv, col) {\n  return getExtText(drv, 'exts', col.field || col.property);\n}; //gps ======================================================================================================================================\n//里程+米\n\n\nLabels.miterFunction = function (item, col) {\n  if (!item) return '';\n  col = col || item.column;\n  item = item.row || item;\n  item = item[col.field || col.property]; //value\n\n  return isNaN(item) || item === null || item === '' ? '' : item + ' ' + $_L.get('米');\n}; //里程+KM\n\n\nLabels.mileFunction = function (item, col) {\n  if (!item) return '';\n  col = col || item.column;\n  item = item.row || item;\n  item = item[col.field || col.property]; //value\n\n  return isNaN(item) || item === null || item === '' ? '' : Number((Number(item) / 1000).toFixed(2)) + ' km';\n}; //取车辆状态名称\n\n\nLabels.stateFunction = function (item) {\n  if (!item) return '';\n  item = item.row || item;\n  return $_L.get(getCarStateCnMap()[item.state]);\n};\n\nvar sleepMap = null;\n\nfunction getSleepMap() {\n  return sleepMap || (sleepMap = {\n    '01': $_L.get('深度休眠'),\n    '10': $_L.get('休眠'),\n    '11': $_L.get('深度休眠')\n  });\n} //取车辆状态名称\n\n\nLabels.detailFunction = function (item) {\n  if (!item) return '';\n  item = item.row || item;\n  var detail = $_L.get(getCarStateCnMap()[item.state]);\n  if (!detail) return '';\n  detail = detail.split('-');\n\n  if (item.runStopTime && (State.isMove(item.state) || State.isStop(item.state))) {\n    detail[1] += '(' + apartDateTimeCnDesc(item.runStopTime, item.time) + ')';\n  }\n\n  if (item.ioStts && item.ioStts.length > 15) {\n    var sleep = getSleepMap()[item.ioStts.substr(14, 2)];\n    sleep && detail.push(sleep);\n  }\n\n  var alarm = videoAlarmFunction(item);\n  alarm && detail.push(alarm);\n  return detail.join(' / ');\n}; //取视频报警说明\n\n\nvar videoAlarmFunction = function videoAlarmFunction(gps) {\n  var bv0 = Labels.getExtsField(gps, 'bv0');\n  if (bv0 === '' || bv0 === null) return '';\n  bv0 = parseInt(bv0, 16).toString(2); // 32长'111'\n\n  var result = [];\n\n  if (hasFavAlarmType('vsm') && bv0.length > 0 && bv0.charAt(bv0.length - 1) == '1') {\n    //视频信号丢失\n    var bv1 = Labels.getExtsField(gps, 'bv1');\n\n    if (bv1) {\n      bv1 = parseInt(bv1, 16).toString(2);\n      var chns = [];\n\n      for (var len = bv1.length, i = len - 1; i >= 0; i--) {\n        // bit0~bit31分别表示第1~32个逻辑通道\n        bv1.charAt(i) == '1' && chns.push(len - i);\n      }\n\n      chns.length && result.push($_L.get('视频丢失通道') + '(' + chns.join(',') + ')');\n    }\n  }\n\n  if (hasFavAlarmType('vsh') && bv0.length > 1 && bv0.charAt(bv0.length - 2) == '1') {\n    //视频信号遮挡\n    var bv2 = Labels.getExtsField(gps, 'bv2');\n\n    if (bv2) {\n      bv2 = parseInt(bv2, 16).toString(2);\n      var _chns = [];\n\n      for (var _len = bv2.length, _i2 = _len - 1; _i2 >= 0; _i2--) {\n        // bit0~bit31分别表示第1~32个逻辑通道\n        bv2.charAt(_i2) == '1' && _chns.push(_len - _i2);\n      }\n\n      _chns.length && result.push($_L.get('视频遮挡通道') + '(' + _chns.join(',') + ')');\n    }\n  }\n\n  if (hasFavAlarmType('vsb') && bv0.length > 2 && bv0.charAt(bv0.length - 3) == '1') {\n    //存储单元故障\n    var bv3 = Labels.getExtsField(gps, 'bv3');\n\n    if (bv3) {\n      bv3 = parseInt(bv3, 16).toString(2);\n      var z = [],\n          zb = [];\n\n      for (var _i3 = bv3.length - 1, j = 1; _i3 >= 0 && j <= 16; _i3--, j++) {\n        // 主存储器 bit0-bit11(1-12) 灾备存储bit12~bit15(1-4)\n        bv3.charAt(_i3) == '1' && (j <= 12 ? z.push(j) : zb.push(j - 12));\n      }\n\n      z.length && result.push($_L.get('主存储器') + '(' + z.join(',') + ')' + $_L.get('故障'));\n      zb.length && result.push($_L.get('灾备存储器') + '(' + zb.join(',') + ')' + $_L.get('故障'));\n    }\n  }\n\n  if (hasFavAlarmType('vde') && bv0.length > 5 && bv0.charAt(bv0.length - 6) == '1') {\n    //异常驾驶行为  bit0:疲劳 bit1:打电话 bit2:抽烟\n    var bv4 = Labels.getExtsField(gps, 'bv4');\n\n    if (bv4) {\n      bv4 = parseInt(bv4, 16).toString(2);\n\n      if (bv4.length > 0 && bv4.charAt(bv4.length - 1) == '1') {\n        var level = Labels.getExtsField(gps, 'bv5'); //疲劳程度用0~100表示\n\n        level ? result.push($_L.get('疲劳') + '=' + level + '[0~100]') : result.push($_L.get('疲劳'));\n      }\n\n      bv4.length > 1 && bv4.charAt(bv4.length - 2) == '1' && result.push($_L.get('打电话'));\n      bv4.length > 2 && bv4.charAt(bv4.length - 3) == '1' && result.push($_L.get('抽烟'));\n    }\n  }\n\n  return result.length ? result.join(' / ') : null;\n}; //速度+km/h\n\n\nLabels.speedFunction = function (item, col) {\n  if (!item) return '';\n  col = col || item.column;\n  item = item.row || item;\n  col = col.field || col.property;\n  item = item[col]; //speed\n\n  if (isNaN(item) || item === null || item === '') return '';\n\n  if (col == 'maxValue') {\n    return item == '0' ? '' : item + ' km/h';\n  }\n\n  return item + ' km/h';\n}; //取定位类型名称\n\n\nLabels.gpsTypeFunction = function (gps) {\n  if (gps.gpsType == undefined) return '';\n  return gps.gpsType ? getGpsTypeMap()[gps.gpsType] || $_L.get('未知') + ':' + gps.gpsType : $_L.get('无');\n}; //取定位卫星强度\n\n\nLabels.satlFunction = function (gps) {\n  if (gps.satl == undefined) return '';\n  return !gps.satl || gps.satl <= 0 ? $_L.get('无') : gps.satl + '-' + (gps.satl <= 3 ? $_L.get('弱') : gps.satl <= 6 ? $_L.get('中') : $_L.get('强'));\n}; //取定位信号强度\n\n\nLabels.sgnFunction = function (gps) {\n  if (gps.sgn == undefined) return '';\n  return !gps.sgn || gps.sgn <= 0 ? $_L.get('无') : gps.sgn + '-' + (gps.sgn <= 10 ? $_L.get('弱') : gps.sgn <= 20 ? $_L.get('中') : $_L.get('强'));\n};\n\nvar DRCTS = null;\n\nfunction _initDrcts() {\n  !DRCTS && (DRCTS = {\n    pb: $_L.get('偏北'),\n    just: {\n      0: $_L.get('正北'),\n      90: $_L.get('正东'),\n      180: $_L.get('正南'),\n      270: $_L.get('正西')\n    },\n    rangs: [[0, 22.5, $_L.get('偏北')], [22.5, 67.5, $_L.get('东北')], [67.5, 112.5, $_L.get('偏东')], [112.5, 157.5, $_L.get('东南')], [157.5, 202.5, $_L.get('偏南')], [202.5, 247.5, $_L.get('西南')], [247.5, 292.5, $_L.get('偏西')], [292.5, 337.5, $_L.get('西北')]]\n  });\n} //取定位方向名称\n\n\nLabels.drctFunction = function (gps) {\n  if (isNaN(gps.drct)) return '';\n\n  _initDrcts();\n\n  var drct = Math.abs(gps.drct) % 360;\n\n  if (DRCTS.just[drct]) {\n    return DRCTS.just[drct];\n  }\n\n  for (var i = 0, rang; i < 8; i++) {\n    rang = DRCTS.rangs[i];\n\n    if (drct > rang[0] && drct <= rang[1]) {\n      return rang[2];\n    }\n  }\n\n  return DRCTS.pb; //[337.5,360]\n}; //取秒数的可视值 H:M:S\n\n\nLabels.secondFunction = function (item, col) {\n  if (!item) return '';\n  col = col || item.column;\n  item = item.row || item;\n  item = item[col.field || col.property];\n  return isNaN(item) || item === null || item === '' ? '' : secondsToHMS(item);\n}; //取秒数的可视值 X时X分X秒\n\n\nLabels.secondCnFunction = function (item, col) {\n  if (!item) return '';\n  col = col || item.column;\n  item = item.row || item;\n  item = item[col.field || col.property];\n  return isNaN(item) || item === null || item === '' ? '' : secondsToCnDesc(item);\n}; //取有效定位时长 H:M:S\n\n\nLabels.validTimeFunction = function (gps, col) {\n  col = gps[col.field || col.property];\n  return col ? apartToHMS(col, gps.time) : '';\n};\n\nLabels.offlineTimeFunction = function (gps, col) {\n  if (!State.isOffline(gps.state)) return ''; // gps = gps[col.field || col.property];\n\n  gps = gps['onoffLineTime'];\n  return gps ? apartDateTimeCnDesc(gps, getNowDateTime()) : '';\n}; //最近上线时间\n\n\nLabels.onOnlineTimeFunction = function (gps) {\n  if (State.isOffline(gps.state)) return '';\n  return gps['onoffLineTime'] || '';\n}; //最近离线时间\n\n\nLabels.onOfflineTimeFunction = function (gps) {\n  if (!State.isOffline(gps.state)) return '';\n  return gps['onoffLineTime'] || '';\n}; //离线无定位时长\n\n\nLabels.offlineNoLocationTimeFunction = function (gps, col) {\n  if (!State.isOffline(gps.state)) return '';\n  gps = gps['time'];\n  return gps ? apartDateTimeCnDesc(gps, getNowDateTime()) : '';\n}; //取今日里程+km\n\n\nLabels.dayMileFunction = function (gps) {\n  gps = gps.mile - gps.prevDayTotalMile; //today mile\n\n  return isNaN(gps) ? '' : Number(Math.max(0, Number(gps) / 1000).toFixed(2)) + ' km';\n}; //取今日ACC时长 H:M:S\n\n\nLabels.dayAccFunction = function (gps) {\n  gps = gps.totalAcc - gps.prevDayTotalAcc; //today acc\n\n  return isNaN(gps) || gps < 0 ? '' : secondsToHMS(gps);\n}; //取开关状态名称\n\n\nLabels.sttsFunction = function (gps, col) {\n  gps = gps[col.field || col.property];\n  if (!gps) return '';\n  col = col.info;\n\n  if (col.i != undefined && gps.length > col.i) {\n    return col[gps.charAt(col.i)];\n  }\n\n  if (col.t != undefined && gps.length > col.t) {\n    return col[gps.substring(col.f, col.t + 1)];\n  }\n\n  return '';\n}; //取信号线状态名称\n\n\nLabels.sgnSttsFunction = function (gps, col) {\n  var stts = gps[col.field || col.property];\n  if (!stts) return '';\n  var info = col.info;\n\n  if (stts.length <= info.i) {\n    return '';\n  }\n\n  col = stts.charAt(info.i) == '1';\n  info = _getSgnMap(gps.carId)[info.j];\n  col = col ? info[2] || 1 : info[1] || 0;\n  return info[0] ? info[0] + ':' + col : col;\n}; //取定位扩展值\n\n\nLabels.gpsExtFunction = function (gps, col) {\n  var time = gps.time;\n  gps = Labels.getExtsField(gps, col.property);\n\n  if (col.id == \"_srvTime\") {\n    gps = gps.replace(/(\\d{4})(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{2})/, '$1-$2-$3 $4:$5:$6');\n\n    if (time) {\n      var apartTime = apartSeconds(time, gps, false);\n      var tip = $_L.get('提前');\n\n      if (apartTime < 0) {\n        apartTime = Math.abs(apartTime);\n        tip = $_L.get('延时');\n      }\n\n      if (apartTime != 0) {\n        apartTime = secondsToDHMS(apartTime, 'D天H时N分S秒');\n        apartTime.split(\"天\")[0] == 0 && (apartTime = apartTime.substring(2));\n        apartTime.split(\"时\")[0] == 0 && (apartTime = apartTime.substring(2));\n        apartTime.split(\"分\")[0] == 0 && (apartTime = apartTime.substring(2));\n        apartTime = apartTime.split('天').join($_L.get('天'));\n        apartTime = apartTime.split('时').join($_L.get('时'));\n        apartTime = apartTime.split('分').join($_L.get('分'));\n        apartTime = apartTime.split('秒').join($_L.get('秒'));\n        gps = gps + \"(\" + tip + apartTime + \")\";\n      }\n    }\n  }\n\n  var info = col.info;\n  info.x && (gps = Number(gps) * Number(info.x));\n  info.m && (gps = info.m[String(gps)] || gps);\n  info.u && gps !== '' && (gps = gps + info.u);\n  return String(gps);\n}; //取定位扩展传感器值\n\n\nLabels.gpsCgqFunction = function (gps, col) {\n  var v = Labels.getExtsField(gps, col.property) || '';\n\n  if (col.params) {\n    var moni = Labels.getExtsField(gps, col.params) || '';\n    if (moni || moni === 0) return v + ' (' + moni + ')';\n  }\n\n  return v;\n}; //取当前告警名称\n\n\nLabels.alarmTypeFunction = function (gps, col) {\n  gps = gps[col.field || col.property]; //typeIds\n\n  if (!gps || gps.length == 0) return '';\n  var names = [];\n  gps.forEach(function (typeId) {\n    if (hasFavAlarmType(typeId)) {\n      col = getAlarmNames()[typeId]; //name\n\n      col && names.push(col);\n    }\n  });\n  return names.join(',');\n}; //取视频报警说明\n\n\nLabels.videoAlarmFunction = function (gps, col) {\n  col = col.info;\n  var v = Labels.getExtsField(gps, 'bv0');\n  if (v === '' || v === null) return '';\n  v = parseInt(v, 16).toString(2); // 32长'111'\n\n  v = v.length > col.i ? v.charAt(v.length - col.i - 1) : '0';\n  if (v == '0') return $_L.get('正常');\n  if (!col.f) return col[v];\n  v = Labels.getExtsField(gps, col.f);\n  if (v === '' || v === null) return $_L.get('报警');\n  v = parseInt(v, 16).toString(2);\n  if (v === '0') return $_L.get('报警');\n\n  if (col.f == 'bv1' || col.f == 'bv2') {\n    //视频信号丢失  视频信号遮挡\n    col = [];\n\n    for (var len = v.length, i = len - 1; i >= 0; i--) {\n      // bit0~bit31分别表示第1~32个逻辑通道\n      v.charAt(i) == '1' && col.push(len - i);\n    }\n\n    return $_L.get('通道') + col.join(',');\n  }\n\n  if (col.f == 'bv3') {\n    //存储单元故障\n    col = [];\n    var zb = [];\n\n    for (var _i4 = v.length - 1, j = 1; _i4 >= 0 && j <= 16; _i4--, j++) {\n      // 主存储器 bit0-bit11(1-12) 灾备存储bit12~bit15(1-4)\n      v.charAt(_i4) == '1' && (j <= 12 ? col.push(j) : zb.push(j - 12));\n    }\n\n    v = [];\n    col.length && v.push($_L.get('主存储器') + col.join(','));\n    zb.length && v.push($_L.get('灾备存储器') + zb.join(','));\n    return v.join('|') || $_L.get('报警');\n  }\n\n  if (col.f == 'bv4') {\n    //异常驾驶行为  bit0:疲劳 bit1:打电话 bit2:抽烟\n    col = [];\n    v.length > 0 && v.charAt(v.length - 1) == '1' && col.push($_L.get('疲劳'));\n    v.length > 1 && v.charAt(v.length - 2) == '1' && col.push($_L.get('打电话'));\n    v.length > 2 && v.charAt(v.length - 3) == '1' && col.push($_L.get('抽烟'));\n    if (col.length == 0) return '';\n    gps = Labels.getExtsField(gps, 'bv5'); //疲劳程度用0~100表示\n\n    gps && col.push($_L.get('程度') + '=' + gps + '[0~100]');\n    return col.join(',') || $_L.get('报警');\n  }\n\n  return $_L.get('报警');\n};\n\nLabels.getExtsField = function (gps, field) {\n  if (!gps || !gps.exts) return '';\n\n  if (typeof gps.exts == 'string') {\n    if (gps.exts.indexOf('{') != 0) return '';\n    gps.exts = JSON.parse(gps.exts);\n  }\n\n  return gps.exts.hasOwnProperty(field) ? gps.exts[field] : '';\n};",{"version":3,"sources":["D:\\cdRule\\src\\common\\gps\\Labels.js"],"names":["Labels","CARS","TEAMS","getCars","_getCarMap","getTmns","getDrivers","getSgns","item","_getTeamMap","parent","_parent","exts","JSON","_Dataparent","temp","data","pteam","names","col","_getDriverMap","getPlateColorMap","$_L","getExtText","getBaseAttrByCarId","getBbAttrByCarId","_getTmnMap","str","drvNameArr","driver","bool","drvPhoneArr","drvLicenseArr","drvIcCardArr","now","getNowDateTime","apartDateTimeCnDesc","car","drvIds","i","drvs","len","isNaN","Number","getCarStateCnMap","sleepMap","detail","State","sleep","getSleepMap","alarm","videoAlarmFunction","bv0","parseInt","result","hasFavAlarmType","bv1","chns","bv2","bv3","z","zb","j","bv4","level","gps","getGpsTypeMap","DRCTS","pb","just","rangs","_initDrcts","drct","Math","rang","secondsToHMS","secondsToCnDesc","apartToHMS","stts","info","_getSgnMap","time","apartTime","apartSeconds","tip","secondsToDHMS","String","v","moni","getAlarmNames"],"mappings":"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","sourcesContent":["\r\nimport { getCars, State }      from '@/common/cache/CacheTeamCar.js';\r\n// import { getBaseAttrByCarId }  from '@/common/cache/CacheCarAttr.js';\r\n// import { getTmns }             from '@/common/cache/CacheTmn.js';\r\n// import { getDrivers }          from '@/common/cache/CacheDriver.js';\r\n// import { getSgns }             from '@/common/cache/CacheSgn.js';\r\nimport { hasFavAlarmType }     from '@/common/cache/CacheAlarm.js';\r\nimport { getAlarmNames }       from '@/common/cache/CacheAlarm.js';\r\nimport { getPlateColorMap }    from '@/common/Vars.js';\r\nimport { getCarStateCnMap }    from '@/common/Vars.js';\r\nimport { getGpsTypeMap }       from '@/common/Vars.js';\r\nimport { secondsToHMS }        from '@/common/util/Dates.js';\r\nimport { secondsToCnDesc }     from '@/common/util/Dates.js';\r\nimport { apartToHMS }          from '@/common/util/Dates.js';\r\nimport { apartDateTimeCnDesc } from '@/common/util/Dates.js';\r\nimport { getNowDateTime }      from '@/common/util/Dates.js';\r\nimport { apartSeconds }        from '@/common/util/Dates.js';\r\nimport { secondsToDHMS }       from '@/common/util/Dates.js';\r\nimport { getExtText }          from '@/components/util/Widget.js';\r\n// import { getBbAttrByCarId }    from '@/common/cache/CacheCarAttr.js';\r\n\r\n\r\nlet Labels = {};\r\nexport default Labels;\r\n\r\n// private ======================================================================================================================================\r\n\r\nfunction _getCarMap() {\r\n    if (Labels._CARS) return Labels._CARS.map;\r\n    let [CARS,TEAMS] = getCars();\r\n    Labels._CARS = CARS;\r\n    Labels._TEAMS = TEAMS;\r\n    return Labels._CARS.map;\r\n}\r\nfunction _getTeamMap() {\r\n    !Labels._TEAMS && _getCarMap();\r\n    return Labels._TEAMS.map;\r\n}\r\nfunction _getTmnMap() {\r\n    if (Labels._TMNS) return Labels._TMNS.map;\r\n    Labels._TMNS = getTmns();\r\n    return Labels._TMNS.map;\r\n}\r\nfunction _getDriverMap() {\r\n    if (Labels._DRIVERS) return Labels._DRIVERS.map;\r\n    Labels._DRIVERS = getDrivers();\r\n    return Labels._DRIVERS.map;\r\n}\r\nfunction _getSgnMap(carId) {\r\n    if (Labels._SGNS) return Labels._SGNS.map[carId] || Labels._SGNS.defs;\r\n    Labels._SGNS = getSgns();\r\n    return Labels._SGNS.map[carId] || Labels._SGNS.defs;\r\n}\r\n\r\n// team ======================================================================================================================================\r\n//根据车队ID，取车队名称\r\nLabels.teamNameByTeamId = function (item) {\r\n    if (!item) return '';\r\n    item = item.row || item;\r\n    if (!item.teamId) return '';\r\n    item = _getTeamMap()[item.teamId];//team\r\n    return item ? item.name : '';\r\n}\r\n\r\n//根据车队ID，取车队扩展属性\r\nLabels.teamExtsByTeamId = function (item) {\r\n    if (!item) return '';\r\n    item = item.row || item;\r\n    if (!item.teamId) return '';\r\n    item = _getTeamMap()[item.teamId];\r\n    let parent = _parent(item)\r\n    let exts = (item && item.exts)||{}\r\n    if(item && item.exts && typeof(item.exts)=='string'){\r\n        exts = JSON.parse(item.exts);\r\n    }\r\n    return parent ?  parent: exts.sslx=='0'?item.name:'';\r\n}\r\n\r\nfunction _parent (data) {\r\n    var temp;\r\n    if(data){\r\n        var _Dataparent = function(item){\r\n            if(item.parent){\r\n                _Dataparent(item.parent)\r\n                let exts=(item&&item.exts)||{}\r\n                if(item&&item.exts&&typeof(item.exts)=='string'){exts = JSON.parse(item.exts);}\r\n                if(exts.sslx=='0'){temp=item.name;}\r\n            }\r\n        }\r\n        _Dataparent(data.parent)\r\n    }\r\n    return temp;\r\n}\r\n\r\n//根据车辆ID，取车队名称\r\nLabels.teamNameByCarId = function (item) {\r\n    if (!item) return '';\r\n    item = item.row || item;\r\n    if (!item.carId) return '';\r\n    item = _getCarMap()[item.carId];//car\r\n    item = item ? _getTeamMap()[item.teamId] : null;//team\r\n    return item ? item.name : '';\r\n}\r\n\r\n//根据车辆ID，取顶层车队名称\r\nLabels.rootTeamByCarId = function (item) {\r\n    if (!item) return '';\r\n    item = item.row || item;\r\n    if (!item.carId) return '';\r\n    item = _getCarMap()[item.carId];//car\r\n    item = item ? _getTeamMap()[item.teamId] : null;//team\r\n    if (!item) return '';\r\n    let pteam;\r\n    while (item.pid != '0') {\r\n        pteam = _getTeamMap()[item.pid];//pteam\r\n        if (!pteam || item == pteam) return item.name;\r\n        item = pteam;\r\n    }\r\n    return item.name;\r\n}\r\n\r\nLabels.allTeamByCarId = function (item) {\r\n    if (!item) return '';\r\n    item = item.row || item;\r\n    if (!item.carId) return '';\r\n    item = _getCarMap()[item.carId];//car\r\n    item = item ? _getTeamMap()[item.teamId] : null;//team\r\n    if (!item) return '';\r\n    let names = [item.name], pteam;\r\n    while (item.pid != '0') {\r\n        pteam = _getTeamMap()[item.pid];//pteam\r\n        if (!pteam || item == pteam) return names.reverse().join(' > ');\r\n        item = pteam;\r\n        names.push(item.name);\r\n    }\r\n    return names.reverse().join(' > ');\r\n}\r\n\r\n//根据驾驶员ID，取车队名称\r\nLabels.teamNameByDrvId = function (item, col) {\r\n    col = col || item.column;\r\n    item = item.row || item;\r\n    col = col ? (col.field || col.property) : 'id';//field\r\n    item = _getDriverMap()[item[col]];//driver\r\n    item = item ? _getTeamMap()[item.teamId] : null;//team\r\n    return item ? item.name : '';\r\n}\r\n\r\n// car ======================================================================================================================================\r\n\r\n//根据车辆ID，取车辆名称\r\nLabels.carNameByCarId = function (item) {\r\n    if (!item) return '';\r\n    item = item.row || item;\r\n    if (!item.carId) return '';\r\n    item = _getCarMap()[item.carId];//car\r\n    return item ? item.name : '';\r\n}\r\n\r\n//根据车辆ID，取车牌号\r\nLabels.plateByCarId = function (item) {\r\n    if (!item) return '';\r\n    item = item.row || item;\r\n    if (!item.carId) return '';\r\n    item = _getCarMap()[item.carId];//car\r\n    return item ? item.plate : '';\r\n}\r\n\r\n//根据车辆ID，取颜色\r\nLabels.plateByCarColor = function (item) {\r\n    if (!item) return '';\r\n    item = item.row || item;\r\n    if (!item.carId) return '';\r\n    item = _getCarMap()[item.carId];//car\r\n    return item ? item.plateColor : '';\r\n}\r\n\r\n//根据车牌颜色，取车牌颜色名称\r\nLabels.plateColor = function (item) {\r\n    if (!item) return '';\r\n    item = item.row || item;\r\n    if (!item.plateColor) return '';\r\n    return getPlateColorMap()[item.plateColor] || $_L.get('未知');\r\n}\r\n//根据车辆ID，取车牌颜色名称\r\nLabels.plateByCarColorName = function (item) {\r\n    item = item.row || item;\r\n    item = _getCarMap()[item.carId];//car\r\n    return getPlateColorMap()[item.plateColor] || $_L.get('未知');\r\n}\r\n//根据车辆ID，取车主名称\r\nLabels.ownerByCarId = function (item) {\r\n    if (!item) return '';\r\n    item = item.row || item;\r\n    if (!item.carId) return '';\r\n    item = _getCarMap()[item.carId];//car\r\n    return item ? item.owner||'' : '';\r\n}\r\n//根据车辆ID，取车主电话\r\nLabels.ownerPhoneByCarId = function (item) {\r\n    if (!item) return '';\r\n    item = item.row || item;\r\n    if (!item.carId) return '';\r\n    item = _getCarMap()[item.carId];//car\r\n    return item ? item.ownerPhone||'' : '';\r\n}\r\n\r\n//根据车辆ID，取车辆说明\r\nLabels.carDesByCarId = function (item) {\r\n    if (!item) return '';\r\n    item = item.row || item;\r\n    if (!item.carId) return '';\r\n    item = _getCarMap()[item.carId];//car\r\n    return item ? item.des : '';\r\n}\r\n\r\n//根据车辆ID，取车辆说明2\r\nLabels.carDes2ByCarId = function (item) {\r\n    if (!item) return '';\r\n    item = item.row || item;\r\n    if (!item.carId) return '';\r\n    item = _getCarMap()[item.carId];//car\r\n    return item ? item.des2 : '';\r\n}\r\n\r\n//根据车辆ID，取车辆欠费日期\r\nLabels.carDueDateByCarId = function (item) {\r\n    if (!item) return '';\r\n    item = item.row || item;\r\n    if (!item.carId) return '';\r\n    item = _getCarMap()[item.carId];//car\r\n    return item ? item.dueDate : '';\r\n}\r\n\r\n//根据车辆ID，取车辆创建时间\r\nLabels.carAtimeByCarId = function (item) {\r\n    if (!item) return '';\r\n    item = item.row || item;\r\n    if (!item.carId) return '';\r\n    item = _getCarMap()[item.carId];//car\r\n    return item ? item.atime : '';\r\n}\r\n\r\n//根据车辆ID，取车辆基础扩展值\r\nLabels.carBxtByCarId = function (item, col) {\r\n    if (!item) return '';\r\n    col = col || item.column;\r\n    item = item.row || item;\r\n    if (!item.carId) return '';\r\n    return Labels.carBxtByCar(_getCarMap()[item.carId], col);\r\n}\r\n\r\n//根据车辆对象，取车辆基础扩展值\r\nLabels.carBxtByCar = function (car, col) {\r\n    return getExtText(car, 'bxts', col.field || col.property);\r\n}\r\n\r\n//根据车辆ID，取车辆扩展值\r\nLabels.carExtByCarId = function (item, col) {\r\n    if (!item) return '';\r\n    col = col || item.column;\r\n    item = item.row || item;\r\n    if (!item.carId) return '';\r\n    item = _getCarMap()[item.carId];//car\r\n    return getExtText(item, 'exts', col.field || col.property);\r\n}\r\n\r\n//根据车辆ID，取车辆基础属性值\r\nLabels.getBaseAttrByCarId = function (item, col) {\r\n    if (!item) return '';\r\n    col = col || item.column;\r\n    item = item.row || item;\r\n    if (!item.carId) return '';\r\n    item = getBaseAttrByCarId(item.carId);//attr\r\n    if (!item) return '';\r\n    col = item[col.field || col.property];//value\r\n    if (col == undefined || col === null) return '';\r\n    return col;\r\n}\r\n\r\n//根据车辆ID获取企业名称\r\nLabels.teamExtsByCarId = function (item) {\r\n    if (!item) return '';\r\n    item = item.row || item;\r\n    if (!item.carId) return '';\r\n    item = _getCarMap()[item.carId];//car\r\n    item = item ? _getTeamMap()[item.teamId] : null;//team\r\n    let parent = _parent(item);\r\n    let exts=(item&&item.exts)||{};\r\n    if(item&&item.exts&&typeof(item.exts)=='string'){\r\n        exts = JSON.parse(item.exts);\r\n    }\r\n    return parent ?  parent: exts.sslx=='0'?item.name:'';\r\n}\r\n\r\n//根据车辆ID，取车辆部标属性\r\nLabels.BbAttrByCarId = function (item) {\r\n    if (!item) return '';\r\n    item = item.row || item;\r\n    if (!item.carId) return '';\r\n    item=getBbAttrByCarId(item.carId)\r\n    return item ? item: '';\r\n}\r\n//根据车辆ID，取车辆部标属性中的车籍地\r\nLabels.BbCarNativeByCarId = function (item) {\r\n    if (!item) return '';\r\n    item = item.row || item;\r\n    if (!item.carId) return '';\r\n    item=getBbAttrByCarId(item.carId);\r\n    return item&&item.carNative ? item.carNative.split('|')[1]: '';\r\n}\r\n//根据车辆ID，取车辆部标属性中的车辆类型\r\nLabels.BbCarTypeByCarId = function (item) {\r\n    if (!item) return '';\r\n    item = item.row || item;\r\n    if (!item.carId) return '';\r\n    item=getBbAttrByCarId(item.carId);\r\n    return item&&item.typeNo&&item.typeNo.split('|')[1] ? item.typeNo.split('|')[1]: '';\r\n}\r\n\r\n// tmn ======================================================================================================================================\r\n\r\n//根据终端ID，取SIM卡号\r\nLabels.simByTmnId = function (item) {\r\n    if (!item) return '';\r\n    item = item.row || item;\r\n    if (!item.tmnId) return '';\r\n    item = _getTmnMap()[item.tmnId];//tmn\r\n    return item ? item.simCard : '';\r\n}\r\n\r\n//根据车辆ID，取SIM卡号\r\nLabels.simByCarId = function (item) {\r\n    if (!item) return '';\r\n    item = item.row || item;\r\n    if (!item.carId) return '';\r\n    item = _getCarMap()[item.carId];//car\r\n    if (!item || !item.tmnId) return '';\r\n    item = _getTmnMap()[item.tmnId];//tmn\r\n    return item ? item.simCard : '';\r\n}\r\n\r\n//根据车辆ID，取终端标识\r\nLabels.tmnKeyByCarId = function (item) {\r\n    if (!item) return '';\r\n    item = item.row || item;\r\n    if (!item.carId) return '';\r\n    item = _getCarMap()[item.carId];//car\r\n    return item ? item.tmnKey : '';\r\n}\r\n//根据车辆ID，取终端信息\r\nLabels.tmnByCarId = function (item) {\r\n    if (!item) return '';\r\n    item = item.row || item;\r\n    if (!item.carId) return '';\r\n    item = _getCarMap()[item.carId];//car\r\n    if (!item || !item.tmnId) return '';\r\n    item = _getTmnMap()[item.tmnId];//tmn\r\n    return item ? item : '';\r\n}\r\n\r\n//根据终端ID，取终端号\r\nLabels.tmnNoByTmnId = function (item) {\r\n    if (!item) return '';\r\n    item = item.row || item;\r\n    if (!item.tmnId) return '';\r\n    item = _getTmnMap()[item.tmnId];//tmn\r\n    return item ? item.tmnNo : '';\r\n}\r\n\r\n//根据车辆ID，取终端号\r\nLabels.tmnNoByCarId = function (item) {\r\n    if (!item) return '';\r\n    item = item.row || item;\r\n    if (!item.carId) return '';\r\n    item = _getCarMap()[item.carId];//car\r\n    if (!item || !item.tmnId) return '';\r\n    item = _getTmnMap()[item.tmnId];//tmn\r\n    return item ? item.tmnNo : '';\r\n}\r\n\r\n//根据车辆ID，取终端的属性\r\nLabels.tmnFieldByCarId = function (item, col) {\r\n    if (!item) return '';\r\n    item = item.row || item;\r\n    if (!item.carId) return '';\r\n    item = _getCarMap()[item.carId];//car\r\n    if (!item || !item.tmnId) return '';\r\n    item = _getTmnMap()[item.tmnId];//tmn\r\n    return item ? (item[col.field || col.property]) || '' : '';\r\n}\r\n\r\n//多设备状态\r\nLabels.multTmnStatesFunction = function (item, col) {\r\n    if (!item) return '';\r\n    item = item.row || item;\r\n    if (!item.multTmnStates) return '';\r\n    col = [];\r\n    item.multTmnStates.split('|').forEach(str => {//key1#line1(true/false)#time1|key2#line2#time2\r\n        if (!str) return;\r\n        str = str.split('#');\r\n        col.push(str[0] + (str[1]=='true'?$_L.get('上线时间'):$_L.get('离线时间')) + str[2]);\r\n    });\r\n    return col.join(';');\r\n}\r\n\r\n//根据车辆ID，取终端的扩展属性\r\nLabels.tmnExtByCarId = function (item, col) {\r\n    if (!item) return '';\r\n    item = item.row || item;\r\n    if (!item.carId) return '';\r\n    item = _getCarMap()[item.carId];//car\r\n    if (!item || !item.tmnId) return '';\r\n    item = _getTmnMap()[item.tmnId];//tmn\r\n    return getExtText(item, 'exts', col.field || col.property);\r\n}\r\n\r\n//根据终端对象，取终端扩展值\r\nLabels.tmnExtByTmn = function (tmn, col) {\r\n    return getExtText(tmn, 'exts', col.field || col.property);\r\n}\r\n\r\n// driver ======================================================================================================================================\r\n\r\n//根据driverId，取驾驶员名称\r\nLabels.driverByDriverId = function (item) {\r\n    if (!item) return '';\r\n    item = item.row || item;\r\n    if (!item.driverId) return '';\r\n    let drvNameArr = [];\r\n    item.driverId.split(\",\").forEach(drvId => {\r\n        let driver = _getDriverMap()[drvId];\r\n        driver && driver.name && drvNameArr.push(driver.name);\r\n    });\r\n    return drvNameArr.join(\",\");\r\n}\r\n\r\n//根据车辆ID，取驾驶员名称+手机号\r\nLabels.driverNameByCarId = function (item,bool=true) {\r\n    if (!item) return '';\r\n    item = item.row || item;\r\n    if (!item.carId) return '';\r\n    item = _getCarMap()[item.carId];\r\n    if (!item || !item.driverId) return '';\r\n    let drvNameArr = [];\r\n    item.driverId.split(\",\").forEach(drvId => {\r\n        let driver = _getDriverMap()[drvId];\r\n        driver && driver.name && drvNameArr.push(driver.phone&&bool ? (driver.name + '('+ driver.phone.replace(/(\\d{3})(\\d{4})(\\d{4})/,'$1-$2-$3')+')') : driver.name);\r\n    });\r\n    return drvNameArr.join(\",\");\r\n}\r\n\r\n//根据车辆ID，取驾驶员手机号\r\nLabels.driverPhoneByCarId = function (item) {\r\n    if (!item) return '';\r\n    item = item.row || item;\r\n    if (!item.carId) return '';\r\n    item = _getCarMap()[item.carId];\r\n    if (!item || !item.driverId) return '';\r\n    let drvPhoneArr = [];\r\n    item.driverId.split(\",\").forEach(drvId => {\r\n        let driver = _getDriverMap()[drvId];\r\n        driver && driver.phone && drvPhoneArr.push(driver.phone);\r\n    });\r\n    return drvPhoneArr.join(\",\");\r\n}\r\n\r\n//根据车辆ID，取驾驶证号\r\nLabels.driverLicenseByCarId = function (item) {\r\n    if (!item) return '';\r\n    item = item.row || item;\r\n    if (!item.carId) return '';\r\n    item = _getCarMap()[item.carId];\r\n    if (!item || !item.driverId) return '';\r\n    let drvLicenseArr = [];\r\n    item.driverId.split(\",\").forEach(drvId => {\r\n        let driver = _getDriverMap()[drvId];\r\n        driver && driver.license && drvLicenseArr.push(driver.license);\r\n    });\r\n    return drvLicenseArr.join(\",\");\r\n}\r\n\r\n//根据车辆ID，取驾驶员IC卡号\r\nLabels.driverIcCardByCarId = function (item) {\r\n    if (!item) return '';\r\n    item = item.row || item;\r\n    if (!item.carId) return '';\r\n    item = _getCarMap()[item.carId];\r\n    if (!item || !item.driverId) return '';\r\n    let drvIcCardArr = [];\r\n    item.driverId.split(\",\").forEach(drvId => {\r\n        let driver = _getDriverMap()[drvId];\r\n        driver && driver.icCard && drvIcCardArr.push(driver.icCard);\r\n    });\r\n    return drvIcCardArr.join(\",\");\r\n}\r\n\r\n//取登签时间和定位时间差\r\nLabels.signLongFunction = function(item) {\r\n    if (!item) return '';\r\n    item = item.row || item;\r\n    if (!item.signTime) return'';\r\n    let now = getNowDateTime();\r\n    if (item.signTime > now) return '0'+$_L.get('秒');\r\n    return apartDateTimeCnDesc(item.signTime, now);\r\n}\r\n\r\n//取登签驾驶员的电话\r\nLabels.signPhoneFunction = function(item) {\r\n    if (!item) return '';\r\n    item = item.row || item;\r\n    if (!item.driverSign) return'';\r\n    item = item.driverSign.match(/\\((.+?)\\)/g); //driverSign   姓名(从业资格证)\r\n    if (!item || item.length == 0) return '';\r\n    item = item[item.length-1];\r\n    item = item.substring(1,item.length-1);//从业资格证\r\n    if (!item) return '';\r\n    let car = _getCarMap()[item.carId];\r\n    if (car && car.driverId) {//先从绑定的驾驶员上找，命中率高些\r\n        let drvIds = car.driverId.split(',');\r\n        for (let i=0; i<drvIds.length; i++) {\r\n            let driver = _getDriverMap()[drvIds[i]];\r\n            if (driver.license == item) return driver.phone || '';\r\n        }\r\n    }\r\n    let drvs = getDrivers().list;//只能全量查找\r\n    for (let i=0,len=drvs.length; i<len; i++) {\r\n        if (drvs[i].license == item) return drvs[i].phone || '';\r\n    }\r\n    return '';\r\n}\r\n\r\n//根据驾驶员对象，取驾驶员扩展值\r\nLabels.driverExtByDriver = function (drv, col) {\r\n    return getExtText(drv, 'exts', col.field || col.property);\r\n}\r\n\r\n//gps ======================================================================================================================================\r\n\r\n//里程+米\r\nLabels.miterFunction = function (item, col) {\r\n    if (!item) return '';\r\n    col = col || item.column;\r\n    item = item.row || item;\r\n    item = item[col.field||col.property];//value\r\n    return (isNaN(item)||item===null||item==='') ? '' : (item+' '+$_L.get('米'));\r\n}\r\n\r\n//里程+KM\r\nLabels.mileFunction = function (item, col) {\r\n    if (!item) return '';\r\n    col = col || item.column;\r\n    item = item.row || item;\r\n    item = item[col.field||col.property];//value\r\n    return (isNaN(item)||item===null||item==='') ? '' : (Number((Number(item)/1000).toFixed(2))+' km');\r\n}\r\n\r\n//取车辆状态名称\r\nLabels.stateFunction = function (item) {\r\n    if (!item) return '';\r\n    item = item.row || item;\r\n    return $_L.get(getCarStateCnMap()[item.state]);\r\n}\r\n\r\nlet sleepMap = null;\r\nfunction getSleepMap() {\r\n    return sleepMap || (sleepMap = {'01':$_L.get('深度休眠'),'10':$_L.get('休眠'),'11':$_L.get('深度休眠')});\r\n}\r\n\r\n//取车辆状态名称\r\nLabels.detailFunction = function (item) {\r\n    if (!item) return '';\r\n    item = item.row || item;\r\n    let detail = $_L.get(getCarStateCnMap()[item.state]);\r\n    if (!detail) return '';\r\n    detail = detail.split('-');\r\n    if (item.runStopTime && (State.isMove(item.state) || State.isStop(item.state))) {\r\n        detail[1] += '('+apartDateTimeCnDesc(item.runStopTime, item.time)+')';\r\n    }\r\n    if (item.ioStts && item.ioStts.length > 15) {\r\n        let sleep = getSleepMap()[item.ioStts.substr(14,2)];\r\n        sleep && detail.push(sleep);\r\n    }\r\n    let alarm = videoAlarmFunction(item);\r\n    alarm && detail.push(alarm);\r\n    return detail.join(' / ');\r\n}\r\n\r\n//取视频报警说明\r\nlet videoAlarmFunction = function(gps) {\r\n    let bv0 = Labels.getExtsField(gps, 'bv0');\r\n    if (bv0 === '' || bv0 === null) return '';\r\n    bv0 = parseInt(bv0, 16).toString(2);// 32长'111'\r\n    \r\n    let result = [];\r\n    if (hasFavAlarmType('vsm') && bv0.length>0 && bv0.charAt(bv0.length - 1) == '1') {//视频信号丢失\r\n        let bv1 = Labels.getExtsField(gps, 'bv1');\r\n        if (bv1) {\r\n            bv1 = parseInt(bv1, 16).toString(2);\r\n            let chns = [];\r\n            for (let len=bv1.length, i=len-1; i>=0; i--) {// bit0~bit31分别表示第1~32个逻辑通道\r\n                bv1.charAt(i) == '1' && chns.push(len-i);\r\n            }\r\n            chns.length && result.push($_L.get('视频丢失通道') + '(' + chns.join(',')+')');\r\n        }\r\n    }\r\n    if (hasFavAlarmType('vsh') && bv0.length>1 && bv0.charAt(bv0.length - 2) == '1') {//视频信号遮挡\r\n        let bv2 = Labels.getExtsField(gps, 'bv2');\r\n        if (bv2) {\r\n            bv2 = parseInt(bv2, 16).toString(2);\r\n            let chns = [];\r\n            for (let len=bv2.length, i=len-1; i>=0; i--) {// bit0~bit31分别表示第1~32个逻辑通道\r\n                bv2.charAt(i) == '1' && chns.push(len-i);\r\n            }\r\n            chns.length && result.push($_L.get('视频遮挡通道') + '(' + chns.join(',')+')');\r\n        }\r\n    }\r\n    if (hasFavAlarmType('vsb') && bv0.length>2 && bv0.charAt(bv0.length - 3) == '1') {//存储单元故障\r\n        let bv3 = Labels.getExtsField(gps, 'bv3');\r\n        if (bv3) {\r\n            bv3 = parseInt(bv3, 16).toString(2);\r\n            let z = [],zb = [];\r\n            for (let i=bv3.length-1, j=1; i>=0 && j<=16; i--,j++) {// 主存储器 bit0-bit11(1-12) 灾备存储bit12~bit15(1-4)\r\n                bv3.charAt(i) == '1' && (j <= 12 ? z.push(j) : zb.push(j-12));\r\n            }\r\n            z.length && result.push($_L.get('主存储器') + '(' + z.join(',') + ')' + $_L.get('故障'));\r\n            zb.length && result.push($_L.get('灾备存储器') + '(' + zb.join(',') + ')' + $_L.get('故障'));\r\n        }\r\n    }\r\n    if (hasFavAlarmType('vde') && bv0.length>5 && bv0.charAt(bv0.length - 6) == '1') {//异常驾驶行为  bit0:疲劳 bit1:打电话 bit2:抽烟\r\n        let bv4 = Labels.getExtsField(gps, 'bv4');\r\n        if (bv4) {\r\n            bv4 = parseInt(bv4, 16).toString(2);\r\n            if (bv4.length > 0 && bv4.charAt(bv4.length - 1) == '1') {\r\n                let level = Labels.getExtsField(gps, 'bv5');//疲劳程度用0~100表示\r\n                level ? result.push($_L.get('疲劳')+'='+level+'[0~100]') : result.push($_L.get('疲劳'));\r\n            } \r\n            bv4.length > 1 && bv4.charAt(bv4.length - 2) == '1' && result.push($_L.get('打电话'));\r\n            bv4.length > 2 && bv4.charAt(bv4.length - 3) == '1' && result.push($_L.get('抽烟'));\r\n        }\r\n    }\r\n    return result.length ? result.join(' / ') : null;\r\n}\r\n\r\n\r\n//速度+km/h\r\nLabels.speedFunction = function (item, col) {\r\n    if (!item) return '';\r\n    col = col || item.column;\r\n    item = item.row || item;\r\n    col = col.field||col.property\r\n    item = item[col];//speed\r\n    if (isNaN(item) || item === null || item === '') return '';\r\n    if (col == 'maxValue') {\r\n        return item=='0' ? '' : (item+' km/h');\r\n    }\r\n    return item +' km/h';\r\n}\r\n\r\n//取定位类型名称\r\nLabels.gpsTypeFunction = function (gps) {\r\n    if (gps.gpsType == undefined) return '';\r\n    return gps.gpsType ? (getGpsTypeMap()[gps.gpsType] || $_L.get('未知')+':'+gps.gpsType) : $_L.get('无');\r\n}\r\n\r\n//取定位卫星强度\r\nLabels.satlFunction = function (gps) {\r\n    if (gps.satl == undefined) return '';\r\n    return (!gps.satl || gps.satl<=0) ? $_L.get('无') : (gps.satl+'-'+(gps.satl<=3 ? $_L.get('弱') : (gps.satl<=6 ? $_L.get('中') : $_L.get('强'))));\r\n}\r\n\r\n//取定位信号强度\r\nLabels.sgnFunction = function (gps) {\r\n    if (gps.sgn == undefined) return '';\r\n    return (!gps.sgn || gps.sgn<=0) ? $_L.get('无') : (gps.sgn+'-'+(gps.sgn<=10 ? $_L.get('弱') : (gps.sgn<=20 ? $_L.get('中') : $_L.get('强'))));\r\n}\r\n\r\nlet DRCTS = null;\r\nfunction _initDrcts() {\r\n    !DRCTS && (DRCTS = {\r\n        pb: $_L.get('偏北'),\r\n        just: {0:$_L.get('正北'), 90:$_L.get('正东'), 180:$_L.get('正南'), 270:$_L.get('正西')},\r\n        rangs: [[0,22.5,$_L.get('偏北')], [22.5,67.5,$_L.get('东北')], [67.5,112.5,$_L.get('偏东')], [112.5,157.5,$_L.get('东南')], [157.5,202.5,$_L.get('偏南')], [202.5,247.5,$_L.get('西南')], [247.5,292.5,$_L.get('偏西')], [292.5,337.5,$_L.get('西北')]]\r\n    });\r\n}\r\n\r\n//取定位方向名称\r\nLabels.drctFunction = function (gps) {\r\n    if (isNaN(gps.drct)) return '';\r\n    _initDrcts();\r\n    let drct = Math.abs(gps.drct) % 360;\r\n    if (DRCTS.just[drct]) {\r\n        return DRCTS.just[drct];\r\n    }\r\n    for (let i=0, rang; i<8; i++) {\r\n        rang = DRCTS.rangs[i];\r\n        if (drct > rang[0] && drct <= rang[1]) {\r\n            return rang[2];\r\n        }\r\n    }\r\n    return DRCTS.pb;//[337.5,360]\r\n}\r\n\r\n//取秒数的可视值 H:M:S\r\nLabels.secondFunction = function (item, col) {\r\n    if (!item) return '';\r\n    col = col || item.column;\r\n    item = item.row || item;\r\n    item = item[col.field || col.property];\r\n    return (isNaN(item)||item===null||item==='') ? '' : secondsToHMS(item);\r\n}\r\n\r\n//取秒数的可视值 X时X分X秒\r\nLabels.secondCnFunction = function (item, col) {\r\n    if (!item) return '';\r\n    col = col || item.column;\r\n    item = item.row || item;\r\n    item = item[col.field || col.property];\r\n    return (isNaN(item)||item===null||item==='') ? '' : secondsToCnDesc(item);\r\n}\r\n\r\n//取有效定位时长 H:M:S\r\nLabels.validTimeFunction = function (gps, col) {\r\n    col = gps[col.field || col.property];\r\n    return col ? apartToHMS(col, gps.time) : '';\r\n}\r\nLabels.offlineTimeFunction=function(gps, col) {\r\n    if (!State.isOffline(gps.state)) return '';\r\n    // gps = gps[col.field || col.property];\r\n    gps = gps['onoffLineTime']\r\n    return gps ? apartDateTimeCnDesc(gps, getNowDateTime()) : '';    \r\n}\r\n//最近上线时间\r\nLabels.onOnlineTimeFunction = function(gps){\r\n    if (State.isOffline(gps.state)) return '';\r\n    return gps['onoffLineTime'] || ''  \r\n}\r\n//最近离线时间\r\nLabels.onOfflineTimeFunction = function(gps){\r\n    if (!State.isOffline(gps.state)) return '';\r\n    return gps['onoffLineTime'] || ''  \r\n}\r\n//离线无定位时长\r\nLabels.offlineNoLocationTimeFunction = function(gps,col){\r\n    if (!State.isOffline(gps.state)) return '';\r\n    gps = gps['time'];\r\n    return gps ? apartDateTimeCnDesc(gps, getNowDateTime()) : '';   \r\n}\r\n\r\n//取今日里程+km\r\nLabels.dayMileFunction = function (gps) {\r\n    gps = gps.mile - gps.prevDayTotalMile;//today mile\r\n    return isNaN(gps) ? '' : (Number((Math.max(0,Number(gps)/1000)).toFixed(2))+' km');\r\n}\r\n\r\n//取今日ACC时长 H:M:S\r\nLabels.dayAccFunction = function (gps) {\r\n    gps = gps.totalAcc - gps.prevDayTotalAcc;//today acc\r\n    return (isNaN(gps) || gps<0) ? '' : secondsToHMS(gps);\r\n}\r\n\r\n//取开关状态名称\r\nLabels.sttsFunction = function (gps, col) {\r\n    gps = gps[col.field || col.property];\r\n    if (!gps) return '';\r\n    col = col.info;\r\n    if (col.i != undefined && gps.length > col.i) {\r\n        return col[gps.charAt(col.i)];\r\n    }\r\n    if (col.t != undefined && gps.length > col.t) {\r\n        return col[gps.substring(col.f, col.t+1)];\r\n    }\r\n    return '';\r\n}\r\n\r\n//取信号线状态名称\r\nLabels.sgnSttsFunction = function (gps, col) {\r\n    let stts = gps[col.field || col.property];\r\n    if (!stts) return '';\r\n    let info = col.info;\r\n    if (stts.length <= info.i) {\r\n        return '';\r\n    }\r\n    col = stts.charAt(info.i) == '1';\r\n    info = _getSgnMap(gps.carId)[info.j];\r\n    col = col ? (info[2]||1) : (info[1]||0);\r\n    return info[0] ? (info[0]+':'+col) : col;\r\n}\r\n\r\n//取定位扩展值\r\nLabels.gpsExtFunction = function (gps, col) {\r\n  let time = gps.time;\r\n  gps = Labels.getExtsField(gps, col.property);\r\n  if (col.id == \"_srvTime\") {\r\n        gps = gps.replace(/(\\d{4})(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{2})/,'$1-$2-$3 $4:$5:$6');\r\n        if (time) {\r\n            let apartTime = apartSeconds(time, gps, false);\r\n            let tip = $_L.get('提前');\r\n            if (apartTime < 0) {\r\n                apartTime = Math.abs(apartTime);\r\n                tip = $_L.get('延时');\r\n            }\r\n            if (apartTime != 0) {\r\n                apartTime = secondsToDHMS(apartTime, 'D天H时N分S秒');\r\n                apartTime.split(\"天\")[0] == 0 && (apartTime = apartTime.substring(2));\r\n                apartTime.split(\"时\")[0] == 0 && (apartTime = apartTime.substring(2));\r\n                apartTime.split(\"分\")[0] == 0 && (apartTime = apartTime.substring(2));\r\n                apartTime = apartTime.split('天').join($_L.get('天'));\r\n                apartTime = apartTime.split('时').join($_L.get('时'));\r\n                apartTime = apartTime.split('分').join($_L.get('分'));\r\n                apartTime = apartTime.split('秒').join($_L.get('秒'));\r\n                gps = gps + \"(\"+tip+apartTime+\")\"\r\n            }\r\n        }\r\n    }\r\n    let info = col.info;\r\n    info.x && (gps = Number(gps) * Number(info.x));\r\n    info.m && (gps = info.m[String(gps)] || gps);\r\n    info.u && gps !== '' && (gps = gps + info.u);\r\n    return String(gps);\r\n}\r\n\r\n//取定位扩展传感器值\r\nLabels.gpsCgqFunction = function (gps, col) {\r\n    let v = Labels.getExtsField(gps, col.property) || '';\r\n    if (col.params) {\r\n      let moni = Labels.getExtsField(gps, col.params) || '';\r\n      if (moni || moni === 0) return v + ' (' + moni + ')';\r\n    }\r\n    return v;\r\n}\r\n\r\n//取当前告警名称\r\nLabels.alarmTypeFunction = function (gps, col) {\r\n    gps = gps[col.field || col.property];//typeIds\r\n    if (!gps || gps.length == 0) return '';\r\n    let names = [];\r\n    gps.forEach(typeId => {\r\n      if (hasFavAlarmType(typeId)) {\r\n            col = getAlarmNames()[typeId];//name\r\n            col && names.push(col);\r\n      }\r\n    });\r\n    return names.join(',');\r\n}\r\n\r\n//取视频报警说明\r\nLabels.videoAlarmFunction = function(gps, col) {\r\n    col = col.info;\r\n    let v = Labels.getExtsField(gps, 'bv0');\r\n    if (v === '' || v === null) return '';\r\n    v = parseInt(v, 16).toString(2);// 32长'111'\r\n    v = v.length > col.i ? v.charAt(v.length - col.i - 1) : '0';\r\n    if (v == '0') return $_L.get('正常');\r\n    if (!col.f) return col[v];\r\n\r\n    v = Labels.getExtsField(gps, col.f);\r\n    if (v === '' || v === null) return $_L.get('报警');\r\n    v = parseInt(v, 16).toString(2);\r\n    if (v === '0') return $_L.get('报警');\r\n\r\n    if (col.f == 'bv1' || col.f == 'bv2') {//视频信号丢失  视频信号遮挡\r\n        col = [];\r\n        for (let len=v.length, i=len-1; i>=0; i--) {// bit0~bit31分别表示第1~32个逻辑通道\r\n            v.charAt(i) == '1' && col.push(len-i);\r\n        }\r\n        return $_L.get('通道') + col.join(',');\r\n    }\r\n    if (col.f == 'bv3') {//存储单元故障\r\n        col = []; let zb = [];\r\n        for (let i=v.length-1, j=1; i>=0 && j<=16; i--,j++) {// 主存储器 bit0-bit11(1-12) 灾备存储bit12~bit15(1-4)\r\n            v.charAt(i) == '1' && (j <= 12 ? col.push(j) : zb.push(j-12));\r\n        }\r\n        v = [];\r\n        col.length && v.push($_L.get('主存储器') + col.join(','));\r\n        zb.length && v.push($_L.get('灾备存储器') + zb.join(','));\r\n        return v.join('|') || $_L.get('报警');\r\n    }\r\n    if (col.f == 'bv4') {//异常驾驶行为  bit0:疲劳 bit1:打电话 bit2:抽烟\r\n        col = [];\r\n        v.length > 0 && v.charAt(v.length - 1) == '1' && col.push($_L.get('疲劳'));\r\n        v.length > 1 && v.charAt(v.length - 2) == '1' && col.push($_L.get('打电话'));\r\n        v.length > 2 && v.charAt(v.length - 3) == '1' && col.push($_L.get('抽烟'));\r\n        if (col.length == 0) return '';\r\n        gps = Labels.getExtsField(gps, 'bv5');//疲劳程度用0~100表示\r\n        gps && col.push($_L.get('程度') + '=' + gps + '[0~100]');\r\n        return col.join(',') || $_L.get('报警');\r\n    }\r\n    return $_L.get('报警');\r\n}\r\n\r\nLabels.getExtsField = function (gps, field) {\r\n    if (!gps || !gps.exts) return '';\r\n    if (typeof(gps.exts)=='string') {\r\n        if (gps.exts.indexOf('{') != 0) return '';\r\n        gps.exts = JSON.parse(gps.exts);\r\n    }\r\n    return gps.exts.hasOwnProperty(field) ? gps.exts[field] : '';\r\n}\r\n"]}]}