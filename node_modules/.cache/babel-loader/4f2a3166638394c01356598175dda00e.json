{"remainingRequest":"D:\\cdRule\\node_modules\\babel-loader\\lib\\index.js!D:\\cdRule\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\cdRule\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\cdRule\\src\\modules\\cdRule\\CdInfoRModule.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\cdRule\\src\\modules\\cdRule\\CdInfoRModule.vue","mtime":1681712531547},{"path":"D:\\cdRule\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\cdRule\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\cdRule\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\cdRule\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _toConsumableArray from \"D:\\\\cdRule\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/toConsumableArray\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.regexp.search\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport EditWindow from \"./EditWindow.vue\";\nimport deductedWindow from \"./deductedWindow.vue\";\nimport { arrayToMap } from '@/common/util/Arrays.js';\nimport { arrayToTree } from '@/common/util/Trees.js';\nimport { addDateTime } from '@/common/util/Dates.js';\nexport default {\n  data: function data() {\n    return {\n      querying: false,\n      datas: [],\n      taskState: 2,\n      selectedItem: null,\n      carId: null,\n      stime: addDateTime(-1),\n      etime: addDateTime(0),\n      driverId: null,\n      cdId: null,\n      list: null\n    };\n  },\n  created: function created() {},\n  mounted: function mounted() {\n    var _this = this;\n\n    $_main.http.get('rule/get', {\n      sessionId: $_main.sessionId,\n      userId: $_main.userId\n    }).then(function (result) {\n      _this.list = result;\n    });\n    this.search();\n  },\n  methods: {\n    getTreeRoots: function getTreeRoots(callback) {\n      $_main.http.get('data/getCars', {\n        sessionId: $_main.sessionId\n      }).then(function (result) {\n        result.carList.forEach(function (el) {\n          el.name = el.carName;\n        });\n        result.teamList.forEach(function (el) {\n          el.name = el.teamName;\n        });\n        var TEAMS = {\n          list: null,\n          map: null,\n          root: {\n            id: '0',\n            name: $_L.get('所有车辆'),\n            children: []\n          }\n        };\n        var CARS = {\n          list: null,\n          map: null,\n          root: null\n        };\n        TEAMS.list = result.teamList || [];\n        TEAMS.map = arrayToMap(TEAMS.list, \"teamId\");\n        TEAMS.tree = arrayToTree(TEAMS.list, \"teamId\", \"pid\", TEAMS.map, TEAMS.root, 'teams');\n        CARS.list = result.carList || [];\n        CARS.map = arrayToMap(CARS.list, \"carId\");\n        CARS.root = TEAMS.root;\n        CARS.root.teams && (CARS.root.children = _toConsumableArray(CARS.root.teams));\n\n        for (var i = 0, len = TEAMS.list.length, team; i < len; i++) {\n          team = TEAMS.list[i];\n          team.teams && (team.children = _toConsumableArray(team.teams));\n        }\n\n        CARS.tree = arrayToTree(CARS.list, \"carId\", \"teamId\", TEAMS.map, CARS.root, \"children\");\n        callback(CARS.root);\n      });\n    },\n    getTreeRoots1: function getTreeRoots1(callback) {\n      $_main.http.get('data/getSubUser', {\n        sessionId: $_main.sessionId\n      }).then(function (result) {\n        result.forEach(function (el) {\n          el.name = el.cnName;\n        });\n        var root = {\n          id: '0',\n          name: $_L.get('所有司机'),\n          children: []\n        };\n        var children = arrayToTree(result, \"userId\", \"pid\");\n        root.children = children;\n        callback(root);\n      });\n    },\n    iconCssFunction: function iconCssFunction(node, open) {\n      return !node.carId ? open ? 'ico_open' : 'ico_close' : null;\n    },\n    iconCssFunction1: function iconCssFunction1(node, open) {\n      return !node.userId ? open ? 'ico_open' : 'ico_close' : null;\n    },\n    search: function search() {\n      var _this2 = this;\n\n      if (this.etime < this.stime) return $_alert.warn($_L.get('开始时间不能大于结束时间！'));\n      this.datas = [];\n      this.querying = true;\n      var url = this.taskState == 2 ? 'info/getInfoByH' : 'info/getInfo';\n      var params = this.taskState == 2 ? {\n        carId: this.carId,\n        stime: this.stime,\n        etime: this.etime,\n        driverId: this.driverId,\n        cdId: this.cdId\n      } : {\n        taskState: this.taskState\n      };\n      $_main.http.get(url, Object.assign({\n        sessionId: $_main.sessionId,\n        userId: $_main.userId\n      }, params)).then(function (result) {\n        _this2.datas = result;\n\n        _this2.toFinish();\n      });\n    },\n    toFinish: function toFinish() {\n      this.querying = false;\n      if (!this.datas || this.datas.length == 0) return $_alert.warn($_L.get('暂无数据！'));\n    },\n    editClick: function editClick() {\n      $_popup.open(EditWindow, {\n        callback: this.addOrUpdateCallback\n      });\n    },\n    addOrUpdateCallback: function addOrUpdateCallback() {\n      this.search();\n    },\n    ClickBtn: function ClickBtn(row) {\n      var exts = row.exts && (typeof row.exts == 'string' ? JSON.parse(row.exts) : row.exts) || {};\n      var deductedDetail = [];\n\n      if (exts.deductedDetail) {\n        for (var k in exts.deductedDetail) {\n          deductedDetail.push(Object.assign({\n            'regionId': k\n          }, exts.deductedDetail[k]));\n        }\n      }\n\n      $_popup.open(deductedWindow, {\n        name: row.taskName,\n        deductedDetail: deductedDetail || []\n      });\n    }\n  }\n};",{"version":3,"sources":["CdInfoRModule.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div :class=\"$style.container\">\r\n    <div >\r\n      <Toolbar :bgc=\"'#fff'\">\r\n        <InputRadio :label=\"$_L.get('任务状态')\" :options=\"[{label:$_L.get('未执行'),value:0},{label:$_L.get('执行中'),value:1},{label:$_L.get('执行完毕'),value:2}]\" v-model=\"taskState\" style=\"width:300px\"/>\r\n        <div v-show=\"taskState==2\" style=\"display: flex\">\r\n          <InputTree :label=\"$_L.get('车辆')\"  valueField=\"carId\" v-model=\"carId\" :getTreeRoots=\"getTreeRoots\" hasOwnField=\"carId\" :setting=\"{view:{iconCssFunction:iconCssFunction}}\" clearable style=\"width:220px;margin-left: 5px\"/>\r\n          <InputTree :label=\"$_L.get('司机')\"  valueField=\"userId\" v-model=\"driverId\" :getTreeRoots=\"getTreeRoots1\" hasOwnField=\"userId\" :setting=\"{view:{iconCssFunction:iconCssFunction1}}\" clearable style=\"width:220px;margin-left: 5px\"/>\r\n          <InputSelect :label=\"$_L.get('工况')\" :options=\"list\" v-model=\"cdId\" labelField=\"name\" valueField=\"id\" style=\"width:220px;margin-left: 5px\" clearable/>\r\n          <InputDateTime :label=\"$_L.get('开始时间')\" v-model=\"stime\" type=\"YMDHNS\" style=\"margin-left:5px\" />\r\n          <InputDateTime :label=\"$_L.get('结束时间')\" v-model=\"etime\" type=\"YMDHNS\" style=\"margin-left:5px\"/>\r\n        </div>\r\n\r\n        <Button type=\"primary\" :icon=\"querying?'el-icon-close':'el-icon-search'\" @click=\"querying?toFinish():search()\">{{$_L.get('查询')}}</Button>\r\n        <div slot=\"right\">\r\n          <Button icon=\"el-icon-plus\" style=\"margin-right:6px;\" type=\"primary\"  @click=\"editClick()\">{{$_L.get('分配')}}</Button>\r\n        </div>\r\n      </Toolbar>\r\n    </div>\r\n    <div style=\"flex-shrink:1;height:100%;position:relative\">\r\n      <vxe-table :data=\"datas\" :loading=\"!datas\" ref=\"grid\" style=\"border:1px solid #AEBAC5;border-top:0;position:absolute;left:0;top:0;right:0;bottom:0;\" @cell-click=\"({row})=>selectedItem=row\">\r\n        <vxe-table-column type=\"index\" :title=\"$_L.get('序号')\" width=\"50px\" />\r\n        <vxe-table-column field=\"taskName\" :title=\"$_L.get('工况名称')\"/>\r\n        <vxe-table-column field=\"taskNum\" :title=\"$_L.get('执行次数')\"/>\r\n<!--        <vxe-table-column field=\"taskState\" :title=\"$_L.get('任务状态')\" :formatter=\"({cellValue})=>cellValue=='1'?$_L.get('执行中'):cellValue=='2'?$_L.get('未执行'):''\"/>-->\r\n        <vxe-table-column field=\"startMile\" :title=\"$_L.get('开始里程')\" />\r\n        <vxe-table-column field=\"endMile\" :title=\"$_L.get('结束里程')\" />\r\n        <vxe-table-column field=\"mile\" :title=\"$_L.get('总里程')\" />\r\n        <vxe-table-column field=\"score\" :title=\"$_L.get('得分')\" />\r\n        <vxe-table-column field=\"des\" :title=\"$_L.get('描述')\" />\r\n        <vxe-table-column field=\"atime\" :title=\"$_L.get('创建时间')\" />\r\n        <vxe-table-column field=\"auser\" :title=\"$_L.get('创建用户')\" />\r\n        <vxe-table-column field=\"auser\" :title=\"$_L.get('扣分详情')\" width=\"100px\">\r\n          <template v-slot=\"{row}\">\r\n            <Button @click=\"ClickBtn(row)\" style=\"width:calc(100% - 40px);padding:0 4px\" type=\"primary\" :height=\"28\">{{$_L.get('详情')}}</Button>\r\n          </template>\r\n        </vxe-table-column>\r\n      </vxe-table>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport EditWindow               from './EditWindow.vue';\r\nimport deductedWindow           from './deductedWindow.vue';\r\nimport { arrayToMap }           from '@/common/util/Arrays.js';\r\nimport { arrayToTree }          from '@/common/util/Trees.js';\r\nimport { addDateTime }          from '@/common/util/Dates.js';\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      querying:false,\r\n      datas: [],\r\n      taskState:2,\r\n      selectedItem:null,\r\n      carId:null,\r\n      stime:addDateTime(-1),\r\n      etime: addDateTime(0),\r\n      driverId:null,\r\n      cdId:null,\r\n      list:null\r\n    }\r\n  },\r\n\r\n  created(){\r\n  },\r\n  mounted() {\r\n    $_main.http.get('rule/get',{ sessionId: $_main.sessionId,userId:$_main.userId }).then(result=>{\r\n      this.list=result;\r\n    })\r\n    this.search()\r\n  },\r\n  methods: {\r\n    getTreeRoots(callback){\r\n      $_main.http.get('data/getCars',{ sessionId: $_main.sessionId }).then(result=>{\r\n        result.carList.forEach(el=>{el.name=el.carName})\r\n        result.teamList.forEach(el=>{el.name=el.teamName })\r\n        let TEAMS={list:null,map:null,root:{id:'0',name:$_L.get('所有车辆'),children:[]}}\r\n        let CARS={list:null,map:null,root:null,}\r\n        TEAMS.list = result.teamList || [];\r\n        TEAMS.map = arrayToMap(TEAMS.list, \"teamId\");\r\n        TEAMS.tree = arrayToTree(TEAMS.list, \"teamId\", \"pid\", TEAMS.map, TEAMS.root, 'teams');\r\n\r\n        CARS.list = result.carList || [];\r\n        CARS.map = arrayToMap(CARS.list, \"carId\");\r\n        CARS.root = TEAMS.root;\r\n        CARS.root.teams && (CARS.root.children = [...CARS.root.teams]);\r\n        for (let i = 0, len = TEAMS.list.length, team; i < len; i++) {\r\n          team = TEAMS.list[i];\r\n          team.teams && (team.children = [...team.teams]);\r\n        }\r\n        CARS.tree = arrayToTree(CARS.list, \"carId\", \"teamId\", TEAMS.map, CARS.root, \"children\");\r\n        callback(CARS.root);\r\n      })\r\n    },\r\n    getTreeRoots1(callback){\r\n      $_main.http.get('data/getSubUser',{ sessionId: $_main.sessionId }).then(result=>{\r\n        result.forEach(el=>{el.name=el.cnName})\r\n        let root={id:'0',name:$_L.get('所有司机'),children:[]}\r\n        let children=arrayToTree(result, \"userId\",\"pid\");\r\n        root.children=children\r\n        callback(root);\r\n      })\r\n    },\r\n    iconCssFunction(node, open) {\r\n      return !node.carId ? (open ? 'ico_open' : 'ico_close') : null;\r\n    },\r\n    iconCssFunction1(node, open) {\r\n      return !node.userId ? (open ? 'ico_open' : 'ico_close') : null;\r\n    },\r\n    search(){\r\n      if(this.etime<this.stime)return $_alert.warn($_L.get('开始时间不能大于结束时间！'));\r\n      this.datas=[]\r\n      this.querying=true\r\n      let url=this.taskState==2?'info/getInfoByH':'info/getInfo';\r\n      let params=this.taskState==2?{carId:this.carId,stime:this.stime,etime:this.etime,driverId:this.driverId,cdId:this.cdId}:{taskState:this.taskState}\r\n      $_main.http.get(url,Object.assign({ sessionId: $_main.sessionId,userId:$_main.userId},params)).then(result=>{\r\n        this.datas=result;\r\n        this.toFinish()\r\n      })\r\n    },\r\n    toFinish(){\r\n      this.querying=false\r\n      if(!this.datas||this.datas.length==0)return  $_alert.warn($_L.get('暂无数据！'));\r\n    },\r\n    editClick(){\r\n      $_popup.open(EditWindow, {callback:this.addOrUpdateCallback});\r\n    },\r\n    addOrUpdateCallback(){\r\n      this.search()\r\n    },\r\n    ClickBtn(row){\r\n      let exts=row.exts&&(typeof row.exts=='string'?JSON.parse(row.exts):row.exts)||{};\r\n      let deductedDetail=[];\r\n      if(exts.deductedDetail){\r\n        for (let k in exts.deductedDetail){\r\n          deductedDetail.push(Object.assign({'regionId':k},exts.deductedDetail[k]));\r\n        }\r\n      }\r\n      $_popup.open(deductedWindow, {name:row.taskName,deductedDetail:deductedDetail||[]});\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style module>\r\n.container{\r\n  display:flex;\r\n  flex-flow:column;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n</style>\r\n"],"sourceRoot":"src/modules/cdRule"}]}