{"remainingRequest":"D:\\cdRule\\node_modules\\babel-loader\\lib\\index.js!D:\\cdRule\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\cdRule\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\cdRule\\src\\components\\InputImage.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\cdRule\\src\\components\\InputImage.vue","mtime":1673402177180},{"path":"D:\\cdRule\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\cdRule\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\cdRule\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\cdRule\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n/*\r\n * 使用例子\r\n * <InputImage ref=\"img\" label=\"你想输入啥\" :src=\"图片的路径\" :required=\"true\" clearable/>\r\n * 获取取图片\r\n * let bimage = this.$refs.img.getFile()\r\n */\nimport ImgPreview from \"./UploadImg/ImgPreview.vue\";\nexport default {\n  name: \"InputImage\",\n  props: {\n    label: String,\n    // 标题文本\n    src: String,\n    // image url\n    maxSize: {\n      type: String,\n      default: '20M'\n    },\n    // xxM xxKB\n    placeholder: {\n      type: String,\n      default: $_L.get('点击上传图片')\n    },\n    required: Boolean,\n    // 是否必填\n    clearable: Boolean,\n    // 是否显示可清除图标\n    disabled: Boolean,\n    // 是否可操作\n    border: {\n      type: Boolean,\n      default: true\n    },\n    // 是否显示边框\n    borderColor: {\n      type: String,\n      default: $_theme.border_color_light\n    },\n    radius: {\n      type: String,\n      default: $_theme.input_radius\n    },\n    // 边框圆角\n    minHeight: {\n      type: Number,\n      default: $_theme.inputHeight\n    },\n    // 最小高度数值，单位是px\n    padding: {\n      type: Number,\n      default: 5\n    },\n    imgStyle: {\n      default: null\n    },\n    iswebpath: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data: function data() {\n    return {\n      files: null,\n      empty: true,\n      hovering: false,\n      focused: false\n    };\n  },\n  _selectedImage: null,\n  watch: {\n    src: function src(v) {\n      this._refresh();\n    }\n  },\n  mounted: function mounted() {\n    this._refresh();\n  },\n  methods: {\n    _refresh: function _refresh() {\n      var _this2 = this;\n\n      this.empty = !(this._selectedImage || this.src);\n      this.$nextTick(function () {\n        _this2.$nextTick(function () {\n          //走两次nextTick，才能取到真正的content.clientWidth值，因为label会被对齐设置。\n          var maxWidth = _this2.$refs.content.clientWidth;\n          _this2.$refs.img.style['max-width'] = maxWidth - _this2.padding * 2 + 'px';\n          if (_this2._selectedImage) return _this2.$refs.img.src = _this2._selectedImage;\n          if (!_this2.src) return _this2.$refs.img.src = '';\n          if (_this2.src.indexOf('http') == 0) return _this2.$refs.img.src = _this2.src;\n          _this2.$refs.img.src = (_this2.iswebpath ? $_domain.WEB_ROOT : $_domain.WEB_PATH) + _this2.src;\n        });\n      });\n    },\n    //点击上传图片并显示图片\n    _onImageSelected: function _onImageSelected(event) {\n      this.files = null;\n      if (event.target.files.length == 0) return;\n\n      var _this = this,\n          file = event.target.files[0],\n          reader = new FileReader();\n\n      if (this.maxSize) {\n        var size = this.maxSize.toUpperCase();\n        size = size.indexOf('M') > 0 ? parseInt(size.substr(0, size.length - 1)) * 1024 * 1024 : parseInt(size.substr(0, size.length - 2)) * 1024;\n        if (file.size > size) return $_alert.warn($_L.get('图片不能大于{0}', this.maxSize.toUpperCase()));\n      }\n\n      var ImgType = file.type.slice(file.type.indexOf('/') + 1);\n      if (!(ImgType == 'jpg' || ImgType == 'gif' || ImgType == 'jpeg' || ImgType == 'png')) return $_alert.warn($_L.get('请选择图片,图片的格式为{0}', 'png,jpg,jpeg,gif'));\n      reader.readAsDataURL(file);\n\n      reader.onload = function () {\n        _this.$refs.img.src = _this._selectedImage = file.src = this.result;\n        _this.empty = false;\n\n        _this.$emit('change', file);\n      };\n\n      this.files = event.target.files;\n      this.empty = !this.$refs.img.src;\n    },\n    getFile: function getFile() {\n      var files = this.files;\n      return files && files.length > 0 ? files[0] : null;\n    },\n    getFileName: function getFileName() {\n      var file = this.getFile();\n      return file ? file.name : null;\n    },\n    getUploadImage: function getUploadImage() {\n      //获取上传的图片\n      return this.getFile();\n    },\n    hasImage: function hasImage() {\n      //是否有图片显示在\n      return !this.empty;\n    },\n    getFormat: function getFormat() {\n      // 1. base64格式如(data:image/png;base64,...); 2. http格式如(http://xxxx/aa.png?v=xxx)\n      if (this.empty) return null;\n      var url = this._selectedImage || this.src;\n      if (!url) return null;\n      if (url.indexOf('data:image') == 0) return url.split(/[/;]/)[1];\n      url = url.split('?')[0];\n      var array = url.split('.');\n      return array[array.length - 1];\n    },\n    _clear: function _clear() {\n      this._selectedImage = null;\n      this.empty = true;\n      this.$refs.img.src = '';\n      this.$refs.input.value = '';\n      this.$emit('change', null);\n      this.$emit('clear');\n    },\n    _view: function _view() {\n      $_popup.open(ImgPreview, {\n        ImgSrc: this.$refs.img\n      });\n    }\n  },\n  computed: {\n    containerStyle: function containerStyle() {\n      return {\n        borderRadius: this.radius,\n        minHeight: this.minHeight + 'px',\n        borderColor: this.focused ? this.theme.color : this.borderColor,\n        zIndex: this.focused ? this.theme.zindex() : ''\n      };\n    },\n    showClear: function showClear() {\n      return this.clearable && !this.empty && !this.disabled && this.hovering;\n    },\n    labelStyle: function labelStyle() {\n      return {\n        borderRightColor: this.theme.border_color_light,\n        backgroundColor: this.theme.input_label_bg_color\n      };\n    }\n  }\n};",{"version":3,"sources":["InputImage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA;;;;;;AAMA,OAAA,UAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,YADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,KAAA,EAAA,MADA;AACA;AACA,IAAA,GAAA,EAAA,MAFA;AAEA;AACA,IAAA,OAAA,EAAA;AAAA,MAAA,IAAA,EAAA,MAAA;AAAA,MAAA,OAAA,EAAA;AAAA,KAHA;AAGA;AACA,IAAA,WAAA,EAAA;AAAA,MAAA,IAAA,EAAA,MAAA;AAAA,MAAA,OAAA,EAAA,GAAA,CAAA,GAAA,CAAA,QAAA;AAAA,KAJA;AAKA,IAAA,QAAA,EAAA,OALA;AAKA;AACA,IAAA,SAAA,EAAA,OANA;AAMA;AACA,IAAA,QAAA,EAAA,OAPA;AAOA;AACA,IAAA,MAAA,EAAA;AAAA,MAAA,IAAA,EAAA,OAAA;AAAA,MAAA,OAAA,EAAA;AAAA,KARA;AAQA;AACA,IAAA,WAAA,EAAA;AAAA,MAAA,IAAA,EAAA,MAAA;AAAA,MAAA,OAAA,EAAA,OAAA,CAAA;AAAA,KATA;AAUA,IAAA,MAAA,EAAA;AAAA,MAAA,IAAA,EAAA,MAAA;AAAA,MAAA,OAAA,EAAA,OAAA,CAAA;AAAA,KAVA;AAUA;AACA,IAAA,SAAA,EAAA;AAAA,MAAA,IAAA,EAAA,MAAA;AAAA,MAAA,OAAA,EAAA,OAAA,CAAA;AAAA,KAXA;AAWA;AACA,IAAA,OAAA,EAAA;AAAA,MAAA,IAAA,EAAA,MAAA;AAAA,MAAA,OAAA,EAAA;AAAA,KAZA;AAaA,IAAA,QAAA,EAAA;AAAA,MAAA,OAAA,EAAA;AAAA,KAbA;AAcA,IAAA,SAAA,EAAA;AAAA,MAAA,IAAA,EAAA,OAAA;AAAA,MAAA,OAAA,EAAA;AAAA;AAdA,GAFA;AAkBA,EAAA,IAlBA,kBAkBA;AACA,WAAA;AACA,MAAA,KAAA,EAAA,IADA;AAEA,MAAA,KAAA,EAAA,IAFA;AAGA,MAAA,QAAA,EAAA,KAHA;AAIA,MAAA,OAAA,EAAA;AAJA,KAAA;AAMA,GAzBA;AA0BA,EAAA,cAAA,EAAA,IA1BA;AA4BA,EAAA,KAAA,EAAA;AACA,IAAA,GAAA,EAAA,aAAA,CAAA,EAAA;AACA,WAAA,QAAA;AACA;AAHA,GA5BA;AAiCA,EAAA,OAjCA,qBAiCA;AACA,SAAA,QAAA;AACA,GAnCA;AAoCA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,sBACA;AAAA;;AACA,WAAA,KAAA,GAAA,EAAA,KAAA,cAAA,IAAA,KAAA,GAAA,CAAA;AACA,WAAA,SAAA,CAAA,YAAA;AACA,QAAA,MAAA,CAAA,SAAA,CAAA,YAAA;AAAA;AACA,cAAA,QAAA,GAAA,MAAA,CAAA,KAAA,CAAA,OAAA,CAAA,WAAA;AACA,UAAA,MAAA,CAAA,KAAA,CAAA,GAAA,CAAA,KAAA,CAAA,WAAA,IAAA,QAAA,GAAA,MAAA,CAAA,OAAA,GAAA,CAAA,GAAA,IAAA;AACA,cAAA,MAAA,CAAA,cAAA,EAAA,OAAA,MAAA,CAAA,KAAA,CAAA,GAAA,CAAA,GAAA,GAAA,MAAA,CAAA,cAAA;AACA,cAAA,CAAA,MAAA,CAAA,GAAA,EAAA,OAAA,MAAA,CAAA,KAAA,CAAA,GAAA,CAAA,GAAA,GAAA,EAAA;AACA,cAAA,MAAA,CAAA,GAAA,CAAA,OAAA,CAAA,MAAA,KAAA,CAAA,EAAA,OAAA,MAAA,CAAA,KAAA,CAAA,GAAA,CAAA,GAAA,GAAA,MAAA,CAAA,GAAA;AACA,UAAA,MAAA,CAAA,KAAA,CAAA,GAAA,CAAA,GAAA,GAAA,CAAA,MAAA,CAAA,SAAA,GAAA,QAAA,CAAA,QAAA,GAAA,QAAA,CAAA,QAAA,IAAA,MAAA,CAAA,GAAA;AACA,SAPA;AAQA,OATA;AAUA,KAbA;AAcA;AACA,IAAA,gBAfA,4BAeA,KAfA,EAeA;AACA,WAAA,KAAA,GAAA,IAAA;AACA,UAAA,KAAA,CAAA,MAAA,CAAA,KAAA,CAAA,MAAA,IAAA,CAAA,EAAA;;AACA,UAAA,KAAA,GAAA,IAAA;AAAA,UAAA,IAAA,GAAA,KAAA,CAAA,MAAA,CAAA,KAAA,CAAA,CAAA,CAAA;AAAA,UAAA,MAAA,GAAA,IAAA,UAAA,EAAA;;AACA,UAAA,KAAA,OAAA,EAAA;AACA,YAAA,IAAA,GAAA,KAAA,OAAA,CAAA,WAAA,EAAA;AACA,QAAA,IAAA,GAAA,IAAA,CAAA,OAAA,CAAA,GAAA,IAAA,CAAA,GAAA,QAAA,CAAA,IAAA,CAAA,MAAA,CAAA,CAAA,EAAA,IAAA,CAAA,MAAA,GAAA,CAAA,CAAA,CAAA,GAAA,IAAA,GAAA,IAAA,GAAA,QAAA,CAAA,IAAA,CAAA,MAAA,CAAA,CAAA,EAAA,IAAA,CAAA,MAAA,GAAA,CAAA,CAAA,CAAA,GAAA,IAAA;AACA,YAAA,IAAA,CAAA,IAAA,GAAA,IAAA,EAAA,OAAA,OAAA,CAAA,IAAA,CAAA,GAAA,CAAA,GAAA,CAAA,WAAA,EAAA,KAAA,OAAA,CAAA,WAAA,EAAA,CAAA,CAAA;AACA;;AACA,UAAA,OAAA,GAAA,IAAA,CAAA,IAAA,CAAA,KAAA,CAAA,IAAA,CAAA,IAAA,CAAA,OAAA,CAAA,GAAA,IAAA,CAAA,CAAA;AACA,UAAA,EAAA,OAAA,IAAA,KAAA,IAAA,OAAA,IAAA,KAAA,IAAA,OAAA,IAAA,MAAA,IAAA,OAAA,IAAA,KAAA,CAAA,EAAA,OAAA,OAAA,CAAA,IAAA,CAAA,GAAA,CAAA,GAAA,CAAA,iBAAA,EAAA,kBAAA,CAAA,CAAA;AACA,MAAA,MAAA,CAAA,aAAA,CAAA,IAAA;;AACA,MAAA,MAAA,CAAA,MAAA,GAAA,YAAA;AACA,QAAA,KAAA,CAAA,KAAA,CAAA,GAAA,CAAA,GAAA,GAAA,KAAA,CAAA,cAAA,GAAA,IAAA,CAAA,GAAA,GAAA,KAAA,MAAA;AACA,QAAA,KAAA,CAAA,KAAA,GAAA,KAAA;;AACA,QAAA,KAAA,CAAA,KAAA,CAAA,QAAA,EAAA,IAAA;AACA,OAJA;;AAKA,WAAA,KAAA,GAAA,KAAA,CAAA,MAAA,CAAA,KAAA;AACA,WAAA,KAAA,GAAA,CAAA,KAAA,KAAA,CAAA,GAAA,CAAA,GAAA;AACA,KAlCA;AAoCA,IAAA,OApCA,qBAoCA;AACA,UAAA,KAAA,GAAA,KAAA,KAAA;AACA,aAAA,KAAA,IAAA,KAAA,CAAA,MAAA,GAAA,CAAA,GAAA,KAAA,CAAA,CAAA,CAAA,GAAA,IAAA;AACA,KAvCA;AAwCA,IAAA,WAxCA,yBAwCA;AACA,UAAA,IAAA,GAAA,KAAA,OAAA,EAAA;AACA,aAAA,IAAA,GAAA,IAAA,CAAA,IAAA,GAAA,IAAA;AACA,KA3CA;AA4CA,IAAA,cA5CA,4BA4CA;AAAA;AACA,aAAA,KAAA,OAAA,EAAA;AACA,KA9CA;AA+CA,IAAA,QA/CA,sBA+CA;AAAA;AACA,aAAA,CAAA,KAAA,KAAA;AACA,KAjDA;AAkDA,IAAA,SAlDA,uBAkDA;AAAA;AACA,UAAA,KAAA,KAAA,EAAA,OAAA,IAAA;AACA,UAAA,GAAA,GAAA,KAAA,cAAA,IAAA,KAAA,GAAA;AACA,UAAA,CAAA,GAAA,EAAA,OAAA,IAAA;AACA,UAAA,GAAA,CAAA,OAAA,CAAA,YAAA,KAAA,CAAA,EAAA,OAAA,GAAA,CAAA,KAAA,CAAA,MAAA,EAAA,CAAA,CAAA;AACA,MAAA,GAAA,GAAA,GAAA,CAAA,KAAA,CAAA,GAAA,EAAA,CAAA,CAAA;AACA,UAAA,KAAA,GAAA,GAAA,CAAA,KAAA,CAAA,GAAA,CAAA;AACA,aAAA,KAAA,CAAA,KAAA,CAAA,MAAA,GAAA,CAAA,CAAA;AACA,KA1DA;AA2DA,IAAA,MA3DA,oBA2DA;AACA,WAAA,cAAA,GAAA,IAAA;AACA,WAAA,KAAA,GAAA,IAAA;AACA,WAAA,KAAA,CAAA,GAAA,CAAA,GAAA,GAAA,EAAA;AACA,WAAA,KAAA,CAAA,KAAA,CAAA,KAAA,GAAA,EAAA;AACA,WAAA,KAAA,CAAA,QAAA,EAAA,IAAA;AACA,WAAA,KAAA,CAAA,OAAA;AACA,KAlEA;AAmEA,IAAA,KAnEA,mBAmEA;AACA,MAAA,OAAA,CAAA,IAAA,CAAA,UAAA,EAAA;AAAA,QAAA,MAAA,EAAA,KAAA,KAAA,CAAA;AAAA,OAAA;AACA;AArEA,GApCA;AA2GA,EAAA,QAAA,EAAA;AACA,IAAA,cADA,4BACA;AACA,aAAA;AACA,QAAA,YAAA,EAAA,KAAA,MADA;AAEA,QAAA,SAAA,EAAA,KAAA,SAAA,GAAA,IAFA;AAGA,QAAA,WAAA,EAAA,KAAA,OAAA,GAAA,KAAA,KAAA,CAAA,KAAA,GAAA,KAAA,WAHA;AAIA,QAAA,MAAA,EAAA,KAAA,OAAA,GAAA,KAAA,KAAA,CAAA,MAAA,EAAA,GAAA;AAJA,OAAA;AAMA,KARA;AASA,IAAA,SATA,uBASA;AACA,aAAA,KAAA,SAAA,IAAA,CAAA,KAAA,KAAA,IAAA,CAAA,KAAA,QAAA,IAAA,KAAA,QAAA;AACA,KAXA;AAYA,IAAA,UAZA,wBAYA;AACA,aAAA;AACA,QAAA,gBAAA,EAAA,KAAA,KAAA,CAAA,kBADA;AAEA,QAAA,eAAA,EAAA,KAAA,KAAA,CAAA;AAFA,OAAA;AAIA;AAjBA;AA3GA,CAAA","sourcesContent":["<template>\r\n  <div :class=\"[$style.container, border && $style.border]\" :style=\"containerStyle\" tabindex=\"0\" @focus=\"focused=true\" @blur=\"focused=false\" @mouseenter=\"hovering=true\" @mouseleave=\"hovering=false\">\r\n\r\n    <!--label显示-->\r\n    <span :class=\"$style.label\" style=\"width:1px;\" :style=\"labelStyle\" v-if=\"label\" is-label>{{label}}</span>\r\n\r\n    <div ref=\"content\" style=\"position:relative;cursor:pointer;\" :style=\"{padding:padding+'px'}\" :title=\"placeholder\" @click=\"$refs.input.click()\">\r\n      <span :class=\"$style.label\" v-if=\"empty && placeholder\" style=\"color:#B0B0B0;padding:0 3px\"> {{placeholder}} </span>\r\n      <img ref=\"img\" v-show=\"!empty\" alt=\"\" style=\"margin-bottom:-4px;max-height:50px\" :style=\"[imgStyle]\" />\r\n      <input ref=\"input\" v-bind=\"$attrs\" @change=\"_onImageSelected($event)\" type=\"file\" style=\"display:none\" accept=\"image/png,image/jpg,image/jpeg,image/gif\" />\r\n\r\n      <!--clear按钮显示-->\r\n      <i @click.stop=\"_clear\" class=\"el-icon-error\" :title=\"$_L.get('清空图片')\" style=\"border-radius:10px; padding:0px; position:absolute; top:calc(50% - 10px); right:2px; background-color:#fff; font-size:19px; color:#FF6D6D; cursor:pointer;\" v-if=\"showClear\"></i>\r\n      <i @click.stop=\"_view\" class=\"el-icon-zoom-in\" :title=\"$_L.get('查看图片')\" style=\"border-radius:10px; padding:0px; position:absolute; top:calc(50% - 10px); right:30px; background-color:#fff; font-size:19px; color:#FF6D6D; cursor:pointer;\" v-if=\"showClear\"></i>\r\n\r\n    </div>\r\n\r\n    <!--必填显示-->\r\n    <div :class=\"[$style.required]\" :style=\"{backgroundColor:theme.input_label_bg_color}\" style=\"width:1px;\" v-if=\"required\">\r\n      <i></i> <i class=\"el-icon-star-on\"></i>\r\n    </div>\r\n\r\n    <div v-if=\"disabled\" :class=\"$style.disabled\" :style=\"{borderRadius: radius}\"/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n/*\r\n * 使用例子\r\n * <InputImage ref=\"img\" label=\"你想输入啥\" :src=\"图片的路径\" :required=\"true\" clearable/>\r\n * 获取取图片\r\n * let bimage = this.$refs.img.getFile()\r\n */\r\nimport ImgPreview from \"./UploadImg/ImgPreview.vue\"\r\n\r\nexport default {\r\n  name: \"InputImage\",\r\n  props: {\r\n    label: String,                                                        // 标题文本\r\n    src: String,                                                          // image url\r\n    maxSize: { type: String, default: '20M' },                            // xxM xxKB\r\n    placeholder: { type: String, default: $_L.get('点击上传图片') },\r\n    required: Boolean,                                                    // 是否必填\r\n    clearable: Boolean,                                                   // 是否显示可清除图标\r\n    disabled: Boolean,                                                    // 是否可操作\r\n    border: { type: Boolean, default: true },                             // 是否显示边框\r\n    borderColor: { type: String, default: $_theme.border_color_light },\r\n    radius: { type: String,  default: $_theme.input_radius},              // 边框圆角\r\n    minHeight: { type: Number, default: $_theme.inputHeight },            // 最小高度数值，单位是px\r\n    padding: { type: Number, default: 5 },\r\n    imgStyle: { default: null },\r\n    iswebpath: { type: Boolean, default: false }\r\n  },\r\n  data() {\r\n    return {\r\n      files:null,\r\n      empty: true,\r\n      hovering: false,\r\n      focused: false,\r\n    };\r\n  },\r\n  _selectedImage: null,\r\n\r\n  watch: {\r\n    src: function (v) {\r\n      this._refresh();\r\n    }\r\n  },\r\n  mounted() {\r\n    this._refresh();\r\n  },\r\n  methods: {\r\n    _refresh() {\r\n      this.empty = !(this._selectedImage || this.src);\r\n      this.$nextTick(() => {\r\n        this.$nextTick(() => {//走两次nextTick，才能取到真正的content.clientWidth值，因为label会被对齐设置。\r\n          let maxWidth = this.$refs.content.clientWidth;\r\n          this.$refs.img.style['max-width'] = (maxWidth - this.padding * 2) + 'px';\r\n          if (this._selectedImage) return this.$refs.img.src = this._selectedImage;\r\n          if (!this.src) return this.$refs.img.src = '';\r\n          if (this.src.indexOf('http') == 0) return this.$refs.img.src = this.src;\r\n          this.$refs.img.src = (this.iswebpath ? $_domain.WEB_ROOT : $_domain.WEB_PATH) + this.src;\r\n        })\r\n      });\r\n    },\r\n    //点击上传图片并显示图片\r\n    _onImageSelected(event) {\r\n      this.files=null;\r\n      if (event.target.files.length == 0) return;\r\n      let _this = this, file = event.target.files[0], reader = new FileReader();\r\n      if (this.maxSize) {\r\n        let size = this.maxSize.toUpperCase();\r\n        size = size.indexOf('M') > 0 ? parseInt(size.substr(0, size.length - 1)) * 1024 * 1024 : parseInt(size.substr(0, size.length - 2)) * 1024;\r\n        if (file.size > size) return $_alert.warn($_L.get('图片不能大于{0}', this.maxSize.toUpperCase()));\r\n      }\r\n      let ImgType = file.type.slice(file.type.indexOf('/') + 1);\r\n      if (!(ImgType == 'jpg' || ImgType == 'gif' || ImgType == 'jpeg' || ImgType == 'png')) return $_alert.warn($_L.get('请选择图片,图片的格式为{0}', 'png,jpg,jpeg,gif'));\r\n      reader.readAsDataURL(file);\r\n      reader.onload = function () {\r\n        _this.$refs.img.src = _this._selectedImage = file.src = this.result;\r\n        _this.empty = false;\r\n        _this.$emit('change', file);\r\n      };\r\n      this.files=event.target.files;\r\n      this.empty = !this.$refs.img.src;\r\n    },\r\n\r\n    getFile() {\r\n      let files = this.files;\r\n      return files && files.length > 0 ? files[0] : null;\r\n    },\r\n    getFileName() {\r\n      let file = this.getFile();\r\n      return file ? file.name : null;\r\n    },\r\n    getUploadImage() {//获取上传的图片\r\n      return this.getFile();\r\n    },\r\n    hasImage() {//是否有图片显示在\r\n      return !this.empty;\r\n    },\r\n    getFormat() {// 1. base64格式如(data:image/png;base64,...); 2. http格式如(http://xxxx/aa.png?v=xxx)\r\n      if (this.empty) return null;\r\n      let url = this._selectedImage || this.src;\r\n      if (!url) return null;\r\n      if (url.indexOf('data:image') == 0) return url.split(/[/;]/)[1];\r\n      url = url.split('?')[0];\r\n      let array = url.split('.');\r\n      return array[array.length - 1];\r\n    },\r\n    _clear() {\r\n      this._selectedImage = null;\r\n      this.empty = true;\r\n      this.$refs.img.src = '';\r\n      this.$refs.input.value = '';\r\n      this.$emit('change', null);\r\n      this.$emit('clear');\r\n    },\r\n    _view() {\r\n      $_popup.open(ImgPreview, { ImgSrc: this.$refs.img });\r\n    }\r\n  },\r\n  computed: {\r\n    containerStyle() {\r\n      return {\r\n        borderRadius: this.radius,\r\n        minHeight: this.minHeight + 'px',\r\n        borderColor: this.focused ? this.theme.color : this.borderColor,\r\n        zIndex: this.focused ? this.theme.zindex() : ''\r\n      };\r\n    },\r\n    showClear() {\r\n      return this.clearable && !this.empty && !this.disabled && this.hovering;\r\n    },\r\n    labelStyle() {\r\n      return {\r\n        borderRightColor: this.theme.border_color_light,\r\n        backgroundColor: this.theme.input_label_bg_color\r\n      };\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style module>\r\n.container {\r\n    overflow: hidden;\r\n    vertical-align: top;\r\n  position: relative;\r\n  background-color: #fff;\r\n  outline: none;\r\n  white-space: nowrap;\r\n  display: table;\r\n  table-layout: auto;\r\n}\r\n.container > * {\r\n  height: 100%;\r\n  display: table-cell;\r\n  vertical-align: middle;\r\n}\r\n.border {\r\n  border-style: solid;\r\n  border-width: 1px;\r\n}\r\n/* 标题文本 */\r\n.label {\r\n  padding: 0 6px;\r\n  white-space: nowrap;\r\n  user-select: none;\r\n  -webkit-user-select: none;\r\n  -ms-user-select: none;\r\n  -moz-user-select: none;\r\n}\r\n/* 必填 */\r\n.required {\r\n  padding: 0 2px;\r\n  color: #f00;\r\n  user-select: none;\r\n  -webkit-user-select: none;\r\n  -ms-user-select: none;\r\n  -moz-user-select: none;\r\n}\r\n/* 禁止操作 */\r\n.disabled {\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  left: 0;\r\n  top: 0;\r\n  background-color: rgba(255, 255, 255, 0.6);\r\n  opacity: 0.6;\r\n  filter: alpha(opacity=60);\r\n  cursor: not-allowed;\r\n}\r\n</style>\r\n"],"sourceRoot":"src/components"}]}