{"remainingRequest":"D:\\cdRule\\node_modules\\thread-loader\\dist\\cjs.js!D:\\cdRule\\node_modules\\babel-loader\\lib\\index.js!D:\\cdRule\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\cdRule\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\cdRule\\src\\modules\\cdRule\\CdRuleModule.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\cdRule\\src\\modules\\cdRule\\CdRuleModule.vue","mtime":1685000036289},{"path":"D:\\cdRule\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\cdRule\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\cdRule\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\cdRule\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\cdRule\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport AiAddOrUpdateWindow from \"./AiAddOrUpdateWindow.vue\";\nimport DirAddOrUpdateWindow from \"./DirAddOrUpdateWindow.vue\";\nimport { arrayRemoveItem } from '@/common/util/Arrays.js';\nimport { arrayToMap } from '@/common/util/Arrays.js';\nimport { objClone, objCopyTo } from '@/common/util/Objects.js';\nexport default {\n  data: function data() {\n    return {\n      areas: [{\n        name: '黑龙江省'\n      }, {\n        name: '辽宁省'\n      }, {\n        name: '吉林省'\n      }, {\n        name: '河北省'\n      }, {\n        name: '河南省'\n      }, {\n        name: '湖北省'\n      }, {\n        name: '湖南省'\n      }, {\n        name: '山东省'\n      }, {\n        name: '山西省'\n      }, {\n        name: '陕西省'\n      }, {\n        name: '安徽省'\n      }, {\n        name: '浙江省'\n      }, {\n        name: '江苏省'\n      }, {\n        name: '福建省'\n      }, {\n        name: '广东省'\n      }, {\n        name: '海南省'\n      }, {\n        name: '四川省'\n      }, {\n        name: '云南省'\n      }, {\n        name: '贵州省'\n      }, {\n        name: '青海省'\n      }, {\n        name: '甘肃省'\n      }, {\n        name: '江西省'\n      }, {\n        name: '台湾省'\n      }, {\n        name: '内蒙古自治区'\n      }, {\n        name: '宁夏回族自治区'\n      }, {\n        name: '新疆维吾尔自治区'\n      }, {\n        name: '西藏自治区'\n      }, {\n        name: '广西壮族自治区'\n      }, {\n        name: '北京市'\n      }, {\n        name: '上海市'\n      }, {\n        name: '天津市'\n      }, {\n        name: '重庆市'\n      }, {\n        name: '香港特别行政区'\n      }, {\n        name: '澳门特别行政区'\n      }],\n      datas: [],\n      list: [],\n      place: [],\n      cmpIndex: {\n        id: null\n      },\n      selected: null,\n      selectedItem: null,\n      index: 0\n    };\n  },\n  created: function created() {},\n  mounted: function mounted() {\n    var _this = this;\n\n    $_main.http.get('rule/get', {\n      sessionId: $_main.sessionId,\n      userId: $_main.userId\n    }).then(function (result) {\n      _this.list = result;\n    });\n    this.getPlace();\n  },\n  methods: {\n    getPlace: function getPlace() {\n      var _this2 = this;\n\n      $_main.http.get('place/get', {\n        sessionId: $_main.sessionId,\n        userId: $_main.userId\n      }).then(function (result) {\n        var areas = _this2.areas.filter(function (el) {\n          return result.some(function (item) {\n            return item.area == el.name;\n          });\n        }) || [],\n            place = [];\n        areas.forEach(function (el) {\n          el.isopen = false;\n          el.children = [];\n          result.forEach(function (item) {\n            if (el.name == item.area) {\n              el.children.push(item);\n            }\n          });\n          place.push(el);\n        });\n        _this2.place = place;\n      });\n    },\n    addClick: function addClick() {\n      var item = {\n        name: null,\n        cars: [],\n        area: this.cmpIndex.area,\n        des: null,\n        regions: [],\n        auser: $_main.userId,\n        placeId: this.cmpIndex.id\n      };\n      $_popup.open(AiAddOrUpdateWindow, {\n        item: item,\n        callback: this.addOrUpdateCallback\n      });\n    },\n    updClick: function updClick() {\n      $_popup.open(AiAddOrUpdateWindow, {\n        item: objClone(this.selectedItem),\n        callback: this.addOrUpdateCallback\n      });\n    },\n    addOrUpdateCallback: function addOrUpdateCallback(result, isddd) {\n      if (isddd) {\n        this.datas.push(result);\n        this.list.push(result);\n      } else {\n        objCopyTo(result, this.selectedItem);\n      }\n    },\n    delClick: function delClick() {\n      var _this3 = this;\n\n      $_alert.comfirm($_L.get('你确定要删除吗？'), function (yes) {\n        if (!yes) return;\n        $_main.http.get('rule/delete', {\n          id: _this3.selectedItem.id\n        }).then(function (e) {\n          arrayRemoveItem(_this3.datas, _this3.selectedItem);\n          arrayRemoveItem(_this3.list, _this3.selectedItem);\n          _this3.selectedItem = null;\n          $_alert.success($_L.get('删除成功'));\n        });\n      }, this.$el);\n    },\n    addDirClick: function addDirClick() {\n      $_popup.open(DirAddOrUpdateWindow, {\n        areas: this.areas,\n        callback: this.addOrUpdateDirCallback\n      });\n    },\n    updDirClick: function updDirClick() {\n      $_popup.open(DirAddOrUpdateWindow, {\n        areas: this.areas,\n        item: objClone(this.selected),\n        callback: this.addOrUpdateDirCallback\n      });\n    },\n    addOrUpdateDirCallback: function addOrUpdateDirCallback(result, isddd) {\n      if (isddd) {\n        var place = arrayToMap(this.place, 'name');\n\n        if (place[result.area]) {\n          place[result.area].children.push(result);\n          this.$forceUpdate();\n        } else {\n          this.place.push({\n            name: result.area,\n            isopen: false,\n            children: [result]\n          });\n        }\n      } else {\n        objCopyTo(result, this.selected);\n      }\n    },\n    delDirClick: function delDirClick() {\n      var _this4 = this;\n\n      if (this.datas && this.datas.length != 0) return $_alert.warn($_L.get('该场地下有工况，请先删除工况？'));\n      $_alert.comfirm($_L.get('你确定要删除吗？'), function (yes) {\n        if (!yes) return;\n        $_main.http.get('place/delete', {\n          id: _this4.selected.id\n        }).then(function (e) {\n          var obj;\n\n          _this4.place.forEach(function (el) {\n            if (el.name == _this4.selected.area) {\n              arrayRemoveItem(el.children, _this4.selected);\n\n              if (el.children == 0) {\n                obj = el;\n              }\n            }\n          });\n\n          if (obj) {\n            arrayRemoveItem(_this4.place, obj);\n          }\n\n          _this4.selected = null;\n          _this4.cmpIndex = {\n            id: null\n          };\n          $_alert.success($_L.get('删除成功'));\n        });\n      }, this.$el);\n    },\n    click: function click(item) {\n      this.index++;\n\n      if (!item.children) {\n        this.cmpIndex = item;\n        this.datas = this.list.filter(function (el) {\n          return el.placeId == item.id;\n        });\n      } else {\n        item.isopen = !item.isopen;\n      }\n\n      this.$forceUpdate();\n      this.selected = item;\n    }\n  }\n};",null]}