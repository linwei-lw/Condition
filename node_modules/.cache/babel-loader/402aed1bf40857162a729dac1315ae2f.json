{"remainingRequest":"D:\\cdRule\\node_modules\\babel-loader\\lib\\index.js!D:\\cdRule\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\cdRule\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\cdRule\\src\\components\\QuickTime.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\cdRule\\src\\components\\QuickTime.vue","mtime":1644827924563},{"path":"D:\\cdRule\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\cdRule\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\cdRule\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\cdRule\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { addDateTime, getDays } from '@/common/util/Dates.js';\nimport { domPosition } from '@/components/util/Dom.js';\nexport default {\n  name: \"QuickTime\",\n  props: {\n    icon: {\n      type: String,\n      default: 'el-icon-arrow-right'\n    },\n    height: {\n      type: Number\n    },\n    type: {\n      type: String,\n      default: 'YMDHN'\n    },\n    //是\"YMDHNS\"的组合，Y年　M月　D日　H时　N分　S秒\n    position: {\n      type: String,\n      default: 'br'\n    } //t:top, b:bottom, r:right, l:left 可两两组合\n\n  },\n  data: function data() {\n    return {\n      date1: [{\n        label: $_L.get('今天'),\n        start: 0,\n        end: 0\n      }, {\n        label: $_L.get('昨天'),\n        start: -1,\n        end: -1\n      }, {\n        label: $_L.get('本周'),\n        start: 1\n        /*-day*/\n        ,\n        end: 0\n      }, {\n        label: $_L.get('上周'),\n        start: -6\n        /*-day*/\n        ,\n        end: 0\n        /*-day*/\n\n      }, {\n        label: $_L.get('本月'),\n        start: 1\n        /*-date*/\n        ,\n        end: 0\n      }, {\n        label: $_L.get('上月'),\n        start: 1\n        /*-pmonth*/\n        ,\n        end: 0\n        /*-date*/\n\n      }],\n      date2: [{\n        label: $_L.get('近{0}天', 3),\n        start: -2,\n        end: 0\n      }, {\n        label: $_L.get('近{0}天', 5),\n        start: -4,\n        end: 0\n      }, {\n        label: $_L.get('近{0}天', 7),\n        start: -6,\n        end: 0\n      }, {\n        label: $_L.get('近{0}天', 10),\n        start: -9,\n        end: 0\n      }, {\n        label: $_L.get('近{0}天', 15),\n        start: -14,\n        end: 0\n      }, {\n        label: $_L.get('近{0}天', 30),\n        start: -29,\n        end: 0\n      }],\n      showDropDown: false,\n      showTriangle: true,\n      showTriangle2: false,\n      //为了解决第一个三角形出现被遮挡的情况\n      dropdownStyle: {\n        borderColor: $_theme.border_color_dark,\n        zIndex: 1\n      },\n      triangleStyle: {}\n    };\n  },\n  watch: {\n    showDropDown: function showDropDown(v) {\n      var _this = this;\n\n      this._onMouseClick = this._onMouseClick || function (e) {\n        return _this.showDropDown = false;\n      };\n\n      setTimeout(function () {\n        return document[v ? 'addEventListener' : 'removeEventListener']('click', _this._onMouseClick);\n      }, 100);\n      if (!v) return;\n      this.$nextTick(function () {\n        var s = _this.dropdownStyle,\n            t = _this.triangleStyle,\n            eh = _this.$el.clientHeight,\n            ew = _this.$el.clientWidth,\n            dh = _this.$refs.dropdown.clientHeight,\n            dw = _this.$refs.dropdown.clientWidth;\n\n        var _domPosition = domPosition(_this.$el),\n            top = _domPosition.top,\n            left = _domPosition.left,\n            bottom = _domPosition.bottom,\n            right = _domPosition.right;\n\n        s.zIndex = window.$_theme.zindex();\n        var heightSpace = dh + 14; //弹窗需要的高度空间\n\n        var heightSpace2 = (dh - eh) / 2; //弹窗需要的高度空间\n\n        var widthSpace1 = dw - ew - 9; //弹窗需要的宽度空间\n\n        var widthSpace2 = (dw - ew) / 2; //弹窗需要的宽度空间\n\n        var widthSpace3 = dw + 14; //弹窗需要的宽度空间\n\n        switch (_this.position) {\n          case 'br':\n          case 'rb':\n            if (bottom < heightSpace) {\n              _this.showTriangle = false;\n            }\n\n            return s.bottom = (bottom >= heightSpace ? bottom - heightSpace : 0) + 'px', s.right = (right >= widthSpace1 ? right - widthSpace1 : 0) + 'px';\n\n          case 'tr':\n          case 'rt':\n            if (top < heightSpace) {\n              _this.showTriangle = false;\n            }\n\n            return s.top = (top >= heightSpace ? top - heightSpace : 0) + 'px', s.right = (right >= widthSpace1 ? right - widthSpace1 : 0) + 'px';\n\n          case 'bl':\n          case 'lb':\n            if (bottom < heightSpace) {\n              _this.showTriangle = false;\n            }\n\n            return s.bottom = (bottom >= heightSpace ? bottom - heightSpace : 0) + 'px', s.left = (left >= widthSpace1 ? left - widthSpace1 : 0) + 'px';\n\n          case 'tl':\n          case 'lt':\n            if (top < heightSpace) {\n              _this.showTriangle = false;\n            }\n\n            return s.top = (top >= heightSpace ? top - heightSpace : 0) + 'px', s.left = (left >= widthSpace1 ? left - widthSpace1 : 0) + 'px';\n\n          case 't':\n            if (top < heightSpace) {\n              _this.showTriangle = false;\n            }\n\n            return s.top = (top >= heightSpace ? top - heightSpace : 0) + 'px', s.left = (left >= widthSpace2 ? left - widthSpace2 : 0) + 'px';\n\n          case 'b':\n            if (bottom < heightSpace) {\n              _this.showTriangle = false;\n            }\n\n            return s.bottom = (bottom >= heightSpace ? bottom - heightSpace : 0) + 'px', s.left = (left >= widthSpace2 ? left - widthSpace2 : 0) + 'px';\n\n          case 'l':\n            _this.showTriangle = false;\n            _this.showTriangle2 = true;\n\n            if (left < widthSpace3) {\n              _this.showTriangle2 = false;\n            }\n\n            return s.top = (top >= heightSpace2 ? top - heightSpace2 : 0) + 'px', s.left = (left >= widthSpace3 ? left - widthSpace3 : 0) + 'px';\n\n          case 'r':\n            _this.showTriangle = false;\n            _this.showTriangle2 = true;\n\n            if (right < widthSpace3) {\n              _this.showTriangle2 = false;\n            }\n\n            return s.bottom = (bottom >= heightSpace2 ? bottom - heightSpace2 : 0) + 'px', s.right = (right >= widthSpace3 ? right - widthSpace3 : 0) + 'px';\n        }\n      });\n    },\n    type: function type(v) {\n      this.onTypeChg(v);\n    }\n  },\n  mounted: function mounted() {\n    this.onTypeChg(this.type);\n  },\n  methods: {\n    getTriangleClass: function getTriangleClass() {\n      if (this.position === 'l') {\n        return this.$style.triangleLeft;\n      } else if (this.position === 'r') {\n        return this.$style.triangleRight;\n      } else if (this.position.indexOf('t') != -1) {\n        return this.$style.triangleTop;\n      } else {\n        return this.$style.triangleBottom;\n      }\n    },\n    onTypeChg: function onTypeChg(v) {\n      switch (v) {\n        case 'YMDHN':\n          this.s_suffix = ' 00:00';\n          this.e_suffix = ' 23:59';\n          break;\n\n        case 'YMDHNS':\n          this.s_suffix = ' 00:00:00';\n          this.e_suffix = ' 23:59:59';\n          break;\n\n        case 'YMDH':\n          this.s_suffix = ' 00';\n          this.e_suffix = ' 23';\n          break;\n\n        default:\n          this.s_suffix = this.e_suffix = '';\n      }\n    },\n    select: function select(item, vars) {\n      if (vars) {\n        var now = new Date();\n        var date = now.getDate();\n        var day = now.getDay() == 0 ? 7 : now.getDay();\n        now.setMonth(now.getMonth() - 1);\n        var pmonth = getDays(now.getFullYear(), now.getMonth() + 1) + date;\n        this.date1[2].start = 1 - day;\n        this.date1[3].start = -day - 6;\n        this.date1[3].end = -day;\n        this.date1[4].start = 1 - date;\n        this.date1[5].start = 1 - pmonth;\n        this.date1[5].end = -date;\n      }\n\n      var s = addDateTime(item.start, 'YYYY-MM-DD') + this.s_suffix;\n      var e = addDateTime(item.end, 'YYYY-MM-DD') + this.e_suffix;\n      this.$emit('set', s, e);\n    }\n  }\n};",{"version":3,"sources":["QuickTime.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <Button :title=\"'快捷时间选择'\" padding=\"0 2px\" :iconStyle=\"{marginRight: '0px'}\" v-bind=\"$attrs\" :icon=\"icon\" type=\"primary\" :height=\"height\" style=\"position:relative\" @click=\"showDropDown=!showDropDown\">\r\n    <slot></slot>\r\n    <div ref=\"dropdown\" :class=\"$style.dropdown\" :style=\"dropdownStyle\" v-if=\"showDropDown\">\r\n      <div style=\"border-bottom:1px solid #EDEDED;\" :class=\"$style.dropdownDiv\">\r\n        <div v-for=\"item in date1\" :key=\"item.label\" :class=\"$style.item\" @click=\"select(item, true)\">\r\n          <p>{{item.label}}</p>\r\n        </div>\r\n      </div>\r\n      <div style=\"background-color: #F6F6F6;\" :class=\"$style.dropdownDiv\">\r\n        <div v-for=\"item in date2\" :key=\"item.label\" :class=\"$style.item\" @click=\"select(item, false)\" :style=\"{borderColor:theme.border_color_dark}\">\r\n          <p>{{item.label}}</p>\r\n        </div>\r\n      </div>\r\n      <div v-if=\"showDropDown&&showTriangle2\" :class=\"[$style.triangle, getTriangleClass()]\" :style=\"{zIndex: theme.zindex()}\"></div>\r\n    </div>\r\n    <div v-if=\"showDropDown&&showTriangle\" :class=\"[$style.triangle, getTriangleClass()]\" :style=\"{zIndex: theme.zindex()}\"></div>\r\n  </Button>\r\n</template>\r\n\r\n<script>\r\nimport { addDateTime, getDays } from '@/common/util/Dates.js';\r\nimport { domPosition } from '@/components/util/Dom.js';\r\n\r\nexport default {\r\n  name: \"QuickTime\",\r\n  props: {\r\n    icon:   { type: String, default:'el-icon-arrow-right' },\r\n    height: { type: Number },\r\n    type:   { type: String, default:'YMDHN' },  //是\"YMDHNS\"的组合，Y年　M月　D日　H时　N分　S秒\r\n    position: { type: String, default:'br' },   //t:top, b:bottom, r:right, l:left 可两两组合\r\n  },\r\n  data() {\r\n    return {\r\n      date1: [\r\n        {label:$_L.get('今天'),  start:0,            end:0},\r\n        {label:$_L.get('昨天'),  start:-1,           end:-1},\r\n        {label:$_L.get('本周'),  start:1/*-day*/,    end:0},\r\n        {label:$_L.get('上周'),  start:-6/*-day*/,   end:0/*-day*/},\r\n        {label:$_L.get('本月'),  start:1/*-date*/,   end:0},\r\n        {label:$_L.get('上月'),  start:1/*-pmonth*/, end:0/*-date*/}\r\n      ],\r\n      date2: [\r\n        {label:$_L.get('近{0}天',3),  start:-2,  end:0},\r\n        {label:$_L.get('近{0}天',5),  start:-4,  end:0},\r\n        {label:$_L.get('近{0}天',7),  start:-6,  end:0},\r\n        {label:$_L.get('近{0}天',10), start:-9,  end:0},\r\n        {label:$_L.get('近{0}天',15), start:-14, end:0},\r\n        {label:$_L.get('近{0}天',30), start:-29, end:0}\r\n      ],\r\n      showDropDown: false,\r\n      showTriangle: true,\r\n      showTriangle2: false,//为了解决第一个三角形出现被遮挡的情况\r\n      dropdownStyle: {borderColor: $_theme.border_color_dark,zIndex:1},\r\n      triangleStyle: {},\r\n    };\r\n  },\r\n  watch: {\r\n    showDropDown: function(v) {\r\n      this._onMouseClick = this._onMouseClick || (e => this.showDropDown = false);\r\n      setTimeout(()=>document[v?'addEventListener':'removeEventListener']('click', this._onMouseClick), 100);\r\n      if (!v) return;\r\n      \r\n      this.$nextTick(() => {\r\n        let s = this.dropdownStyle, t = this.triangleStyle, eh = this.$el.clientHeight, ew = this.$el.clientWidth, dh = this.$refs.dropdown.clientHeight, dw = this.$refs.dropdown.clientWidth;\r\n        let { top, left, bottom, right } = domPosition(this.$el);\r\n        s.zIndex = window.$_theme.zindex();\r\n        let heightSpace = dh + 14; //弹窗需要的高度空间\r\n        let heightSpace2 = (dh - eh)/2; //弹窗需要的高度空间\r\n        let widthSpace1 = dw - ew - 9; //弹窗需要的宽度空间\r\n        let widthSpace2 = (dw - ew)/2; //弹窗需要的宽度空间\r\n        let widthSpace3 = dw + 14 ; //弹窗需要的宽度空间\r\n        switch (this.position) {\r\n          case 'br':\r\n          case 'rb': if(bottom<heightSpace){this.showTriangle = false} return s.bottom = (bottom>=heightSpace?(bottom -heightSpace):0) + 'px', s.right = (right>=widthSpace1?(right - widthSpace1):0) + 'px';\r\n          case 'tr':\r\n          case 'rt': if(top<heightSpace){this.showTriangle = false} return s.top = (top>=heightSpace?(top - heightSpace):0) + 'px', s.right = (right>=widthSpace1?(right - widthSpace1):0) + 'px';\r\n          case 'bl':\r\n          case 'lb': if(bottom<heightSpace){this.showTriangle = false} return s.bottom = (bottom>=heightSpace?(bottom -heightSpace):0) + 'px', s.left = (left>=widthSpace1?(left - widthSpace1):0) + 'px';\r\n          case 'tl':\r\n          case 'lt': if(top<heightSpace){this.showTriangle = false} return s.top = (top>=heightSpace?(top - heightSpace):0) + 'px', s.left = (left>=widthSpace1?(left - widthSpace1):0) + 'px';\r\n          case 't' : if(top<heightSpace){this.showTriangle = false} return s.top = (top>=heightSpace?(top - heightSpace):0) + 'px', s.left = (left>=widthSpace2?(left - widthSpace2):0) + 'px';\r\n          case 'b' : if(bottom<heightSpace){this.showTriangle = false} return s.bottom = (bottom>=heightSpace?(bottom -heightSpace):0) + 'px', s.left = (left>=widthSpace2?(left - widthSpace2):0) + 'px';\r\n          case 'l' : this.showTriangle = false; this.showTriangle2=true; if(left<widthSpace3){this.showTriangle2=false} return s.top =  (top>=heightSpace2?(top - heightSpace2):0) + 'px', s.left = (left>=widthSpace3?(left - widthSpace3):0) + 'px';\r\n          case 'r' : this.showTriangle = false; this.showTriangle2=true; if(right<widthSpace3){this.showTriangle2=false} return s.bottom = (bottom>=heightSpace2?(bottom - heightSpace2):0) + 'px', s.right = (right>=widthSpace3?(right - widthSpace3):0) + 'px';\r\n        }\r\n      });\r\n    },\r\n    type: function(v) {\r\n      this.onTypeChg(v);\r\n    }\r\n  },\r\n  mounted() {\r\n    this.onTypeChg(this.type);\r\n  },\r\n  methods: {\r\n    getTriangleClass(){\r\n      if(this.position === 'l'){\r\n        return this.$style.triangleLeft;\r\n      }else if(this.position === 'r'){\r\n        return this.$style.triangleRight;\r\n      }else if(this.position.indexOf('t')!=-1){\r\n        return this.$style.triangleTop;\r\n      }else{\r\n        return this.$style.triangleBottom;\r\n      }\r\n    },\r\n    onTypeChg(v) {\r\n      switch (v) {\r\n        case 'YMDHN': this.s_suffix = ' 00:00'; this.e_suffix = ' 23:59'; break;\r\n        case 'YMDHNS': this.s_suffix = ' 00:00:00'; this.e_suffix = ' 23:59:59'; break;\r\n        case 'YMDH': this.s_suffix = ' 00'; this.e_suffix = ' 23'; break;\r\n        default: this.s_suffix = this.e_suffix = '';\r\n      }\r\n    },\r\n    select(item, vars) {\r\n      if (vars) {\r\n        let now = new Date();\r\n        let date = now.getDate();\r\n        let day = now.getDay()==0 ? 7 : now.getDay();\r\n        now.setMonth(now.getMonth()-1);\r\n        let pmonth = getDays(now.getFullYear(), now.getMonth()+1)+date;\r\n        \r\n        this.date1[2].start = 1-day;\r\n        this.date1[3].start = -day-6;   this.date1[3].end = -day;\r\n        this.date1[4].start = 1-date;\r\n        this.date1[5].start = 1-pmonth;  this.date1[5].end = -date;\r\n      }\r\n      let s = addDateTime(item.start, 'YYYY-MM-DD') + this.s_suffix;\r\n      let e = addDateTime(item.end, 'YYYY-MM-DD') + this.e_suffix;\r\n      this.$emit('set', s, e);\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style module>\r\n\r\n  /* 下拉容器 */\r\n  .dropdown {\r\n    position: fixed;\r\n    padding: 0;\r\n    margin: 0;\r\n    background-color: #fff;\r\n    box-shadow: 0px 0px 12px 1px RGBA(112, 112, 112, 0.35);\r\n    color: #3A3A3A;\r\n  }\r\n  .dropdown > .dropdownDiv{\r\n    height: 64px;\r\n  }\r\n  .dropdown > .dropdownDiv::after{\r\n    height: 0px;\r\n    content: '';\r\n    clear: both;\r\n    display: block;\r\n  }\r\n  .item {\r\n    height: 100%;\r\n    width: 65px;\r\n    float: left;\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n  .item:hover {\r\n    background-color: #FCF0C1;\r\n  }\r\n  .item p{\r\n    height: 20px;\r\n    width: 100%;\r\n    font-size: 14px;\r\n    border-right: 1px solid #cecece;\r\n    margin: 0;\r\n  }\r\n  .dropdown > .dropdownDiv > .item:nth-last-child(1) > p{\r\n    border: none;\r\n  }\r\n  .triangle{\r\n    width: 0;\r\n    height: 0;\r\n    border: solid #fff;\r\n    position: absolute;\r\n    border-width: 0px 7px 12px 7px;\r\n  }\r\n  .triangleTop{\r\n    top: -15px;\r\n    left: calc(50% - 7px);\r\n    border: solid #F6F6F6;\r\n    border-width: 12px 7px 0px 7px;\r\n    border-left-color: transparent !important;\r\n    border-right-color: transparent !important;\r\n  }\r\n  .triangleBottom{\r\n    bottom: -15px;\r\n    left: calc(50% - 7px);\r\n    border-width: 0px 7px 12px 7px;\r\n    border-left-color: transparent !important;\r\n    border-right-color: transparent !important;\r\n  }\r\n  .triangleRight{\r\n    left: -12px;\r\n    top: calc(50% - 7px);\r\n    border-width: 7px 12px 7px 0px;\r\n    border-top-color: transparent !important;\r\n    border-bottom-color: transparent !important;\r\n  }\r\n  .triangleLeft{\r\n    right: -12px;\r\n    top: calc(50% - 7px);\r\n    border-width: 7px 0px 7px 12px;\r\n    border-top-color: transparent !important;\r\n    border-bottom-color: transparent !important;\r\n  }\r\n</style>"],"sourceRoot":"src/components"}]}