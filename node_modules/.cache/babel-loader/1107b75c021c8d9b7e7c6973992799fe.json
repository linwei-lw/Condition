{"remainingRequest":"D:\\cdRule\\node_modules\\babel-loader\\lib\\index.js!D:\\cdRule\\node_modules\\babel-loader\\lib\\index.js!D:\\cdRule\\src\\common\\mixin\\http.js","dependencies":[{"path":"D:\\cdRule\\src\\common\\mixin\\http.js","mtime":1677661236842},{"path":"D:\\cdRule\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\cdRule\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\cdRule\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.typed.uint8-array\";\nimport \"core-js/modules/es6.typed.uint8-array\";\n/**\r\n * http请求后台服务模块\r\n */\n\nimport axios from 'axios';\nimport qs from 'qs';\naxios.defaults.withCredentials = true;\nvar headers = {\n  'Content-Type': 'application/json;charset=UTF-8'\n};\nvar isTimeout = false;\nvar http = {\n  authorization: function authorization(token) {\n    headers.Authorization = token;\n  },\n  get: function get(url, params) {\n    var quiet = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    if (isTimeout) return;\n    url += (url.indexOf('?') > 0 ? '&' : '?') + (params ? qs.stringify(params) + '&' : '') + new Date().getTime();\n    return axios({\n      headers: headers,\n      method: 'get',\n      url: \"\".concat(window.$_domain.WEB_PATH, \"h5\").concat(url)\n    }).then(function (r) {\n      return r.data;\n    }).then(function (r) {\n      if (r.status == 1) {\n        return r.result;\n      } else if (r.status == -1) {\n        isTimeout = true;\n        var page = r.result || 'index.html';\n        $_alert.error('您未登录或会话超时，请返回登录界面!', null, function () {\n          location.href = page;\n        }, true);\n      } else {\n        !quiet && $_alert.error(r.result);\n      }\n\n      throw r;\n    });\n  },\n  post: function post(url, params) {\n    var quiet = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    if (isTimeout) return;\n    url += (url.indexOf('?') > 0 ? '&' : '?') + new Date().getTime(); // console.log(`${window.$_domain.WEB_PATH}h5${url}`);\n\n    return axios({\n      headers: headers,\n      method: 'post',\n      url: \"\".concat(window.$_domain.WEB_PATH, \"h5\").concat(url),\n      data: params\n    }).then(function (r) {\n      return r.data;\n    }).then(function (r) {\n      if (r.status == 1) {\n        return r.result;\n      } else if (r.status == -1) {\n        isTimeout = true;\n        var page = r.result || 'index.html';\n        $_alert.error('您未登录或会话超时，请返回登录界面!', null, function () {\n          location.href = page;\n        }, true);\n      } else {\n        !quiet && $_alert.error(r.result);\n      }\n\n      throw r;\n    }).catch(function (err) {});\n  },\n  postxhyc: function postxhyc(url, params) {\n    var quiet = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    if (isTimeout) return;\n    url += (url.indexOf('?') > 0 ? '&' : '?') + new Date().getTime(); // console.log(`${window.$_domain.WEB_ROOT}${url}`);\n\n    if (url.indexOf('http://') != -1) {\n      return axios({\n        headers: headers,\n        method: 'post',\n        url: url,\n        data: params\n      }).then(function (r) {\n        // isTimeout = true;\n        // console.log(r,\"成功\");\n        return r.data;\n      }).then(function (r) {\n        if (r.status == 1) {\n          if (r.result.hasOwnProperty(encry)) {\n            return result(r.result);\n          } else {\n            return r.result;\n          } // } else if (r.status == -1) {\n          //   isTimeout = true;\n          //   let page = r.result || 'index.html';\n          //   $_alert.error('您未登录或会话超时，请返回登录界面!', null, ()=>{location.href=page}, true);\n\n        } else {\n          $_alert.error($_L.get('请求错误')); //   !quiet && $_alert.error(r.result);\n        }\n      }).catch(function (err) {// console.log(err,\"返回错误\");\n      });\n    } else {\n      return axios({\n        headers: headers,\n        method: 'post',\n        url: \"\".concat(window.$_domain.WEB_ROOT).concat(url),\n        data: params\n      }).then(function (r) {\n        // isTimeout = true;\n        // console.log(r,\"成功\");\n        return r.data;\n      }).then(function (r) {\n        return r; // if (r.status == 1) {\n        //   if(r.result.hasOwnProperty(encry)){\n        //    return result(r.result)\n        //   }else{\n        //     return r.result;\n        //   }\n        // // } else if (r.status == -1) {\n        //   // isTimeout = true;\n        // //   let page = r.result || 'index.html';\n        // //   $_alert.error('您未登录或会话超时，请返回登录界面!', null, ()=>{location.href=page}, true);\n        // } else {\n        // //   !quiet && $_alert.error(r.result);\n        //   $_alert.error($_L.get('请求错误'))\n        // }\n      }).catch(function (err) {// console.log(err,\"返回错误\");\n      });\n    }\n  },\n  getxhyc: function getxhyc(url, params) {\n    var quiet = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    if (isTimeout) return;\n    url += (url.indexOf('?') > 0 ? '&' : '?') + (params ? qs.stringify(params) + '&' : '') + new Date().getTime(); // console.log(`${window.$_domain.WEB_ROOT}${url}`);\n\n    if (url.indexOf('http://') != -1) {\n      return axios({\n        headers: headers,\n        method: 'get',\n        url: url\n      }).then(function (r) {\n        // isTimeout = true;\n        // console.log(r,\"成功\");\n        return r.data;\n      }).then(function (r) {\n        if (r.status == 1) {\n          if (r.result.hasOwnProperty(encry)) {\n            return result(r.result);\n          } else {\n            return r.result;\n          } // } else if (r.status == -1) {\n          // isTimeout = true;\n          //   let page = r.result || 'index.html';\n          //   $_alert.error('您未登录或会话超时，请返回登录界面!', null, ()=>{location.href=page}, true);\n\n        } else {\n          $_alert.error($_L.get('请求错误')); //   !quiet && $_alert.error(r.result);\n        }\n      }).catch(function (err) {// console.log(err,\"返回错误\");\n      });\n    } else {\n      return axios({\n        headers: headers,\n        method: 'get',\n        url: \"\".concat(window.$_domain.WEB_ROOT).concat(url)\n      }).then(function (r) {\n        // isTimeout = true;\n        // console.log(r,\"成功\");\n        return r.data;\n      }).then(function (r) {\n        if (r.status == 1) {\n          if (r.result.hasOwnProperty(encry)) {\n            return result(r.result);\n          } else {\n            return r.result;\n          } // } else if (r.status == -1) {\n          // isTimeout = true;\n          //   let page = r.result || 'index.html';\n          //   $_alert.error('您未登录或会话超时，请返回登录界面!', null, ()=>{location.href=page}, true);\n\n        } else {\n          $_alert.error($_L.get('请求错误')); //   !quiet && $_alert.error(r.result);\n        }\n      }).catch(function (err) {// console.log(err,\"返回错误\");\n      });\n    }\n  },\n  syncGet: function syncGet(url, params) {\n    var quiet = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    if (isTimeout) return;\n    url += (url.indexOf('?') > 0 ? '&' : '?') + (params ? qs.stringify(params) + '&' : '') + new Date().getTime();\n    return sync('GET', url, null, quiet);\n  },\n  syncPost: function syncPost(url, params) {\n    var quiet = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    if (isTimeout) return;\n    url += (url.indexOf('?') > 0 ? '&' : '?') + new Date().getTime();\n    return sync('POST', url, JSON.stringify(params), quiet);\n  }\n};\n\nfunction sync(method, url, params, quiet) {\n  var xhr = new XMLHttpRequest();\n\n  if (url.indexOf('http://') != -1) {\n    xhr.open(method, \"\".concat(url), false);\n  } else {\n    xhr.open(method, \"\".concat(window.$_domain.WEB_PATH, \"h5\").concat(url), false);\n  }\n\n  xhr.withCredentials = true;\n  xhr.setRequestHeader('Accept', 'application/json');\n  xhr.setRequestHeader('Content-Type', 'application/json');\n  xhr.setRequestHeader('Authorization', headers.Authorization);\n  xhr.send(params);\n  var r = JSON.parse(xhr.responseText);\n\n  if (r.status == 1) {\n    if (r.result.hasOwnProperty(encry)) {\n      return result(r.result);\n    } else {\n      return r.result;\n    }\n  } else if (r.status == -1) {\n    isTimeout = true;\n    var page = r.result || 'index.html';\n    $_alert.error('您未登录或会话超时，请返回登录界面!', null, function () {\n      location.href = page;\n    }, true);\n  } else {\n    !quiet && $_alert.error(r.result);\n  }\n\n  throw r;\n}\n\nfunction result(_ref) {\n  var encry = _ref.encry,\n      result = _ref.result;\n  if (!encry || !result) return result;\n  var array = [];\n\n  for (var i = 0, len = result.length; i < len; i++) {\n    array.push(result.charCodeAt(i));\n  }\n\n  return JSON.parse(pako.ungzip(new Uint8Array(array), {\n    to: 'string'\n  }));\n}\n\nwindow.$_http = http;",{"version":3,"sources":["D:\\cdRule\\src\\common\\mixin\\http.js"],"names":["axios","headers","isTimeout","http","authorization","get","quiet","url","params","qs","method","window","r","page","$_alert","location","post","data","postxhyc","result","$_L","getxhyc","syncGet","sync","syncPost","JSON","xhr","encry","array","i","len","to"],"mappings":"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","sourcesContent":["/**\r\n * http请求后台服务模块\r\n */\r\nimport axios from 'axios';\r\nimport qs from 'qs';\r\n\r\naxios.defaults.withCredentials = true;\r\n\r\nlet headers = {'Content-Type': 'application/json;charset=UTF-8'};\r\nlet isTimeout = false;\r\n\r\nconst http = {\r\n  authorization: (token) => {\r\n    headers.Authorization = token;\r\n  },\r\n\r\n  get: (url, params, quiet=false) => {\r\n    if (isTimeout) return;\r\n    url += (url.indexOf('?') > 0 ? '&' : '?') + (params ? (qs.stringify(params) + '&') : '') + new Date().getTime();\r\n    return axios({\r\n      headers: headers,\r\n      method: 'get',\r\n      url: `${window.$_domain.WEB_PATH}h5${url}`\r\n    })\r\n    .then(r => r.data)\r\n    .then(r => {\r\n      if (r.status == 1) {\r\n        return r.result;\r\n      } else if (r.status == -1) {\r\n        isTimeout = true;\r\n        let page = r.result || 'index.html';\r\n        $_alert.error('您未登录或会话超时，请返回登录界面!', null, ()=>{location.href=page}, true);\r\n      } else {\r\n        !quiet && $_alert.error(r.result);\r\n      }\r\n      throw r;\r\n    });\r\n  },\r\n\r\n  post: (url, params, quiet=false) => {\r\n    if (isTimeout) return;\r\n    url += (url.indexOf('?') > 0 ? '&' : '?') + new Date().getTime();\r\n    // console.log(`${window.$_domain.WEB_PATH}h5${url}`);\r\n    return axios({\r\n      headers: headers,\r\n      method: 'post',\r\n      url: `${window.$_domain.WEB_PATH}h5${url}`,\r\n      data: params\r\n    })\r\n    .then(r => r.data)\r\n    .then(r => {\r\n      if (r.status == 1) {\r\n        return r.result;\r\n      } else if (r.status == -1) {\r\n        isTimeout = true;\r\n        let page = r.result || 'index.html';\r\n        $_alert.error('您未登录或会话超时，请返回登录界面!', null, ()=>{location.href=page}, true);\r\n      } else {\r\n        !quiet && $_alert.error(r.result);\r\n      }\r\n      throw r;\r\n    }).catch(err=>{\r\n    });\r\n  },\r\n\r\n  postxhyc: (url, params, quiet=false) => {\r\n    if (isTimeout) return;\r\n    url += (url.indexOf('?') > 0 ? '&' : '?') + new Date().getTime();\r\n    // console.log(`${window.$_domain.WEB_ROOT}${url}`);\r\n    if(url.indexOf('http://')!=-1){\r\n      return axios({\r\n        headers: headers,\r\n        method: 'post',\r\n        url: url,\r\n        data: params\r\n      })\r\n      .then(r => {\r\n        // isTimeout = true;\r\n        // console.log(r,\"成功\");\r\n         return r.data\r\n      }).then(r=>{\r\n        if (r.status == 1) {\r\n          if(r.result.hasOwnProperty(encry)){\r\n           return result(r.result)\r\n          }else{\r\n            return r.result;\r\n          }\r\n        // } else if (r.status == -1) {\r\n        //   isTimeout = true;\r\n        //   let page = r.result || 'index.html';\r\n        //   $_alert.error('您未登录或会话超时，请返回登录界面!', null, ()=>{location.href=page}, true);\r\n        } else {\r\n          $_alert.error($_L.get('请求错误'))\r\n        //   !quiet && $_alert.error(r.result);\r\n        }\r\n      })\r\n\r\n        .catch(err=>{\r\n        // console.log(err,\"返回错误\");\r\n      });\r\n    }else{\r\n      return axios({\r\n        headers: headers,\r\n        method: 'post',\r\n        url: `${window.$_domain.WEB_ROOT}${url}`,\r\n        data: params\r\n      })\r\n      .then(r => {\r\n        // isTimeout = true;\r\n        // console.log(r,\"成功\");\r\n         return r.data\r\n      }).then(r=>{\r\n        return r\r\n        // if (r.status == 1) {\r\n        //   if(r.result.hasOwnProperty(encry)){\r\n        //    return result(r.result)\r\n        //   }else{\r\n        //     return r.result;\r\n        //   }\r\n        // // } else if (r.status == -1) {\r\n        //   // isTimeout = true;\r\n        // //   let page = r.result || 'index.html';\r\n        // //   $_alert.error('您未登录或会话超时，请返回登录界面!', null, ()=>{location.href=page}, true);\r\n        // } else {\r\n        // //   !quiet && $_alert.error(r.result);\r\n        //   $_alert.error($_L.get('请求错误'))\r\n        // }\r\n      }).catch(err=>{\r\n        // console.log(err,\"返回错误\");\r\n      });\r\n    }\r\n\r\n  },\r\n  getxhyc: (url, params, quiet=false) => {\r\n    if (isTimeout) return;\r\n    url += (url.indexOf('?') > 0 ? '&' : '?') + (params ? (qs.stringify(params) + '&') : '') + new Date().getTime();\r\n    // console.log(`${window.$_domain.WEB_ROOT}${url}`);\r\n    if(url.indexOf('http://')!=-1){\r\n      return axios({\r\n        headers: headers,\r\n        method: 'get',\r\n        url: url,\r\n      })\r\n      .then(r => {\r\n        // isTimeout = true;\r\n        // console.log(r,\"成功\");\r\n         return r.data\r\n      }).then(r=>{\r\n        if (r.status == 1) {\r\n          if(r.result.hasOwnProperty(encry)){\r\n           return result(r.result)\r\n          }else{\r\n            return r.result;\r\n          }\r\n        // } else if (r.status == -1) {\r\n          // isTimeout = true;\r\n        //   let page = r.result || 'index.html';\r\n        //   $_alert.error('您未登录或会话超时，请返回登录界面!', null, ()=>{location.href=page}, true);\r\n        } else {\r\n          $_alert.error($_L.get('请求错误'))\r\n        //   !quiet && $_alert.error(r.result);\r\n        }\r\n      })\r\n\r\n        .catch(err=>{\r\n        // console.log(err,\"返回错误\");\r\n      });\r\n    }else{\r\n      return axios({\r\n        headers: headers,\r\n        method: 'get',\r\n        url: `${window.$_domain.WEB_ROOT}${url}`,\r\n      })\r\n      .then(r => {\r\n        // isTimeout = true;\r\n        // console.log(r,\"成功\");\r\n         return r.data\r\n      }).then(r=>{\r\n        if (r.status == 1) {\r\n          if(r.result.hasOwnProperty(encry)){\r\n           return result(r.result)\r\n          }else{\r\n            return r.result;\r\n          }\r\n        // } else if (r.status == -1) {\r\n          // isTimeout = true;\r\n        //   let page = r.result || 'index.html';\r\n        //   $_alert.error('您未登录或会话超时，请返回登录界面!', null, ()=>{location.href=page}, true);\r\n        } else {\r\n          $_alert.error($_L.get('请求错误'))\r\n        //   !quiet && $_alert.error(r.result);\r\n        }\r\n      }).catch(err=>{\r\n        // console.log(err,\"返回错误\");\r\n      });\r\n    }\r\n\r\n  },\r\n\r\n  syncGet: (url, params, quiet=false) => {\r\n    if (isTimeout) return;\r\n    url += (url.indexOf('?') > 0 ? '&' : '?') + (params ? (qs.stringify(params) + '&') : '') + new Date().getTime();\r\n    return sync('GET', url, null, quiet);\r\n  },\r\n  syncPost: (url, params, quiet=false) => {\r\n    if (isTimeout) return;\r\n    url += (url.indexOf('?') > 0 ? '&' : '?') + new Date().getTime();\r\n    return sync('POST', url, JSON.stringify(params), quiet);\r\n  },\r\n}\r\n\r\nfunction sync(method, url, params, quiet) {\r\n  let xhr = new XMLHttpRequest();\r\n  if(url.indexOf('http://')!=-1){\r\n    xhr.open(method, `${url}`, false);\r\n  }else{\r\n    xhr.open(method, `${window.$_domain.WEB_PATH}h5${url}`, false);\r\n  }\r\n  xhr.withCredentials = true;\r\n  xhr.setRequestHeader('Accept', 'application/json');\r\n  xhr.setRequestHeader('Content-Type', 'application/json');\r\n  xhr.setRequestHeader('Authorization', headers.Authorization);\r\n  xhr.send(params);\r\n\r\n  let r = JSON.parse(xhr.responseText);\r\n  if (r.status == 1) {\r\n    if(r.result.hasOwnProperty(encry)){\r\n     return result(r.result)\r\n    }else{\r\n      return r.result;\r\n    }\r\n  } else if (r.status == -1) {\r\n    isTimeout = true;\r\n    let page = r.result || 'index.html';\r\n    $_alert.error('您未登录或会话超时，请返回登录界面!', null, ()=>{location.href=page}, true);\r\n  } else {\r\n    !quiet && $_alert.error(r.result);\r\n  }\r\n  throw r;\r\n}\r\nfunction result({encry,result}) {\r\n  if (!encry || !result) return result;\r\n  let array = [];\r\n  for (let i=0, len=result.length; i<len; i++) {\r\n    array.push(result.charCodeAt(i));\r\n  }\r\n  return JSON.parse(pako.ungzip(new Uint8Array(array),{to:'string'}));\r\n}\r\n\r\n\r\nwindow.$_http = http;\r\n"]}]}