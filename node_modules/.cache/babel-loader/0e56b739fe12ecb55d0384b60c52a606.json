{"remainingRequest":"D:\\cdRule\\node_modules\\babel-loader\\lib\\index.js!D:\\cdRule\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\cdRule\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\cdRule\\src\\main\\alarm\\RealTimeAlarm\\AlarmBinContentBox.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\cdRule\\src\\main\\alarm\\RealTimeAlarm\\AlarmBinContentBox.vue","mtime":1672993520674},{"path":"D:\\cdRule\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\cdRule\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\cdRule\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\cdRule\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.split\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getFieldMap } from '@/common/gps/Fields.js';\nexport default {\n  props: {\n    data: {\n      type: String,\n      default: null\n    }\n  },\n  data: function data() {\n    return {\n      tableData: [],\n      loading: false\n    };\n  },\n  watch: {\n    data: function data(val, oldVal) {\n      if (val != oldVal) {\n        this.getBinFile();\n      }\n    }\n  },\n  created: function created() {\n    this._alarmFields = [];\n    var alarmFields = getFieldMap()['alarm'].children;\n\n    for (var i = 0; i < alarmFields.length; i++) {\n      if (alarmFields[i]['id'].indexOf('_v') == -1) {\n        this._alarmFields.push(alarmFields[i]);\n      }\n    }\n\n    this._sttFields = getFieldMap()['stt'].children;\n  },\n  mounted: function mounted() {\n    this.getBinFile();\n  },\n  methods: {\n    alarmAttsFunction: function alarmAttsFunction(_ref) {\n      var cellValue = _ref.cellValue;\n      var gps = cellValue;\n      if (gps == null) return '';\n      var text = '';\n\n      for (var i = 0; i < this._alarmFields.length; i++) {\n        var state = this._alarmFields[i].labelFunction({\n          alarmStts: gps\n        }, this._alarmFields[i]);\n\n        if (state == $_L.get('报警')) {\n          text += this._alarmFields[i].title + \" | \";\n        }\n      }\n\n      return text.length > 0 ? text : $_L.get('无报警');\n    },\n    sttsFormatter: function sttsFormatter(_ref2) {\n      var cellValue = _ref2.cellValue;\n      var gps = cellValue;\n\n      while (gps.length < 32) {\n        gps = \"0\" + gps;\n      }\n\n      if (!gps) return '';\n      var text = '';\n\n      for (var i = 0; i < this._sttFields.length; i++) {\n        var state = this._sttFields[i].labelFunction({\n          carStts: gps\n        }, this._sttFields[i]);\n\n        text += this._sttFields[i].title + \"：\" + state + \" | \";\n      }\n\n      return text;\n    },\n    bpStFormatter: function bpStFormatter(_ref3) {\n      var cellValue = _ref3.cellValue;\n\n      if (cellValue == \"00\") {\n        cellValue = $_L.get('无制动');\n      } else if (cellValue == \"01\") {\n        cellValue = $_L.get('有制动');\n      }\n\n      return cellValue;\n    },\n    timeFormatter: function timeFormatter(_ref4) {\n      var cellValue = _ref4.cellValue;\n      var datetime = cellValue;\n\n      if (datetime && datetime.length == 12) {\n        return [20, datetime.substr(0, 2), '-', datetime.substr(2, 2), '-', datetime.substr(4, 2), ' ', datetime.substr(6, 2), ':', datetime.substr(8, 2), ':', datetime.substr(10, 2)].join('');\n      }\n\n      return datetime;\n    },\n    gearFormatter: function gearFormatter(_ref5) {\n      var cellValue = _ref5.cellValue;\n\n      if (cellValue == \"00\") {\n        cellValue = $_L.get('空档');\n      } else if (cellValue == \"10\") {\n        cellValue = $_L.get('倒挡');\n      } else if (cellValue == \"11\") {\n        cellValue = $_L.get('驻车档');\n      } else {\n        cellValue = cellValue + $_L.get('档');\n      }\n\n      return cellValue;\n    },\n    rlStFormatter: function rlStFormatter(_ref6) {\n      var cellValue = _ref6.cellValue;\n\n      if (cellValue == \"00\") {\n        cellValue = $_L.get('未开方向灯');\n      } else if (cellValue == \"01\") {\n        cellValue = $_L.get('左转方向灯');\n      } else if (cellValue == \"02\") {\n        cellValue = $_L.get('右转方向灯');\n      }\n\n      return cellValue;\n    },\n    getBinFile: function getBinFile() {\n      var _this = this;\n\n      if (!this.data) return;\n      var name = this.data.split('refPath=')[1];\n      this.loading = true;\n      $_main.http.post('h5/query/media?getBinFileData', {\n        name: name\n      }).then(function (result) {\n        _this.loading = false;\n\n        if (result) {\n          _this.tableData = result;\n        }\n      });\n    }\n  }\n};",{"version":3,"sources":["AlarmBinContentBox.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n<div :class=\"$style.container\">\r\n  <vxe-table :data=\"tableData\" :loading=\"loading\" :class=\"$style.grid\" ref=\"table\" style=\"height: 100%;\" :auto-resize=\"true\">\r\n    <vxe-table-column field=\"dSum\" :title=\"$_L.get('总数')\" width=\"50px\" />\r\n    <vxe-table-column field=\"dSeq\" :title=\"$_L.get('序号')\" width=\"50px\" />\r\n    <vxe-table-column field=\"alarm\" :title=\"$_L.get('报警状态')\" :formatter=\"alarmAttsFunction\" width=\"120px\"/>\r\n    <vxe-table-column field=\"stts\" :title=\"$_L.get('车辆状态')\" :formatter=\"sttsFormatter\" width=\"195px\"/>\r\n    <vxe-table-column field=\"lat\" :title=\"$_L.get('纬度')\"  width=\"95px\"/>\r\n    <vxe-table-column field=\"lng\" :title=\"$_L.get('经度')\"  width=\"95px\"/>\r\n    <vxe-table-column field=\"high\" :title=\"$_L.get('卫星高程(m)')\"  width=\"95px\"/>\r\n    <vxe-table-column field=\"speed\" :title=\"$_L.get('卫星速度(km/h)')\"  width=\"120px\" :formatter=\"({cellValue}) => cellValue/10\"/>\r\n    <vxe-table-column field=\"drct\" :title=\"$_L.get('卫星方向')\"  width=\"80px\" :formatter=\"({cellValue}) => cellValue!=null?(cellValue+$_L.get('度')):''\"/>\r\n    <vxe-table-column field=\"time\" :title=\"$_L.get('时间')\"  :formatter=\"timeFormatter\" width=\"157px\"/>\r\n    <vxe-table-column field=\"acceX\" :title=\"$_L.get('X轴加速度')\"  width=\"85px\"/>\r\n    <vxe-table-column field=\"acceY\" :title=\"$_L.get('Y轴加速度')\"  width=\"85px\"/>\r\n    <vxe-table-column field=\"acceZ\" :title=\"$_L.get('Z轴角速度')\"  width=\"85px\"/>\r\n    <vxe-table-column field=\"anguX\" :title=\"$_L.get('X轴角速度')\"  width=\"85px\"/>\r\n    <vxe-table-column field=\"anguY\" :title=\"$_L.get('Y轴角速度')\"  width=\"85px\"/>\r\n    <vxe-table-column field=\"anguZ\" :title=\"$_L.get('Z轴角速度')\"  width=\"85px\"/>\r\n    <vxe-table-column field=\"pSp\" :title=\"$_L.get('脉冲速度')\"  width=\"75px\"/>\r\n    <vxe-table-column field=\"obdSp\" :title=\"$_L.get('OBD速度')\"  width=\"77px\"/>\r\n    <vxe-table-column field=\"gear\" :title=\"$_L.get('档位状态')\"  :formatter=\"gearFormatter\" width=\"75px\"/>\r\n    <vxe-table-column field=\"acpd\" :title=\"$_L.get('加速踏板行程值(%)')\"  width=\"135px\"/>\r\n    <vxe-table-column field=\"brpd\" :title=\"$_L.get('制动踏板行程值(%)')\"  width=\"135px\"/>/>\r\n    <vxe-table-column field=\"bpSt\" :title=\"$_L.get('制动状态')\"  :formatter=\"bpStFormatter\" width=\"75px\"/>\r\n    <vxe-table-column field=\"enSp\" :title=\"$_L.get('发动机转速(RPM)')\"  width=\"127px\"/>\r\n    <vxe-table-column field=\"angle\" :title=\"$_L.get('方向盘角度')\"  :formatter=\"({cellValue}) => cellValue!=null?(cellValue+$_L.get('度')):''\" width=\"87px\"/>\r\n    <vxe-table-column field=\"rlSt\" :title=\"$_L.get('转向灯状态')\" :formatter=\"rlStFormatter\" width=\"87px\"/>\r\n  </vxe-table>\r\n</div>\r\n</template>\r\n\r\n<script>\r\n  import {getFieldMap} from '@/common/gps/Fields.js';\r\n  export default {\r\n    props: {\r\n      data: { type: String, default: null},\r\n    },\r\n    data () {\r\n      return {\r\n        tableData: [],\r\n        loading: false\r\n      }\r\n    },\r\n    watch: {\r\n      data (val, oldVal) {\r\n        if(val!=oldVal){\r\n          this.getBinFile();\r\n        }\r\n      }\r\n    },\r\n    created(){\r\n      this._alarmFields = [];\r\n      let alarmFields = getFieldMap()['alarm'].children;\r\n      for(let i=0;i<alarmFields.length;i++){\r\n        if(alarmFields[i]['id'].indexOf('_v') == -1){\r\n          this._alarmFields.push(alarmFields[i]);\r\n        }\r\n      }\r\n      this._sttFields = getFieldMap()['stt'].children;\r\n    },\r\n    mounted() {\r\n      this.getBinFile();\r\n    },\r\n    methods: {\r\n      alarmAttsFunction({cellValue}){\r\n        let gps = cellValue;\r\n        if (gps == null) return '';\r\n        let text = '';\r\n        for(let i=0;i<this._alarmFields.length;i++){\r\n          let state = this._alarmFields[i].labelFunction({alarmStts: gps}, this._alarmFields[i]);\r\n          if(state == $_L.get('报警')){\r\n            text += this._alarmFields[i].title+\" | \"\r\n          }\r\n        }\r\n        return text.length>0?text:$_L.get('无报警');\r\n      },\r\n      sttsFormatter({cellValue}){\r\n        let gps = cellValue;\r\n        while(gps.length < 32) {\r\n          gps = \"0\" + gps;\r\n        }\r\n        if (!gps) return '';\r\n        let text = '';\r\n        for(let i=0;i<this._sttFields.length;i++){\r\n          let state = this._sttFields[i].labelFunction({carStts: gps}, this._sttFields[i]);\r\n          text += this._sttFields[i].title+\"：\"+state+\" | \"\r\n        }\r\n        return text;\r\n      },\r\n      bpStFormatter({cellValue}){\r\n        if(cellValue == \"00\"){\r\n          cellValue = $_L.get('无制动')\r\n        }else if(cellValue == \"01\"){\r\n          cellValue = $_L.get('有制动')\r\n        }\r\n        return cellValue\r\n      },\r\n      timeFormatter({cellValue}){\r\n        let datetime = cellValue;\r\n        if(datetime&&datetime.length == 12) {\r\n          return [20,datetime.substr(0, 2), '-', datetime.substr(2, 2), '-', datetime.substr(4, 2), ' ', datetime.substr(6, 2), ':', datetime.substr(8, 2), ':', datetime.substr(10, 2)].join('');\r\n        }\r\n        return datetime;\r\n      },\r\n      gearFormatter({cellValue}){\r\n        if(cellValue == \"00\"){\r\n          cellValue = $_L.get('空档')\r\n        }else if(cellValue == \"10\"){\r\n          cellValue = $_L.get('倒挡')\r\n        }else if(cellValue == \"11\"){\r\n          cellValue = $_L.get('驻车档')\r\n        }else{\r\n          cellValue = cellValue + $_L.get('档');\r\n        }\r\n        return cellValue\r\n      },\r\n      rlStFormatter({cellValue}){\r\n        if(cellValue == \"00\"){\r\n          cellValue = $_L.get('未开方向灯')\r\n        }else if(cellValue == \"01\"){\r\n          cellValue = $_L.get('左转方向灯')\r\n        }else if(cellValue == \"02\"){\r\n          cellValue = $_L.get('右转方向灯')\r\n        }\r\n        return cellValue\r\n      },\r\n      getBinFile(){\r\n        if(!this.data) return;\r\n        let name = this.data.split('refPath=')[1];\r\n        this.loading = true;\r\n        $_main.http.post('h5/query/media?getBinFileData',{name: name}).then(result => {\r\n          this.loading = false;\r\n          if(result){\r\n            this.tableData = result;\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style module>\r\n  .container{\r\n    position: relative;\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n  .inputText{\r\n    width: calc(50% - 6px);\r\n    margin: 3px;\r\n    float: left;\r\n  }\r\n</style>"],"sourceRoot":"src/main/alarm/RealTimeAlarm"}]}