{"remainingRequest":"D:\\cdRule\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\cdRule\\src\\components\\QuickTime.vue?vue&type=style&index=0&module=true&lang=css&","dependencies":[{"path":"D:\\cdRule\\src\\components\\QuickTime.vue","mtime":1644827924563},{"path":"D:\\cdRule\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"D:\\cdRule\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\cdRule\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\cdRule\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\cdRule\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/* 下拉容器 */\n.dropdown {\n  position: fixed;\n  padding: 0;\n  margin: 0;\n  background-color: #fff;\n  box-shadow: 0px 0px 12px 1px RGBA(112, 112, 112, 0.35);\n  color: #3A3A3A;\n}\n.dropdown > .dropdownDiv{\n  height: 64px;\n}\n.dropdown > .dropdownDiv::after{\n  height: 0px;\n  content: '';\n  clear: both;\n  display: block;\n}\n.item {\n  height: 100%;\n  width: 65px;\n  float: left;\n  display: flex;\n  align-items: center;\n}\n.item:hover {\n  background-color: #FCF0C1;\n}\n.item p{\n  height: 20px;\n  width: 100%;\n  font-size: 14px;\n  border-right: 1px solid #cecece;\n  margin: 0;\n}\n.dropdown > .dropdownDiv > .item:nth-last-child(1) > p{\n  border: none;\n}\n.triangle{\n  width: 0;\n  height: 0;\n  border: solid #fff;\n  position: absolute;\n  border-width: 0px 7px 12px 7px;\n}\n.triangleTop{\n  top: -15px;\n  left: calc(50% - 7px);\n  border: solid #F6F6F6;\n  border-width: 12px 7px 0px 7px;\n  border-left-color: transparent !important;\n  border-right-color: transparent !important;\n}\n.triangleBottom{\n  bottom: -15px;\n  left: calc(50% - 7px);\n  border-width: 0px 7px 12px 7px;\n  border-left-color: transparent !important;\n  border-right-color: transparent !important;\n}\n.triangleRight{\n  left: -12px;\n  top: calc(50% - 7px);\n  border-width: 7px 12px 7px 0px;\n  border-top-color: transparent !important;\n  border-bottom-color: transparent !important;\n}\n.triangleLeft{\n  right: -12px;\n  top: calc(50% - 7px);\n  border-width: 7px 0px 7px 12px;\n  border-top-color: transparent !important;\n  border-bottom-color: transparent !important;\n}\n",{"version":3,"sources":["QuickTime.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"QuickTime.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <Button :title=\"'快捷时间选择'\" padding=\"0 2px\" :iconStyle=\"{marginRight: '0px'}\" v-bind=\"$attrs\" :icon=\"icon\" type=\"primary\" :height=\"height\" style=\"position:relative\" @click=\"showDropDown=!showDropDown\">\r\n    <slot></slot>\r\n    <div ref=\"dropdown\" :class=\"$style.dropdown\" :style=\"dropdownStyle\" v-if=\"showDropDown\">\r\n      <div style=\"border-bottom:1px solid #EDEDED;\" :class=\"$style.dropdownDiv\">\r\n        <div v-for=\"item in date1\" :key=\"item.label\" :class=\"$style.item\" @click=\"select(item, true)\">\r\n          <p>{{item.label}}</p>\r\n        </div>\r\n      </div>\r\n      <div style=\"background-color: #F6F6F6;\" :class=\"$style.dropdownDiv\">\r\n        <div v-for=\"item in date2\" :key=\"item.label\" :class=\"$style.item\" @click=\"select(item, false)\" :style=\"{borderColor:theme.border_color_dark}\">\r\n          <p>{{item.label}}</p>\r\n        </div>\r\n      </div>\r\n      <div v-if=\"showDropDown&&showTriangle2\" :class=\"[$style.triangle, getTriangleClass()]\" :style=\"{zIndex: theme.zindex()}\"></div>\r\n    </div>\r\n    <div v-if=\"showDropDown&&showTriangle\" :class=\"[$style.triangle, getTriangleClass()]\" :style=\"{zIndex: theme.zindex()}\"></div>\r\n  </Button>\r\n</template>\r\n\r\n<script>\r\nimport { addDateTime, getDays } from '@/common/util/Dates.js';\r\nimport { domPosition } from '@/components/util/Dom.js';\r\n\r\nexport default {\r\n  name: \"QuickTime\",\r\n  props: {\r\n    icon:   { type: String, default:'el-icon-arrow-right' },\r\n    height: { type: Number },\r\n    type:   { type: String, default:'YMDHN' },  //是\"YMDHNS\"的组合，Y年　M月　D日　H时　N分　S秒\r\n    position: { type: String, default:'br' },   //t:top, b:bottom, r:right, l:left 可两两组合\r\n  },\r\n  data() {\r\n    return {\r\n      date1: [\r\n        {label:$_L.get('今天'),  start:0,            end:0},\r\n        {label:$_L.get('昨天'),  start:-1,           end:-1},\r\n        {label:$_L.get('本周'),  start:1/*-day*/,    end:0},\r\n        {label:$_L.get('上周'),  start:-6/*-day*/,   end:0/*-day*/},\r\n        {label:$_L.get('本月'),  start:1/*-date*/,   end:0},\r\n        {label:$_L.get('上月'),  start:1/*-pmonth*/, end:0/*-date*/}\r\n      ],\r\n      date2: [\r\n        {label:$_L.get('近{0}天',3),  start:-2,  end:0},\r\n        {label:$_L.get('近{0}天',5),  start:-4,  end:0},\r\n        {label:$_L.get('近{0}天',7),  start:-6,  end:0},\r\n        {label:$_L.get('近{0}天',10), start:-9,  end:0},\r\n        {label:$_L.get('近{0}天',15), start:-14, end:0},\r\n        {label:$_L.get('近{0}天',30), start:-29, end:0}\r\n      ],\r\n      showDropDown: false,\r\n      showTriangle: true,\r\n      showTriangle2: false,//为了解决第一个三角形出现被遮挡的情况\r\n      dropdownStyle: {borderColor: $_theme.border_color_dark,zIndex:1},\r\n      triangleStyle: {},\r\n    };\r\n  },\r\n  watch: {\r\n    showDropDown: function(v) {\r\n      this._onMouseClick = this._onMouseClick || (e => this.showDropDown = false);\r\n      setTimeout(()=>document[v?'addEventListener':'removeEventListener']('click', this._onMouseClick), 100);\r\n      if (!v) return;\r\n      \r\n      this.$nextTick(() => {\r\n        let s = this.dropdownStyle, t = this.triangleStyle, eh = this.$el.clientHeight, ew = this.$el.clientWidth, dh = this.$refs.dropdown.clientHeight, dw = this.$refs.dropdown.clientWidth;\r\n        let { top, left, bottom, right } = domPosition(this.$el);\r\n        s.zIndex = window.$_theme.zindex();\r\n        let heightSpace = dh + 14; //弹窗需要的高度空间\r\n        let heightSpace2 = (dh - eh)/2; //弹窗需要的高度空间\r\n        let widthSpace1 = dw - ew - 9; //弹窗需要的宽度空间\r\n        let widthSpace2 = (dw - ew)/2; //弹窗需要的宽度空间\r\n        let widthSpace3 = dw + 14 ; //弹窗需要的宽度空间\r\n        switch (this.position) {\r\n          case 'br':\r\n          case 'rb': if(bottom<heightSpace){this.showTriangle = false} return s.bottom = (bottom>=heightSpace?(bottom -heightSpace):0) + 'px', s.right = (right>=widthSpace1?(right - widthSpace1):0) + 'px';\r\n          case 'tr':\r\n          case 'rt': if(top<heightSpace){this.showTriangle = false} return s.top = (top>=heightSpace?(top - heightSpace):0) + 'px', s.right = (right>=widthSpace1?(right - widthSpace1):0) + 'px';\r\n          case 'bl':\r\n          case 'lb': if(bottom<heightSpace){this.showTriangle = false} return s.bottom = (bottom>=heightSpace?(bottom -heightSpace):0) + 'px', s.left = (left>=widthSpace1?(left - widthSpace1):0) + 'px';\r\n          case 'tl':\r\n          case 'lt': if(top<heightSpace){this.showTriangle = false} return s.top = (top>=heightSpace?(top - heightSpace):0) + 'px', s.left = (left>=widthSpace1?(left - widthSpace1):0) + 'px';\r\n          case 't' : if(top<heightSpace){this.showTriangle = false} return s.top = (top>=heightSpace?(top - heightSpace):0) + 'px', s.left = (left>=widthSpace2?(left - widthSpace2):0) + 'px';\r\n          case 'b' : if(bottom<heightSpace){this.showTriangle = false} return s.bottom = (bottom>=heightSpace?(bottom -heightSpace):0) + 'px', s.left = (left>=widthSpace2?(left - widthSpace2):0) + 'px';\r\n          case 'l' : this.showTriangle = false; this.showTriangle2=true; if(left<widthSpace3){this.showTriangle2=false} return s.top =  (top>=heightSpace2?(top - heightSpace2):0) + 'px', s.left = (left>=widthSpace3?(left - widthSpace3):0) + 'px';\r\n          case 'r' : this.showTriangle = false; this.showTriangle2=true; if(right<widthSpace3){this.showTriangle2=false} return s.bottom = (bottom>=heightSpace2?(bottom - heightSpace2):0) + 'px', s.right = (right>=widthSpace3?(right - widthSpace3):0) + 'px';\r\n        }\r\n      });\r\n    },\r\n    type: function(v) {\r\n      this.onTypeChg(v);\r\n    }\r\n  },\r\n  mounted() {\r\n    this.onTypeChg(this.type);\r\n  },\r\n  methods: {\r\n    getTriangleClass(){\r\n      if(this.position === 'l'){\r\n        return this.$style.triangleLeft;\r\n      }else if(this.position === 'r'){\r\n        return this.$style.triangleRight;\r\n      }else if(this.position.indexOf('t')!=-1){\r\n        return this.$style.triangleTop;\r\n      }else{\r\n        return this.$style.triangleBottom;\r\n      }\r\n    },\r\n    onTypeChg(v) {\r\n      switch (v) {\r\n        case 'YMDHN': this.s_suffix = ' 00:00'; this.e_suffix = ' 23:59'; break;\r\n        case 'YMDHNS': this.s_suffix = ' 00:00:00'; this.e_suffix = ' 23:59:59'; break;\r\n        case 'YMDH': this.s_suffix = ' 00'; this.e_suffix = ' 23'; break;\r\n        default: this.s_suffix = this.e_suffix = '';\r\n      }\r\n    },\r\n    select(item, vars) {\r\n      if (vars) {\r\n        let now = new Date();\r\n        let date = now.getDate();\r\n        let day = now.getDay()==0 ? 7 : now.getDay();\r\n        now.setMonth(now.getMonth()-1);\r\n        let pmonth = getDays(now.getFullYear(), now.getMonth()+1)+date;\r\n        \r\n        this.date1[2].start = 1-day;\r\n        this.date1[3].start = -day-6;   this.date1[3].end = -day;\r\n        this.date1[4].start = 1-date;\r\n        this.date1[5].start = 1-pmonth;  this.date1[5].end = -date;\r\n      }\r\n      let s = addDateTime(item.start, 'YYYY-MM-DD') + this.s_suffix;\r\n      let e = addDateTime(item.end, 'YYYY-MM-DD') + this.e_suffix;\r\n      this.$emit('set', s, e);\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style module>\r\n\r\n  /* 下拉容器 */\r\n  .dropdown {\r\n    position: fixed;\r\n    padding: 0;\r\n    margin: 0;\r\n    background-color: #fff;\r\n    box-shadow: 0px 0px 12px 1px RGBA(112, 112, 112, 0.35);\r\n    color: #3A3A3A;\r\n  }\r\n  .dropdown > .dropdownDiv{\r\n    height: 64px;\r\n  }\r\n  .dropdown > .dropdownDiv::after{\r\n    height: 0px;\r\n    content: '';\r\n    clear: both;\r\n    display: block;\r\n  }\r\n  .item {\r\n    height: 100%;\r\n    width: 65px;\r\n    float: left;\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n  .item:hover {\r\n    background-color: #FCF0C1;\r\n  }\r\n  .item p{\r\n    height: 20px;\r\n    width: 100%;\r\n    font-size: 14px;\r\n    border-right: 1px solid #cecece;\r\n    margin: 0;\r\n  }\r\n  .dropdown > .dropdownDiv > .item:nth-last-child(1) > p{\r\n    border: none;\r\n  }\r\n  .triangle{\r\n    width: 0;\r\n    height: 0;\r\n    border: solid #fff;\r\n    position: absolute;\r\n    border-width: 0px 7px 12px 7px;\r\n  }\r\n  .triangleTop{\r\n    top: -15px;\r\n    left: calc(50% - 7px);\r\n    border: solid #F6F6F6;\r\n    border-width: 12px 7px 0px 7px;\r\n    border-left-color: transparent !important;\r\n    border-right-color: transparent !important;\r\n  }\r\n  .triangleBottom{\r\n    bottom: -15px;\r\n    left: calc(50% - 7px);\r\n    border-width: 0px 7px 12px 7px;\r\n    border-left-color: transparent !important;\r\n    border-right-color: transparent !important;\r\n  }\r\n  .triangleRight{\r\n    left: -12px;\r\n    top: calc(50% - 7px);\r\n    border-width: 7px 12px 7px 0px;\r\n    border-top-color: transparent !important;\r\n    border-bottom-color: transparent !important;\r\n  }\r\n  .triangleLeft{\r\n    right: -12px;\r\n    top: calc(50% - 7px);\r\n    border-width: 7px 0px 7px 12px;\r\n    border-top-color: transparent !important;\r\n    border-bottom-color: transparent !important;\r\n  }\r\n</style>"]}]}