{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"CdRuleModule\"],{\"5bca\":function(t,e,n){\"use strict\";var i=n(\"9712\"),a=n.n(i);e[\"default\"]=a.a},\"84e0\":function(t,e,n){\"use strict\";function i(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e||!t)return e;for(var i in t)n&&n.has(i)||(e[i]=t[i]);return e}function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!t)return t;var n={};for(var i in t)e&&e.has(i)||(n[i]=t[i]);return n}n.d(e,\"b\",function(){return i}),n.d(e,\"a\",function(){return a})},9712:function(t,e,n){t.exports={content:\"AiAddOrUpdateWindow_content_3F7iX\",item:\"AiAddOrUpdateWindow_item_3hifu\"}},a874:function(t,e,n){\"use strict\";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",{class:t.$style.container},[n(\"div\",[n(\"Toolbar\",[n(\"div\",{attrs:{slot:\"right\"},slot:\"right\"},[n(\"Button\",{staticStyle:{\"margin-right\":\"6px\"},attrs:{icon:\"el-icon-plus\",type:\"primary\"},on:{click:function(e){return t.addClick()}}},[t._v(t._s(t.$_L.get(\"新增\")))]),n(\"Button\",{staticStyle:{\"margin-right\":\"6px\"},attrs:{icon:\"el-icon-edit\",type:\"primary\",disabled:!t.selectedItem},on:{click:function(e){return t.updClick()}}},[t._v(t._s(t.$_L.get(\"修改\")))]),n(\"Button\",{staticStyle:{\"margin-right\":\"6px\"},attrs:{icon:\"el-icon-minus\",type:\"primary\",disabled:!t.selectedItem},on:{click:function(e){return t.delClick()}}},[t._v(t._s(t.$_L.get(\"删除\")))])],1)])],1),n(\"div\",{staticStyle:{\"flex-shrink\":\"1\",height:\"100%\",position:\"relative\"}},[n(\"vxe-table\",{ref:\"grid\",staticStyle:{border:\"1px solid #AEBAC5\",\"border-top\":\"0\",position:\"absolute\",left:\"0\",top:\"0\",right:\"0\",bottom:\"0\"},attrs:{data:t.datas,loading:!t.datas},on:{\"cell-click\":function(e){var n=e.row;return t.selectedItem=n}}},[n(\"vxe-table-column\",{attrs:{type:\"index\",title:t.$_L.get(\"序号\"),width:\"50px\"}}),n(\"vxe-table-column\",{attrs:{field:\"name\",title:t.$_L.get(\"工况名称\")}}),n(\"vxe-table-column\",{attrs:{field:\"area\",title:t.$_L.get(\"所在地区\")}}),n(\"vxe-table-column\",{attrs:{field:\"state\",title:t.$_L.get(\"状态\"),formatter:function(e){var n=e.cellValue;return\"1\"==n?t.$_L.get(\"正常\"):t.$_L.get(\"关闭\")}}}),n(\"vxe-table-column\",{attrs:{field:\"des\",title:t.$_L.get(\"描述\")}}),n(\"vxe-table-column\",{attrs:{field:\"atime\",title:t.$_L.get(\"创建时间\")}}),n(\"vxe-table-column\",{attrs:{field:\"auser\",title:t.$_L.get(\"创建用户\")}})],1)],1)])},a=[],r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"Window\",{ref:\"w\",attrs:{title:t.$_L.get(\"工况规则维护\"),width:1e3,waiting:t.waiting}},[n(\"div\",{class:t.$style.content},[n(\"InputText\",{staticStyle:{width:\"calc(50% - 2.5px)\"},attrs:{label:t.$_L.get(\"工况名称\"),trim:\"\",required:\"\"},model:{value:t.item.name,callback:function(e){t.$set(t.item,\"name\",e)},expression:\"item.name\"}}),n(\"InputText\",{staticStyle:{width:\"calc(50% - 2.5px)\",float:\"right\"},attrs:{label:t.$_L.get(\"所在地区\"),trim:\"\",required:\"\"},model:{value:t.item.area,callback:function(e){t.$set(t.item,\"area\",e)},expression:\"item.area\"}}),n(\"InputText\",{staticStyle:{width:\"100%\",\"margin-top\":\"5px\"},attrs:{label:t.$_L.get(\"描述\"),trim:\"\"},model:{value:t.item.des,callback:function(e){t.$set(t.item,\"des\",e)},expression:\"item.des\"}}),n(\"vxe-table\",{ref:\"grid\",staticStyle:{border:\"1px solid\",\"margin-top\":\"5px\",height:\"300px\"},style:{borderColor:t.theme.border_color_light},attrs:{data:t.regions}},[n(\"vxe-table-column\",{attrs:{type:\"index\",title:t.$_L.get(\"序号\"),width:\"50\"}}),n(\"vxe-table-column\",{attrs:{field:\"type\",title:t.$_L.get(\"区域\"),width:\"240\",align:\"left\"},scopedSlots:t._u([{key:\"default\",fn:function(e){var i=e.row;return[n(\"InputTree\",{staticStyle:{margin:\"5px -5px\",width:\"calc(100% + 10px)\"},attrs:{getTreeRoots:t.getTreeRoots2,setting:{type:\"all\",callback:{beforeClick:function(t){return\"0\"!=t.type&&\"0\"!=t.pid}},view:{iconCssFunction:t.iconCssFunction1}}},model:{value:i.regionId,callback:function(e){t.$set(i,\"regionId\",e)},expression:\"row.regionId\"}})]}}])}),n(\"vxe-table-column\",{attrs:{field:\"target\",title:t.$_L.get(\"速度\")},scopedSlots:t._u([{key:\"default\",fn:function(e){var i=e.row;return[n(\"InputText\",{staticStyle:{margin:\"5px -5px\",width:\"calc(100% + 10px)\"},attrs:{reg:/\\D/g},model:{value:i.speed,callback:function(e){t.$set(i,\"speed\",e)},expression:\"row.speed\"}})]}}])}),n(\"vxe-table-column\",{attrs:{field:\"content\",title:t.$_L.get(\"里程\")},scopedSlots:t._u([{key:\"default\",fn:function(e){var i=e.row;return[n(\"InputText\",{staticStyle:{margin:\"5px -5px\",width:\"calc(100% + 10px)\"},attrs:{reg:/\\D/g},model:{value:i.mile,callback:function(e){t.$set(i,\"mile\",e)},expression:\"row.mile\"}})]}}])}),n(\"vxe-table-column\",{attrs:{field:\"content\",title:t.$_L.get(\"转速\")},scopedSlots:t._u([{key:\"default\",fn:function(e){var i=e.row;return[n(\"InputText\",{staticStyle:{margin:\"5px -5px\",width:\"calc(100% + 10px)\"},attrs:{reg:/\\D/g},model:{value:i.rev,callback:function(e){t.$set(i,\"rev\",e)},expression:\"row.rev\"}})]}}])}),n(\"vxe-table-column\",{attrs:{field:\"content\",title:t.$_L.get(\"档位\")},scopedSlots:t._u([{key:\"default\",fn:function(e){var i=e.row;return[n(\"InputText\",{staticStyle:{margin:\"5px -5px\",width:\"calc(100% + 10px)\"},attrs:{reg:/\\D/g},model:{value:i.gear,callback:function(e){t.$set(i,\"gear\",e)},expression:\"row.gear\"}})]}}])}),n(\"vxe-table-column\",{attrs:{field:\"content\",title:t.$_L.get(\"油门开合度\")},scopedSlots:t._u([{key:\"default\",fn:function(e){var i=e.row;return[n(\"InputText\",{staticStyle:{margin:\"5px -5px\",width:\"calc(100% + 10px)\"},attrs:{reg:/\\D/g},model:{value:i.appPid,callback:function(e){t.$set(i,\"appPid\",e)},expression:\"row.appPid\"}})]}}])}),n(\"vxe-table-column\",{attrs:{field:\"content\",width:\"40\"},scopedSlots:t._u([{key:\"default\",fn:function(e){e.row;var i=e.rowIndex;return[n(\"i\",{staticClass:\"el-icon-close\",staticStyle:{margin:\"5px 0\",\"font-size\":\"16px\",height:\"32px\",cursor:\"pointer\",\"padding-top\":\"8px\"},on:{click:function(e){return t.regions.splice(i,1)}}})]}}])})],1)],1),n(\"template\",{slot:\"footer\"},[n(\"div\",{staticStyle:{position:\"absolute\"}},[n(\"Button\",{staticStyle:{margin:\"8px\"},attrs:{icon:\"el-icon-plus\"},on:{click:function(e){return t.addAiItemClick()}}},[t._v(t._s(t.$_L.get(\"添加区域\")))])],1),n(\"Button\",{staticStyle:{margin:\"8px 4px\",\"min-width\":\"80px\"},on:{click:function(e){return t.$refs.w.close()}}},[t._v(t._s(t.$_L.get(\"取消\")))]),n(\"Button\",{staticStyle:{margin:\"8px 4px\",\"min-width\":\"80px\"},attrs:{type:\"primary\"},on:{click:function(e){return t.submit()}}},[t._v(t._s(t.$_L.get(\"确定\")))])],1)],2)},l=[],o=(n(\"7f7f\"),n(\"ac6a\"),n(\"67ff\")),s={data:function(){return{waiting:!1,item:{name:null,cars:[],area:null,des:null,regions:[],auser:$_main.userId},cars:[],regions:[],callback:null}},mounted:function(){this.item.id&&(this.regions=JSON.parse(this.item.regions))},methods:{iconCssFunction:function(t,e){return t.carId?null:e?\"ico_open\":\"ico_close\"},iconCssFunction1:function(t,e){return\"0\"==t.type?e?\"ico_open\":\"ico_close\":null},getTreeRoots:function(t){$_main.http.get(\"data/getCars\",{sessionId:$_main.sessionId}).then(function(e){e.carList.forEach(function(t){t.id=t.carId,t.pid=t.teamId,t.name=t.carName}),e.teamList.forEach(function(t){t.id=t.teamId,t.name=t.teamName});var n={id:\"0\",name:$_L.get(\"所有车辆\"),children:[]},i=Object(o[\"a\"])(e.teamList.concat(e.carList));i.forEach(function(t){return t.parent=n}),n.children=i,t(n)})},getTreeRoots1:function(t){$_main.http.get(\"data/getPois\",{sessionId:$_main.sessionId}).then(function(e){var n={id:\"0\",name:$_L.get(\"所有标注\"),children:[]},i=Object(o[\"a\"])(e);i.forEach(function(t){return t.parent=n}),n.children=i,t(n)})},getTreeRoots2:function(t){$_main.http.get(\"data/getRegions\",{sessionId:$_main.sessionId}).then(function(e){var n={id:\"0\",name:$_L.get(\"所有区域\"),children:[]},i=Object(o[\"a\"])(e);i.forEach(function(t){return t.parent=n}),n.children=i,t(n)})},addAiItemClick:function(){this.regions.push({regionId:null,speed:null,mile:null,rev:null,gear:null,appPid:null})},submit:function(){var t=this;if(!this.item.name)return $_alert.warn($_L.get(\"请输入工况名称！\"));if(!this.item.area)return $_alert.warn($_L.get(\"请填写所在地区！\"));if(!this.regions||0==this.regions.length||this.regions.length<2)return $_alert.warn($_L.get(\"请添加标注，标注不能小于2个！\"));for(var e in this.regions)if(!this.regions[e].regionId)return $_alert.warn($_L.get(\"请选择标注点！\"));var n=!this.item.id,i=this.item.id?\"rule/update\":\"rule/add\";this.item.regions=JSON.stringify(this.regions),$_main.http.post(i,this.item).then(function(e){t.callback(e,n),$_alert.success(n?$_L.get(\"新增成功\"):$_L.get(\"修改成功\")),t.$refs.w.close()}).catch(function(e){t.waiting=!1})}}},c=s,u=n(\"5bca\"),d=n(\"2877\");function p(t){this[\"$style\"]=u[\"default\"].locals||u[\"default\"]}var f=Object(d[\"a\"])(c,r,l,!1,p,null,null),m=f.exports,g=n(\"53b0\"),h=n(\"84e0\"),_={data:function(){return{datas:[],selectedItem:null}},created:function(){},mounted:function(){var t=this;$_main.http.get(\"rule/get\",{sessionId:$_main.sessionId,userId:$_main.userId}).then(function(e){t.datas=e})},methods:{addClick:function(){$_popup.open(m,{callback:this.addOrUpdateCallback})},updClick:function(){$_popup.open(m,{item:Object(h[\"a\"])(this.selectedItem),callback:this.addOrUpdateCallback})},addOrUpdateCallback:function(t,e){e?this.datas.push(t):Object(h[\"b\"])(t,this.selectedItem)},delClick:function(){var t=this;$_alert.comfirm($_L.get(\"你确定要删除吗？\"),function(e){e&&$_main.http.get(\"rule/delete\",{id:t.selectedItem.id}).then(function(e){Object(g[\"c\"])(t.datas,t.selectedItem),t.selectedItem=null,$_alert.success($_L.get(\"删除成功\"))})},this.$el)},detailClick:function(){}}},x=_,$=n(\"cb5d\");function v(t){this[\"$style\"]=$[\"default\"].locals||$[\"default\"]}var b=Object(d[\"a\"])(x,i,a,!1,v,null,null);e[\"default\"]=b.exports},cb5d:function(t,e,n){\"use strict\";var i=n(\"d36d\"),a=n.n(i);e[\"default\"]=a.a},d36d:function(t,e,n){t.exports={container:\"CdRuleModule_container_JaCHp\"}}}]);","extractedComments":[]}