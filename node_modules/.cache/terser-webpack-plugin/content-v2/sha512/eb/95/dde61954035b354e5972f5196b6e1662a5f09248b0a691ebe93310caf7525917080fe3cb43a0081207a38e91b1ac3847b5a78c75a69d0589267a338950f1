{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"CdRuleModule\"],{\"5bca\":function(t,e,i){\"use strict\";var n=i(\"9712\"),a=i.n(n);e[\"default\"]=a.a},\"84e0\":function(t,e,i){\"use strict\";function n(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e||!t)return e;for(let n in t)i&&i.has(n)||(e[n]=t[n]);return e}function a(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!t)return t;let i={};for(let n in t)e&&e.has(n)||(i[n]=t[n]);return i}i.d(e,\"b\",function(){return n}),i.d(e,\"a\",function(){return a})},9712:function(t,e,i){t.exports={content:\"AiAddOrUpdateWindow_content_3F7iX\",item:\"AiAddOrUpdateWindow_item_3hifu\"}},a874:function(t,e,i){\"use strict\";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"div\",{class:t.$style.container},[i(\"div\",[i(\"Toolbar\",[i(\"div\",{attrs:{slot:\"right\"},slot:\"right\"},[i(\"Button\",{staticStyle:{\"margin-right\":\"6px\"},attrs:{icon:\"el-icon-plus\",type:\"primary\"},on:{click:function(e){return t.addClick()}}},[t._v(t._s(t.$_L.get(\"新增\")))]),i(\"Button\",{staticStyle:{\"margin-right\":\"6px\"},attrs:{icon:\"el-icon-edit\",type:\"primary\",disabled:!t.selectedItem},on:{click:function(e){return t.updClick()}}},[t._v(t._s(t.$_L.get(\"修改\")))]),i(\"Button\",{staticStyle:{\"margin-right\":\"6px\"},attrs:{icon:\"el-icon-minus\",type:\"primary\",disabled:!t.selectedItem},on:{click:function(e){return t.delClick()}}},[t._v(t._s(t.$_L.get(\"删除\")))])],1)])],1),i(\"div\",{staticStyle:{\"flex-shrink\":\"1\",height:\"100%\",position:\"relative\"}},[i(\"vxe-table\",{ref:\"grid\",staticStyle:{border:\"1px solid #AEBAC5\",\"border-top\":\"0\",position:\"absolute\",left:\"0\",top:\"0\",right:\"0\",bottom:\"0\"},attrs:{data:t.datas,loading:!t.datas},on:{\"cell-click\":function(e){var i=e.row;return t.selectedItem=i}}},[i(\"vxe-table-column\",{attrs:{type:\"index\",title:t.$_L.get(\"序号\"),width:\"50px\"}}),i(\"vxe-table-column\",{attrs:{field:\"name\",title:t.$_L.get(\"工况名称\")}}),i(\"vxe-table-column\",{attrs:{field:\"area\",title:t.$_L.get(\"所在地区\")}}),i(\"vxe-table-column\",{attrs:{field:\"state\",title:t.$_L.get(\"状态\")}}),i(\"vxe-table-column\",{attrs:{field:\"des\",title:t.$_L.get(\"描述\")}}),i(\"vxe-table-column\",{attrs:{field:\"atime\",title:t.$_L.get(\"创建时间\")}}),i(\"vxe-table-column\",{attrs:{field:\"auser\",title:t.$_L.get(\"创建用户\")}})],1)],1)])},a=[],l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"Window\",{ref:\"w\",attrs:{title:t.$_L.get(\"工况规则维护\"),width:1e3,waiting:t.waiting}},[i(\"div\",{class:t.$style.content},[i(\"InputText\",{staticStyle:{width:\"calc(50% - 2.5px)\"},attrs:{label:t.$_L.get(\"工况名称\"),trim:\"\",required:\"\"},model:{value:t.item.name,callback:function(e){t.$set(t.item,\"name\",e)},expression:\"item.name\"}}),i(\"InputText\",{staticStyle:{width:\"calc(50% - 2.5px)\",float:\"right\"},attrs:{label:t.$_L.get(\"所在地区\"),trim:\"\",required:\"\"},model:{value:t.item.area,callback:function(e){t.$set(t.item,\"area\",e)},expression:\"item.area\"}}),i(\"InputText\",{staticStyle:{width:\"100%\",\"margin-top\":\"5px\"},attrs:{label:t.$_L.get(\"描述\"),trim:\"\"},model:{value:t.item.des,callback:function(e){t.$set(t.item,\"des\",e)},expression:\"item.des\"}}),i(\"vxe-table\",{ref:\"grid\",staticStyle:{border:\"1px solid\",\"margin-top\":\"5px\",height:\"300px\"},style:{borderColor:t.theme.border_color_light},attrs:{data:t.regions}},[i(\"vxe-table-column\",{attrs:{type:\"index\",title:t.$_L.get(\"序号\"),width:\"50\"}}),i(\"vxe-table-column\",{attrs:{field:\"type\",title:t.$_L.get(\"区域\"),width:\"240\",align:\"left\"},scopedSlots:t._u([{key:\"default\",fn:function(e){var n=e.row;return[i(\"InputTree\",{staticStyle:{margin:\"5px -5px\",width:\"calc(100% + 10px)\"},attrs:{getTreeRoots:t.getTreeRoots2,setting:{type:\"all\",callback:{beforeClick:function(t){return\"0\"!=t.type&&\"0\"!=t.pid}},view:{iconCssFunction:t.iconCssFunction1}}},model:{value:n.regionId,callback:function(e){t.$set(n,\"regionId\",e)},expression:\"row.regionId\"}})]}}])}),i(\"vxe-table-column\",{attrs:{field:\"target\",title:t.$_L.get(\"速度\")},scopedSlots:t._u([{key:\"default\",fn:function(e){var n=e.row;return[i(\"InputText\",{staticStyle:{margin:\"5px -5px\",width:\"calc(100% + 10px)\"},attrs:{reg:/\\D/g},model:{value:n.speed,callback:function(e){t.$set(n,\"speed\",e)},expression:\"row.speed\"}})]}}])}),i(\"vxe-table-column\",{attrs:{field:\"content\",title:t.$_L.get(\"里程\")},scopedSlots:t._u([{key:\"default\",fn:function(e){var n=e.row;return[i(\"InputText\",{staticStyle:{margin:\"5px -5px\",width:\"calc(100% + 10px)\"},attrs:{reg:/\\D/g},model:{value:n.mile,callback:function(e){t.$set(n,\"mile\",e)},expression:\"row.mile\"}})]}}])}),i(\"vxe-table-column\",{attrs:{field:\"content\",title:t.$_L.get(\"转速\")},scopedSlots:t._u([{key:\"default\",fn:function(e){var n=e.row;return[i(\"InputText\",{staticStyle:{margin:\"5px -5px\",width:\"calc(100% + 10px)\"},attrs:{reg:/\\D/g},model:{value:n.rev,callback:function(e){t.$set(n,\"rev\",e)},expression:\"row.rev\"}})]}}])}),i(\"vxe-table-column\",{attrs:{field:\"content\",title:t.$_L.get(\"档位\")},scopedSlots:t._u([{key:\"default\",fn:function(e){var n=e.row;return[i(\"InputText\",{staticStyle:{margin:\"5px -5px\",width:\"calc(100% + 10px)\"},attrs:{reg:/\\D/g},model:{value:n.gear,callback:function(e){t.$set(n,\"gear\",e)},expression:\"row.gear\"}})]}}])}),i(\"vxe-table-column\",{attrs:{field:\"content\",title:t.$_L.get(\"油门开合度\")},scopedSlots:t._u([{key:\"default\",fn:function(e){var n=e.row;return[i(\"InputText\",{staticStyle:{margin:\"5px -5px\",width:\"calc(100% + 10px)\"},attrs:{reg:/\\D/g},model:{value:n.appPid,callback:function(e){t.$set(n,\"appPid\",e)},expression:\"row.appPid\"}})]}}])}),i(\"vxe-table-column\",{attrs:{field:\"content\",width:\"40\"},scopedSlots:t._u([{key:\"default\",fn:function(e){e.row;var n=e.rowIndex;return[i(\"i\",{staticClass:\"el-icon-close\",staticStyle:{margin:\"5px 0\",\"font-size\":\"16px\",height:\"32px\",cursor:\"pointer\",\"padding-top\":\"8px\"},on:{click:function(e){return t.regions.splice(n,1)}}})]}}])})],1)],1),i(\"template\",{slot:\"footer\"},[i(\"div\",{staticStyle:{position:\"absolute\"}},[i(\"Button\",{staticStyle:{margin:\"8px\"},attrs:{icon:\"el-icon-plus\"},on:{click:function(e){return t.addAiItemClick()}}},[t._v(t._s(t.$_L.get(\"添加区域\")))])],1),i(\"Button\",{staticStyle:{margin:\"8px 4px\",\"min-width\":\"80px\"},on:{click:function(e){return t.$refs.w.close()}}},[t._v(t._s(t.$_L.get(\"取消\")))]),i(\"Button\",{staticStyle:{margin:\"8px 4px\",\"min-width\":\"80px\"},attrs:{type:\"primary\"},on:{click:function(e){return t.submit()}}},[t._v(t._s(t.$_L.get(\"确定\")))])],1)],2)},r=[],s=(i(\"ac6a\"),i(\"67ff\")),o={data:function(){return{waiting:!1,item:{name:null,cars:[],area:null,des:null,regions:[],auser:$_main.userId},cars:[],regions:[],callback:null}},mounted(){this.item.id&&(this.regions=JSON.parse(this.item.regions))},methods:{iconCssFunction(t,e){return t.carId?null:e?\"ico_open\":\"ico_close\"},iconCssFunction1(t,e){return\"0\"==t.type?e?\"ico_open\":\"ico_close\":null},getTreeRoots(t){$_main.http.get(\"data/getCars\",{sessionId:$_main.sessionId}).then(e=>{e.carList.forEach(t=>{t.id=t.carId,t.pid=t.teamId,t.name=t.carName}),e.teamList.forEach(t=>{t.id=t.teamId,t.name=t.teamName});let i={id:\"0\",name:$_L.get(\"所有车辆\"),children:[]},n=Object(s[\"a\"])(e.teamList.concat(e.carList));n.forEach(t=>t.parent=i),i.children=n,t(i)})},getTreeRoots1(t){$_main.http.get(\"data/getPois\",{sessionId:$_main.sessionId}).then(e=>{let i={id:\"0\",name:$_L.get(\"所有标注\"),children:[]},n=Object(s[\"a\"])(e);n.forEach(t=>t.parent=i),i.children=n,t(i)})},getTreeRoots2(t){$_main.http.get(\"data/getRegions\",{sessionId:$_main.sessionId}).then(e=>{let i={id:\"0\",name:$_L.get(\"所有区域\"),children:[]},n=Object(s[\"a\"])(e);n.forEach(t=>t.parent=i),i.children=n,t(i)})},addAiItemClick(){this.regions.push({regionId:null,speed:null,mile:null,rev:null,gear:null,appPid:null})},submit(){if(!this.item.name)return $_alert.warn($_L.get(\"请输入工况名称！\"));if(!this.item.area)return $_alert.warn($_L.get(\"请填写所在地区！\"));if(!this.regions||0==this.regions.length||this.regions.length<2)return $_alert.warn($_L.get(\"请添加标注，标注不能小于2个！\"));for(let i in this.regions)if(!this.regions[i].regionId)return $_alert.warn($_L.get(\"请选择标注点！\"));let t=!this.item.id,e=this.item.id?\"rule/update\":\"rule/add\";this.item.regions=JSON.stringify(this.regions),$_main.http.post(e,this.item).then(e=>{this.callback(e,t),$_alert.success(t?$_L.get(\"新增成功\"):$_L.get(\"修改成功\")),this.$refs.w.close()}).catch(t=>{this.waiting=!1})}}},c=o,d=i(\"5bca\"),u=i(\"2877\");function p(t){this[\"$style\"]=d[\"default\"].locals||d[\"default\"]}var m=Object(u[\"a\"])(c,l,r,!1,p,null,null),g=m.exports,f=i(\"53b0\"),h=i(\"84e0\"),_={data(){return{datas:[],selectedItem:null}},created(){},mounted(){$_main.http.get(\"rule/get\",{sessionId:$_main.sessionId,userId:$_main.userId}).then(t=>{this.datas=t})},methods:{addClick(){$_popup.open(g,{callback:this.addOrUpdateCallback})},updClick(){$_popup.open(g,{item:Object(h[\"a\"])(this.selectedItem),callback:this.addOrUpdateCallback})},addOrUpdateCallback(t,e){e?this.datas.push(t):Object(h[\"b\"])(t,this.selectedItem)},delClick(){$_alert.comfirm($_L.get(\"你确定要删除吗？\"),t=>{t&&$_main.http.get(\"rule/delete\",{id:this.selectedItem.id}).then(t=>{Object(f[\"c\"])(this.datas,this.selectedItem),this.selectedItem=null,$_alert.success($_L.get(\"删除成功\"))})},this.$el)},detailClick(){}}},x=_,$=i(\"cb5d\");function b(t){this[\"$style\"]=$[\"default\"].locals||$[\"default\"]}var v=Object(u[\"a\"])(x,n,a,!1,b,null,null);e[\"default\"]=v.exports},cb5d:function(t,e,i){\"use strict\";var n=i(\"d36d\"),a=i.n(n);e[\"default\"]=a.a},d36d:function(t,e,i){t.exports={container:\"CdRuleModule_container_JaCHp\"}}}]);","extractedComments":[]}