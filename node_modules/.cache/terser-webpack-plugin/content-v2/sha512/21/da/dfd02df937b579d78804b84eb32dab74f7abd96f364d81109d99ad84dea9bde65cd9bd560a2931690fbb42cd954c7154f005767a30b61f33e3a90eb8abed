{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"CdInfoRModule\"],{\"052a\":function(t,e,n){t.exports={container:\"CdInfoRModule_container_32HK2\"}},\"38d2\":function(t,e,n){\"use strict\";var a=n(\"bf45\"),i=n.n(a);e[\"default\"]=i.a},\"84e0\":function(t,e,n){\"use strict\";function a(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e||!t)return e;for(var a in t)n&&n.has(a)||(e[a]=t[a]);return e}function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!t)return t;var n={};for(var a in t)e&&e.has(a)||(n[a]=t[a]);return n}n.d(e,\"b\",function(){return a}),n.d(e,\"a\",function(){return i})},9948:function(t,e,n){\"use strict\";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",{class:t.$style.container},[n(\"div\",[n(\"Toolbar\",[n(\"InputRadio\",{attrs:{label:t.$_L.get(\"任务状态\"),options:[{label:t.$_L.get(\"未执行\"),value:0},{label:t.$_L.get(\"执行中\"),value:1}]},model:{value:t.taskState,callback:function(e){t.taskState=e},expression:\"taskState\"}}),n(\"Button\",{attrs:{type:\"primary\",icon:t.querying?\"el-icon-close\":\"el-icon-search\"},on:{click:function(e){t.querying?t.toFinish():t.search()}}},[t._v(t._s(t.$_L.get(\"查询\")))]),n(\"div\",{attrs:{slot:\"right\"},slot:\"right\"},[n(\"Button\",{staticStyle:{\"margin-right\":\"6px\"},attrs:{icon:\"el-icon-plus\",type:\"primary\"},on:{click:function(e){return t.editClick()}}},[t._v(t._s(t.$_L.get(\"分配\")))])],1)],1)],1),n(\"div\",{staticStyle:{\"flex-shrink\":\"1\",height:\"100%\",position:\"relative\"}},[n(\"vxe-table\",{ref:\"grid\",staticStyle:{border:\"1px solid #AEBAC5\",\"border-top\":\"0\",position:\"absolute\",left:\"0\",top:\"0\",right:\"0\",bottom:\"0\"},attrs:{data:t.datas,loading:!t.datas},on:{\"cell-click\":function(e){var n=e.row;return t.selectedItem=n}}},[n(\"vxe-table-column\",{attrs:{type:\"index\",title:t.$_L.get(\"序号\"),width:\"50px\"}}),n(\"vxe-table-column\",{attrs:{field:\"taskName\",title:t.$_L.get(\"工况名称\")}}),n(\"vxe-table-column\",{attrs:{field:\"taskState\",title:t.$_L.get(\"任务状态\"),formatter:function(e){var n=e.cellValue;return\"1\"==n?t.$_L.get(\"执行中\"):t.$_L.get(\"未执行\")}}}),n(\"vxe-table-column\",{attrs:{field:\"startMile\",title:t.$_L.get(\"开始里程\")}}),n(\"vxe-table-column\",{attrs:{field:\"endMile\",title:t.$_L.get(\"结束里程\")}}),n(\"vxe-table-column\",{attrs:{field:\"mile\",title:t.$_L.get(\"总里程\")}}),n(\"vxe-table-column\",{attrs:{field:\"score\",title:t.$_L.get(\"得分\")}}),n(\"vxe-table-column\",{attrs:{field:\"des\",title:t.$_L.get(\"描述\")}}),n(\"vxe-table-column\",{attrs:{field:\"atime\",title:t.$_L.get(\"创建时间\")}}),n(\"vxe-table-column\",{attrs:{field:\"auser\",title:t.$_L.get(\"创建用户\")}})],1)],1)])},i=[],l=(n(\"386d\"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"Window\",{ref:\"w\",attrs:{title:t.$_L.get(\"分配工况\"),width:300,waiting:t.waiting}},[n(\"div\",{class:t.$style.content},[n(\"InputText\",{staticStyle:{width:\"100%\"},attrs:{label:t.$_L.get(\"任务名称\"),trim:\"\",required:\"\"},model:{value:t.taskName,callback:function(e){t.taskName=e},expression:\"taskName\"}}),n(\"InputSelect\",{staticStyle:{width:\"100%\",\"margin-top\":\"5px\",float:\"left\"},attrs:{label:t.$_L.get(\"工况\"),labelField:\"name\",valueField:\"id\",options:t.options,trim:\"\",required:\"\"},model:{value:t.cdId,callback:function(e){t.cdId=e},expression:\"cdId\"}}),n(\"InputTree\",{staticStyle:{width:\"100%\",\"margin-top\":\"5px\"},attrs:{label:t.$_L.get(\"车辆\"),required:\"\",getTreeRoots:t.getTreeRoots,hasOwnField:\"carId\",setting:{view:{iconCssFunction:t.iconCssFunction}},required:\"\"},model:{value:t.carId,callback:function(e){t.carId=e},expression:\"carId\"}})],1),n(\"template\",{slot:\"footer\"},[n(\"Button\",{staticStyle:{margin:\"8px 4px\",\"min-width\":\"80px\"},on:{click:function(e){return t.$refs.w.close()}}},[t._v(t._s(t.$_L.get(\"取消\")))]),n(\"Button\",{staticStyle:{margin:\"8px 4px\",\"min-width\":\"80px\"},attrs:{type:\"primary\"},on:{click:function(e){return t.submit()}}},[t._v(t._s(t.$_L.get(\"确定\")))])],1)],2)}),r=[],s=(n(\"ac6a\"),n(\"67ff\")),o={data:function(){return{taskName:null,options:[],carId:null,cdId:null,callback:null,waiting:!1}},mounted:function(){this.options=$_main.http.syncGet(\"rule/get\",{sessionId:$_main.sessionId,userId:$_main.userId})||[]},methods:{iconCssFunction:function(t,e){return t.carId?null:e?\"ico_open\":\"ico_close\"},getTreeRoots:function(t){$_main.http.get(\"data/getCars\",{sessionId:$_main.sessionId}).then(function(e){e.carList.forEach(function(t){t.id=t.carId,t.pid=t.teamId,t.name=t.carName}),e.teamList.forEach(function(t){t.id=t.teamId,t.name=t.teamName});var n={id:\"0\",name:$_L.get(\"所有车辆\"),children:[]},a=Object(s[\"a\"])(e.teamList.concat(e.carList));a.forEach(function(t){return t.parent=n}),n.children=a,t(n)})},submit:function(){var t=this;if(!this.taskName)return $_alert.warn($_L.get(\"请输入任务名称！\"));if(!this.cdId)return $_alert.warn($_L.get(\"请选择工况！\"));if(!this.carId)return $_alert.warn($_L.get(\"请选择关联车辆！\"));var e={cdId:this.cdId,carId:this.carId,taskName:this.taskName,auser:$_main.userId};$_main.http.post(\"info/allot\",e).then(function(e){t.callback(e),$_alert.success($_L.get(\"操作成功\")),t.$refs.w.close()}).catch(function(e){t.waiting=!1})}}},c=o,u=n(\"38d2\"),d=n(\"2877\");function f(t){this[\"$style\"]=u[\"default\"].locals||u[\"default\"]}var m=Object(d[\"a\"])(c,l,r,!1,f,null,null),h=m.exports,_=(n(\"84e0\"),{data:function(){return{querying:!1,datas:[],taskState:1,selectedItem:null}},created:function(){},mounted:function(){this.search()},methods:{search:function(){var t=this;this.querying=!0,$_main.http.get(\"info/getInfo\",{sessionId:$_main.sessionId,userId:$_main.userId,taskState:this.taskState}).then(function(e){t.datas=e,t.toFinish()})},toFinish:function(){if(console.log(122),this.querying=!1,!this.datas||0==this.datas.length)return $_alert.warn($_L.get(\"暂无数据！\"))},editClick:function(){$_popup.open(h,{callback:this.addOrUpdateCallback})},addOrUpdateCallback:function(){this.search()}}}),g=_,p=n(\"e1fc7\");function $(t){this[\"$style\"]=p[\"default\"].locals||p[\"default\"]}var v=Object(d[\"a\"])(g,a,i,!1,$,null,null);e[\"default\"]=v.exports},bf45:function(t,e,n){t.exports={content:\"EditWindow_content_JQbLp\",item:\"EditWindow_item_2Gdl-\"}},e1fc7:function(t,e,n){\"use strict\";var a=n(\"052a\"),i=n.n(a);e[\"default\"]=i.a}}]);","extractedComments":[]}