(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["CdRuleModule"],{"5bca":function(e,t,i){"use strict";var a=i("9712"),n=i.n(a);t["default"]=n.a},9712:function(e,t,i){e.exports={content:"AiAddOrUpdateWindow_content_3F7iX",item:"AiAddOrUpdateWindow_item_3hifu"}},"98b1":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAUCAYAAADlep81AAADPklEQVRIS7WW3W8UZRTGn+ed7a4tqSZVURtg9itptlX8YDVcyh0XJHJhK0FvjE0gEkX+EqKx5UNDjOGjJJj0gshl453gEkhMW5r9aKuxAheQWNvuZjPzkHeyuw4ra3e3+N7OnHN+Oef3nhlii2dlZaVvdXW1z6bp7+9fHxwcXN9KSm4lOJ/Pvxh1nP2S9tk8NOanquddS6fT97vN2zXQwsLCC7GenkOQPhb5VgAE3Jb0Hcrly4mRkbvdQHUFND8//3xvLHYIwFEBr4YLE7gD6RufvJBMJu91CtUxkB1TjzGjID8DMKSgMY8fSgUBkxuVytTw8PCfnUB1BLQ4O/sy+vrGKNnOZDYplKd0er1SudQJVNtA1ploNHoY0jiA10IwDyHlAIhkVsBA/RmlWQDnVC5fbNeptoBqAn/Q7AyJNQjT9P1TvuN4kI6SeF/CtgYUsADpbLtObQrUyhkCHoBLIifi8fgNC/B7qbTHI48R+FBAJNSpAoBT7YzvP4EKhcL2iDFjAD5tcqZC6Qc4zteu614n6dvikri4uPg2gWMAbNwzodHmCZypVKtTQ0NDf7TyryVQY88A4wJe/2cE+lvgjyBPxuNxC6Pm5L8Vi1kfOCHgAMhnQ52aA3lOGxsXWjn1RKBWe8Y6I+FqDeaXemeagWyn7Ph88gsQBztx6l9AwW2KREZJfh7eM3VnYMxkeEytWi/JWCjZcZMftevUY0CBwI4zBskmGQ4VqxC4AmMm2oGpxzU5NQqgdzOnGkAhgT8R8EYjUPqLwFUZ81Uikbjeydatv7uZU+vl8sVMJnPX+hgAFYvF5wxw2N4OkSNhgQFOw5iTruveepLA7QA2nAJOwPC9JqfuSDpt1ta+d3fvfhgALS8vj8jzvhWwN1SgSum8ASZ3JpM3u4UJja+lUwBuRKTxnanUrwHQ0tLSm/K8aZC7agnKRpoiMLErlbKfhad2SqXSO7U9Zf8WorXEyyAPJhKJ2wHQ3NzcK72x2HGQ7wIwAG4Z3z/rptM3nxpJKFHgFHnE7jd7eyXNiPzS/q4EQDMzMxHXdVMOuVe+7zhk7t6DB/PZbLb6fwDlcrmelwYGMp6UJVk10s87kskSSe8RC2CdJEcdKYoAAAAASUVORK5CYII="},a5fc:function(e,t,i){e.exports={content:"DirAddOrUpdateWindow_content_1KTnx",item:"DirAddOrUpdateWindow_item_2YFgO"}},a874:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.$style.container},[a("div",{staticStyle:{width:"20%",border:"1px solid #AEBAC5",background:"#fff"}},[a("Button",{staticStyle:{width:"100%"},attrs:{type:"primary"}},[e._v(e._s(e.$_L.get("场地")))]),a("div",{staticStyle:{height:"calc(100% - 74px)",overflow:"auto",width:"100%","background-color":"#fff"}},[a("ul",{class:e.$style.left_ul},e._l(e.place,function(t,n){return a("li",{key:n},[a("div",{staticStyle:{margin:"0"},style:!t.children&&e.cmpIndex.id==t.id&&{backgroundColor:e.theme.selected_color},on:{click:function(i){return e.click(t)}}},[a("span",{class:!t.children&&e.cmpIndex.id==t.id&&e.$style.indexbgc,style:{backgroundColor:e.theme.color}}),e._v("\n           "+e._s(t.name)+"\n            "),a("img",{directives:[{name:"show",rawName:"v-show",value:t.children,expression:"item.children"}],class:[t.isopen&&t.children&&e.$style.isopen||e.$style.isclose],attrs:{src:i("98b1"),alt:""}})]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isopen,expression:"item.isopen"}],staticStyle:{margin:"0",padding:"0"}},e._l(t.children,function(t,i){return a("div",{key:i},[a("li",{class:t.children&&e.$style.layers,style:[(e.cmpIndex.id==t.id||t.children)&&{backgroundColor:e.theme.selected_color},{paddingLeft:t.children?"40px":"60px"}],on:{click:function(i){return e.click(t)}}},[a("span",{class:e.cmpIndex.id==t.id&&e.$style.indexbgc,style:{backgroundColor:e.theme.color}}),e._v(" "+e._s(t.name)+"\n              ")])])}),0)])}),0)]),a("div",{staticStyle:{padding:"5px",display:"flex","border-top":"1px solid #ccc"}},[a("Button",{staticStyle:{"margin-right":"6px",flex:"1"},attrs:{icon:"el-icon-plus",type:"primary"},on:{click:function(t){return e.addDirClick()}}},[e._v(e._s(e.$_L.get("新增")))]),a("Button",{staticStyle:{"margin-right":"6px",flex:"1"},attrs:{icon:"el-icon-edit",type:"primary",disabled:!e.cmpIndex.id},on:{click:function(t){return e.updDirClick()}}},[e._v(e._s(e.$_L.get("修改")))]),a("Button",{staticStyle:{flex:"1"},attrs:{icon:"el-icon-minus",type:"primary",disabled:!e.cmpIndex.id},on:{click:function(t){return e.delDirClick()}}},[e._v(e._s(e.$_L.get("删除")))])],1)],1),a("div",{staticStyle:{width:"calc(80% - 5px)","margin-left":"5px",display:"flex","flex-flow":"column"}},[a("div",[a("Toolbar",[a("div",{attrs:{slot:"right"},slot:"right"},[a("Button",{staticStyle:{"margin-right":"6px"},attrs:{icon:"el-icon-plus",type:"primary",disabled:!e.cmpIndex.id||!e.place||0==e.place.length},on:{click:function(t){return e.addClick()}}},[e._v(e._s(e.$_L.get("新增")))]),a("Button",{staticStyle:{"margin-right":"6px"},attrs:{icon:"el-icon-edit",type:"primary",disabled:!e.selectedItem},on:{click:function(t){return e.updClick()}}},[e._v(e._s(e.$_L.get("修改")))]),a("Button",{staticStyle:{"margin-right":"6px"},attrs:{icon:"el-icon-minus",type:"primary",disabled:!e.selectedItem},on:{click:function(t){return e.delClick()}}},[e._v(e._s(e.$_L.get("删除")))])],1)])],1),a("div",{staticStyle:{"flex-shrink":"1",height:"100%",position:"relative"}},[a("vxe-table",{ref:"grid",staticStyle:{border:"1px solid #AEBAC5","border-top":"0",position:"absolute",left:"0",top:"0",right:"0",bottom:"0"},attrs:{data:e.datas,loading:!e.datas},on:{"cell-click":function(t){var i=t.row;return e.selectedItem=i}}},[a("vxe-table-column",{attrs:{type:"index",title:e.$_L.get("序号"),width:"50px"}}),a("vxe-table-column",{attrs:{field:"name",title:e.$_L.get("工况名称")}}),a("vxe-table-column",{attrs:{field:"state",title:e.$_L.get("状态"),formatter:function(t){var i=t.cellValue;return"1"==i?e.$_L.get("正常"):e.$_L.get("关闭")}}}),a("vxe-table-column",{attrs:{field:"des",title:e.$_L.get("描述")}}),a("vxe-table-column",{attrs:{field:"atime",title:e.$_L.get("创建时间")}}),a("vxe-table-column",{attrs:{field:"auser",title:e.$_L.get("创建用户")}})],1)],1)])])},n=[],l=(i("ac6a"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Window",{ref:"w",attrs:{title:e.$_L.get("工况规则维护"),width:1e3,waiting:e.waiting}},[i("div",{class:e.$style.content},[i("InputText",{staticStyle:{width:"100%"},attrs:{label:e.$_L.get("工况名称"),trim:"",required:""},model:{value:e.item.name,callback:function(t){e.$set(e.item,"name",t)},expression:"item.name"}}),i("InputText",{staticStyle:{width:"100%","margin-top":"5px"},attrs:{label:e.$_L.get("描述"),trim:""},model:{value:e.item.des,callback:function(t){e.$set(e.item,"des",t)},expression:"item.des"}}),i("vxe-table",{ref:"grid",staticStyle:{border:"1px solid","margin-top":"5px",height:"300px"},style:{borderColor:e.theme.border_color_light},attrs:{data:e.regions}},[i("vxe-table-column",{attrs:{type:"index",title:e.$_L.get("序号"),width:"50"}}),i("vxe-table-column",{attrs:{field:"type",title:e.$_L.get("区域"),width:"240",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[i("InputTree",{staticStyle:{margin:"5px -5px",width:"calc(100% + 10px)"},attrs:{getTreeRoots:e.getTreeRoots2,setting:{type:"all",callback:{beforeClick:function(e){return"0"!=e.type&&"0"!=e.pid}},view:{iconCssFunction:e.iconCssFunction1}}},model:{value:a.regionId,callback:function(t){e.$set(a,"regionId",t)},expression:"row.regionId"}})]}}])}),i("vxe-table-column",{attrs:{field:"target",title:e.$_L.get("速度")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[i("InputText",{staticStyle:{margin:"5px -5px",width:"calc(100% + 10px)"},attrs:{reg:/\D/g},model:{value:a.speed,callback:function(t){e.$set(a,"speed",t)},expression:"row.speed"}})]}}])}),i("vxe-table-column",{attrs:{field:"content",title:e.$_L.get("里程")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[i("InputText",{staticStyle:{margin:"5px -5px",width:"calc(100% + 10px)"},attrs:{reg:/\D/g},model:{value:a.mile,callback:function(t){e.$set(a,"mile",t)},expression:"row.mile"}})]}}])}),i("vxe-table-column",{attrs:{field:"content",title:e.$_L.get("转速")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[i("InputText",{staticStyle:{margin:"5px -5px",width:"calc(100% + 10px)"},attrs:{reg:/\D/g},model:{value:a.rev,callback:function(t){e.$set(a,"rev",t)},expression:"row.rev"}})]}}])}),i("vxe-table-column",{attrs:{field:"content",title:e.$_L.get("档位")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[i("InputText",{staticStyle:{margin:"5px -5px",width:"calc(100% + 10px)"},attrs:{reg:/\D/g},model:{value:a.gear,callback:function(t){e.$set(a,"gear",t)},expression:"row.gear"}})]}}])}),i("vxe-table-column",{attrs:{field:"content",title:e.$_L.get("油门开合度")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[i("InputText",{staticStyle:{margin:"5px -5px",width:"calc(100% + 10px)"},attrs:{reg:/\D/g},model:{value:a.appPid,callback:function(t){e.$set(a,"appPid",t)},expression:"row.appPid"}})]}}])}),i("vxe-table-column",{attrs:{field:"content",width:"40"},scopedSlots:e._u([{key:"default",fn:function(t){t.row;var a=t.rowIndex;return[i("i",{staticClass:"el-icon-close",staticStyle:{margin:"5px 0","font-size":"16px",height:"32px",cursor:"pointer","padding-top":"8px"},on:{click:function(t){return e.regions.splice(a,1)}}})]}}])})],1)],1),i("template",{slot:"footer"},[i("div",{staticStyle:{position:"absolute"}},[i("Button",{staticStyle:{margin:"8px"},attrs:{icon:"el-icon-plus"},on:{click:function(t){return e.addAiItemClick()}}},[e._v(e._s(e.$_L.get("添加区域")))])],1),i("Button",{staticStyle:{margin:"8px 4px","min-width":"80px"},on:{click:function(t){return e.$refs.w.close()}}},[e._v(e._s(e.$_L.get("取消")))]),i("Button",{staticStyle:{margin:"8px 4px","min-width":"80px"},attrs:{type:"primary"},on:{click:function(t){return e.submit()}}},[e._v(e._s(e.$_L.get("确定")))])],1)],2)}),s=[],r=i("67ff"),c={data:function(){return{waiting:!1,item:{name:null,cars:[],area:null,des:null,regions:[],auser:$_main.userId},cars:[],regions:[],callback:null}},mounted(){this.item.id&&(this.regions=JSON.parse(this.item.regions))},methods:{iconCssFunction(e,t){return e.carId?null:t?"ico_open":"ico_close"},iconCssFunction1(e,t){return"0"==e.type?t?"ico_open":"ico_close":null},getTreeRoots(e){$_main.http.get("data/getCars",{sessionId:$_main.sessionId}).then(t=>{t.carList.forEach(e=>{e.id=e.carId,e.pid=e.teamId,e.name=e.carName}),t.teamList.forEach(e=>{e.id=e.teamId,e.name=e.teamName});let i={id:"0",name:$_L.get("所有车辆"),children:[]},a=Object(r["a"])(t.teamList.concat(t.carList));a.forEach(e=>e.parent=i),i.children=a,e(i)})},getTreeRoots1(e){$_main.http.get("data/getPois",{sessionId:$_main.sessionId}).then(t=>{let i={id:"0",name:$_L.get("所有标注"),children:[]},a=Object(r["a"])(t);a.forEach(e=>e.parent=i),i.children=a,e(i)})},getTreeRoots2(e){$_main.http.get("data/getRegions",{sessionId:$_main.sessionId}).then(t=>{let i={id:"0",name:$_L.get("所有区域"),children:[]},a=Object(r["a"])(t);a.forEach(e=>e.parent=i),i.children=a,e(i)})},addAiItemClick(){this.regions.push({regionId:null,speed:null,mile:null,rev:null,gear:null,appPid:null})},submit(){if(!this.item.name)return $_alert.warn($_L.get("请输入工况名称！"));if(!this.regions||0==this.regions.length)return $_alert.warn($_L.get("请添加标注，标注不能小于1个！"));for(let i in this.regions)if(!this.regions[i].regionId)return $_alert.warn($_L.get("请选择标注点！"));let e=!this.item.id,t=this.item.id?"rule/update":"rule/add";this.item.regions=JSON.stringify(this.regions),$_main.http.post(t,this.item).then(t=>{this.callback(t,e),$_alert.success(e?$_L.get("新增成功"):$_L.get("修改成功")),this.$refs.w.close()}).catch(e=>{this.waiting=!1})}}},o=c,d=i("5bca"),u=i("2877");function p(e){this["$style"]=d["default"].locals||d["default"]}var m=Object(u["a"])(o,l,s,!1,p,null,null),h=m.exports,g=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Window",{ref:"w",attrs:{width:500,waiting:e.waiting}},[i("div",{class:e.$style.content},[i("InputSelect",{staticStyle:{width:"100%",float:"left"},attrs:{label:e.$_L.get("地区"),trim:"",options:e.areas,labelField:"name",valueField:"name",required:""},model:{value:e.item.area,callback:function(t){e.$set(e.item,"area",t)},expression:"item.area"}}),i("InputText",{staticStyle:{width:"100%","margin-top":"5px"},attrs:{label:e.$_L.get("场地名称"),trim:"",required:""},model:{value:e.item.name,callback:function(t){e.$set(e.item,"name",t)},expression:"item.name"}}),i("InputRadio",{staticStyle:{width:"100%","margin-top":"5px"},attrs:{label:e.$_L.get("状态"),options:[{label:e.$_L.get("开启"),value:"1"},{label:e.$_L.get("关闭"),value:"0"}]},model:{value:e.item.state,callback:function(t){e.$set(e.item,"state",t)},expression:"item.state"}}),i("InputText",{staticStyle:{width:"100%","margin-top":"5px"},attrs:{label:e.$_L.get("描述"),trim:""},model:{value:e.item.des,callback:function(t){e.$set(e.item,"des",t)},expression:"item.des"}})],1),i("template",{slot:"footer"},[i("Button",{staticStyle:{margin:"8px 4px","min-width":"80px"},on:{click:function(t){return e.$refs.w.close()}}},[e._v(e._s(e.$_L.get("取消")))]),i("Button",{staticStyle:{margin:"8px 4px","min-width":"80px"},attrs:{type:"primary"},on:{click:function(t){return e.submit()}}},[e._v(e._s(e.$_L.get("确定")))])],1)],2)},f=[],_={data:function(){return{waiting:!1,item:{name:null,state:"1",area:null,des:null,auser:$_main.userId},areas:null,callback:null}},mounted(){},methods:{submit(){if(!this.item.area)return $_alert.warn($_L.get("请选择地区！"));if(!this.item.name)return $_alert.warn($_L.get("请输入场地名称！"));let e=!this.item.id;this.waiting=!0,$_main.http.post("place/addOrUpdate",this.item).then(t=>{this.waiting=!1,this.callback(t,e),$_alert.success(e?$_L.get("新增成功"):$_L.get("修改成功")),this.$refs.w.close()}).catch(e=>{this.waiting=!1})}}},x=_,$=i("aafe");function b(e){this["$style"]=$["default"].locals||$["default"]}var v=Object(u["a"])(x,g,f,!1,b,null,null),y=v.exports,w=i("53b0");function k(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!t||!e)return t;for(let a in e)i&&i.has(a)||(t[a]=e[a]);return t}function I(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e)return e;let i={};for(let a in e)t&&t.has(a)||(i[a]=e[a]);return i}var L={data(){return{areas:[{name:"黑龙江省"},{name:"辽宁省"},{name:"吉林省"},{name:"河北省"},{name:"河南省"},{name:"湖北省"},{name:"湖南省"},{name:"山东省"},{name:"山西省"},{name:"陕西省"},{name:"安徽省"},{name:"浙江省"},{name:"江苏省"},{name:"福建省"},{name:"广东省"},{name:"海南省"},{name:"四川省"},{name:"云南省"},{name:"贵州省"},{name:"青海省"},{name:"甘肃省"},{name:"江西省"},{name:"台湾省"},{name:"内蒙古自治区"},{name:"宁夏回族自治区"},{name:"新疆维吾尔自治区"},{name:"西藏自治区"},{name:"广西壮族自治区"},{name:"北京市"},{name:"上海市"},{name:"天津市"},{name:"重庆市"},{name:"香港特别行政区"},{name:"澳门特别行政区"}],datas:[],list:[],place:[],cmpIndex:{id:null},selected:null,selectedItem:null,index:0}},created(){},mounted(){$_main.http.get("rule/get",{sessionId:$_main.sessionId,userId:$_main.userId}).then(e=>{this.list=e}),this.getPlace()},methods:{getPlace(){$_main.http.get("place/get",{sessionId:$_main.sessionId,userId:$_main.userId}).then(e=>{let t=this.areas.filter(t=>e.some(e=>e.area==t.name))||[],i=[];t.forEach(t=>{t.isopen=!1,t.children=[],e.forEach(e=>{t.name==e.area&&t.children.push(e)}),i.push(t)}),this.place=i})},addClick(){let e={name:null,cars:[],area:this.cmpIndex.area,des:null,regions:[],auser:$_main.userId,placeId:this.cmpIndex.id};$_popup.open(h,{item:e,callback:this.addOrUpdateCallback})},updClick(){$_popup.open(h,{item:I(this.selectedItem),callback:this.addOrUpdateCallback})},addOrUpdateCallback(e,t){t?(this.datas.push(e),this.list.push(e)):k(e,this.selectedItem)},delClick(){$_alert.comfirm($_L.get("你确定要删除吗？"),e=>{e&&$_main.http.get("rule/delete",{id:this.selectedItem.id}).then(e=>{Object(w["c"])(this.datas,this.selectedItem),Object(w["c"])(this.list,this.selectedItem),this.selectedItem=null,$_alert.success($_L.get("删除成功"))})},this.$el)},addDirClick(){$_popup.open(y,{areas:this.areas,callback:this.addOrUpdateDirCallback})},updDirClick(){$_popup.open(y,{areas:this.areas,item:I(this.selected),callback:this.addOrUpdateDirCallback})},addOrUpdateDirCallback(e,t){if(t){let t=Object(w["f"])(this.place,"name");t[e.area]?(t[e.area].children.push(e),this.$forceUpdate()):this.place.push({name:e.area,isopen:!1,children:[e]})}else k(e,this.selected)},delDirClick(){if(this.datas&&0!=this.datas.length)return $_alert.warn($_L.get("该场地下有工况，请先删除工况？"));$_alert.comfirm($_L.get("你确定要删除吗？"),e=>{e&&$_main.http.get("place/delete",{id:this.selected.id}).then(e=>{let t;this.place.forEach(e=>{e.name==this.selected.area&&(Object(w["c"])(e.children,this.selected),0==e.children&&(t=e))}),t&&Object(w["c"])(this.place,t),this.selected=null,this.cmpIndex={id:null},$_alert.success($_L.get("删除成功"))})},this.$el)},click(e){this.index++,e.children?e.isopen=!e.isopen:(this.cmpIndex=e,this.datas=this.list.filter(t=>t.placeId==e.id)),this.$forceUpdate(),this.selected=e}}},S=L,C=i("cb5d");function A(e){this["$style"]=C["default"].locals||C["default"]}var O=Object(u["a"])(S,a,n,!1,A,null,null);t["default"]=O.exports},aafe:function(e,t,i){"use strict";var a=i("a5fc"),n=i.n(a);t["default"]=n.a},cb5d:function(e,t,i){"use strict";var a=i("d36d"),n=i.n(a);t["default"]=n.a},d36d:function(e,t,i){e.exports={container:"CdRuleModule_container_JaCHp",left_ul:"CdRuleModule_left_ul_1Ex7u",indexbgc:"CdRuleModule_indexbgc_3suuS",isopen:"CdRuleModule_isopen_lcK24",isclose:"CdRuleModule_isclose_18hc_",layers:"CdRuleModule_layers_3Vvrt"}}}]);